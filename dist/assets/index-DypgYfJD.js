(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function t(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=t(l);fetch(l.href,h)}})();function gg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var op={exports:{}},gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function G1(){if(a0)return gc;a0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,h){var f=null;if(h!==void 0&&(f=""+h),l.key!==void 0&&(f=""+l.key),"key"in l){h={};for(var _ in l)_!=="key"&&(h[_]=l[_])}else h=l;return l=h.ref,{$$typeof:i,type:s,key:f,ref:l!==void 0?l:null,props:h}}return gc.Fragment=e,gc.jsx=t,gc.jsxs=t,gc}var o0;function Z1(){return o0||(o0=1,op.exports=G1()),op.exports}var w=Z1(),lp={exports:{}},_c={},up={exports:{}},cp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function K1(){return l0||(l0=1,function(i){function e(me,Ee){var fe=me.length;me.push(Ee);e:for(;0<fe;){var Ye=fe-1>>>1,B=me[Ye];if(0<l(B,Ee))me[Ye]=Ee,me[fe]=B,fe=Ye;else break e}}function t(me){return me.length===0?null:me[0]}function s(me){if(me.length===0)return null;var Ee=me[0],fe=me.pop();if(fe!==Ee){me[0]=fe;e:for(var Ye=0,B=me.length,le=B>>>1;Ye<le;){var we=2*(Ye+1)-1,ve=me[we],ye=we+1,Ae=me[ye];if(0>l(ve,fe))ye<B&&0>l(Ae,ve)?(me[Ye]=Ae,me[ye]=fe,Ye=ye):(me[Ye]=ve,me[we]=fe,Ye=we);else if(ye<B&&0>l(Ae,fe))me[Ye]=Ae,me[ye]=fe,Ye=ye;else break e}}return Ee}function l(me,Ee){var fe=me.sortIndex-Ee.sortIndex;return fe!==0?fe:me.id-Ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var f=Date,_=f.now();i.unstable_now=function(){return f.now()-_}}var y=[],b=[],A=1,C=null,k=3,D=!1,G=!1,W=!1,K=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function Z(me){for(var Ee=t(b);Ee!==null;){if(Ee.callback===null)s(b);else if(Ee.startTime<=me)s(b),Ee.sortIndex=Ee.expirationTime,e(y,Ee);else break;Ee=t(b)}}function ue(me){if(W=!1,Z(me),!G)if(t(y)!==null)G=!0,Oe();else{var Ee=t(b);Ee!==null&&Me(ue,Ee.startTime-me)}}var _e=!1,Se=-1,V=5,P=-1;function I(){return!(i.unstable_now()-P<V)}function z(){if(_e){var me=i.unstable_now();P=me;var Ee=!0;try{e:{G=!1,W&&(W=!1,te(Se),Se=-1),D=!0;var fe=k;try{t:{for(Z(me),C=t(y);C!==null&&!(C.expirationTime>me&&I());){var Ye=C.callback;if(typeof Ye=="function"){C.callback=null,k=C.priorityLevel;var B=Ye(C.expirationTime<=me);if(me=i.unstable_now(),typeof B=="function"){C.callback=B,Z(me),Ee=!0;break t}C===t(y)&&s(y),Z(me)}else s(y);C=t(y)}if(C!==null)Ee=!0;else{var le=t(b);le!==null&&Me(ue,le.startTime-me),Ee=!1}}break e}finally{C=null,k=fe,D=!1}Ee=void 0}}finally{Ee?M():_e=!1}}}var M;if(typeof se=="function")M=function(){se(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,j=F.port2;F.port1.onmessage=z,M=function(){j.postMessage(null)}}else M=function(){K(z,0)};function Oe(){_e||(_e=!0,M())}function Me(me,Ee){Se=K(function(){me(i.unstable_now())},Ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(me){me.callback=null},i.unstable_continueExecution=function(){G||D||(G=!0,Oe())},i.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<me?Math.floor(1e3/me):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return t(y)},i.unstable_next=function(me){switch(k){case 1:case 2:case 3:var Ee=3;break;default:Ee=k}var fe=k;k=Ee;try{return me()}finally{k=fe}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(me,Ee){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var fe=k;k=me;try{return Ee()}finally{k=fe}},i.unstable_scheduleCallback=function(me,Ee,fe){var Ye=i.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ye+fe:Ye):fe=Ye,me){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=fe+B,me={id:A++,callback:Ee,priorityLevel:me,startTime:fe,expirationTime:B,sortIndex:-1},fe>Ye?(me.sortIndex=fe,e(b,me),t(y)===null&&me===t(b)&&(W?(te(Se),Se=-1):W=!0,Me(ue,fe-Ye))):(me.sortIndex=B,e(y,me),G||D||(G=!0,Oe())),me},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(me){var Ee=k;return function(){var fe=k;k=Ee;try{return me.apply(this,arguments)}finally{k=fe}}}}(cp)),cp}var u0;function $1(){return u0||(u0=1,up.exports=K1()),up.exports}var hp={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function Q1(){if(c0)return We;c0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.iterator;function k(B){return B===null||typeof B!="object"?null:(B=C&&B[C]||B["@@iterator"],typeof B=="function"?B:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,W={};function K(B,le,we){this.props=B,this.context=le,this.refs=W,this.updater=we||D}K.prototype.isReactComponent={},K.prototype.setState=function(B,le){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,le,"setState")},K.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function te(){}te.prototype=K.prototype;function se(B,le,we){this.props=B,this.context=le,this.refs=W,this.updater=we||D}var Z=se.prototype=new te;Z.constructor=se,G(Z,K.prototype),Z.isPureReactComponent=!0;var ue=Array.isArray,_e={H:null,A:null,T:null,S:null},Se=Object.prototype.hasOwnProperty;function V(B,le,we,ve,ye,Ae){return we=Ae.ref,{$$typeof:i,type:B,key:le,ref:we!==void 0?we:null,props:Ae}}function P(B,le){return V(B.type,le,void 0,void 0,void 0,B.props)}function I(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function z(B){var le={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(we){return le[we]})}var M=/\/+/g;function F(B,le){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):le.toString(36)}function j(){}function Oe(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(j,j):(B.status="pending",B.then(function(le){B.status==="pending"&&(B.status="fulfilled",B.value=le)},function(le){B.status==="pending"&&(B.status="rejected",B.reason=le)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Me(B,le,we,ve,ye){var Ae=typeof B;(Ae==="undefined"||Ae==="boolean")&&(B=null);var Te=!1;if(B===null)Te=!0;else switch(Ae){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(B.$$typeof){case i:case e:Te=!0;break;case A:return Te=B._init,Me(Te(B._payload),le,we,ve,ye)}}if(Te)return ye=ye(B),Te=ve===""?"."+F(B,0):ve,ue(ye)?(we="",Te!=null&&(we=Te.replace(M,"$&/")+"/"),Me(ye,le,we,"",function(Nt){return Nt})):ye!=null&&(I(ye)&&(ye=P(ye,we+(ye.key==null||B&&B.key===ye.key?"":(""+ye.key).replace(M,"$&/")+"/")+Te)),le.push(ye)),1;Te=0;var gt=ve===""?".":ve+":";if(ue(B))for(var Ke=0;Ke<B.length;Ke++)ve=B[Ke],Ae=gt+F(ve,Ke),Te+=Me(ve,le,we,Ae,ye);else if(Ke=k(B),typeof Ke=="function")for(B=Ke.call(B),Ke=0;!(ve=B.next()).done;)ve=ve.value,Ae=gt+F(ve,Ke++),Te+=Me(ve,le,we,Ae,ye);else if(Ae==="object"){if(typeof B.then=="function")return Me(Oe(B),le,we,ve,ye);throw le=String(B),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Te}function me(B,le,we){if(B==null)return B;var ve=[],ye=0;return Me(B,ve,"","",function(Ae){return le.call(we,Ae,ye++)}),ve}function Ee(B){if(B._status===-1){var le=B._result;le=le(),le.then(function(we){(B._status===0||B._status===-1)&&(B._status=1,B._result=we)},function(we){(B._status===0||B._status===-1)&&(B._status=2,B._result=we)}),B._status===-1&&(B._status=0,B._result=le)}if(B._status===1)return B._result.default;throw B._result}var fe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Ye(){}return We.Children={map:me,forEach:function(B,le,we){me(B,function(){le.apply(this,arguments)},we)},count:function(B){var le=0;return me(B,function(){le++}),le},toArray:function(B){return me(B,function(le){return le})||[]},only:function(B){if(!I(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},We.Component=K,We.Fragment=t,We.Profiler=l,We.PureComponent=se,We.StrictMode=s,We.Suspense=y,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_e,We.act=function(){throw Error("act(...) is not supported in production builds of React.")},We.cache=function(B){return function(){return B.apply(null,arguments)}},We.cloneElement=function(B,le,we){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ve=G({},B.props),ye=B.key,Ae=void 0;if(le!=null)for(Te in le.ref!==void 0&&(Ae=void 0),le.key!==void 0&&(ye=""+le.key),le)!Se.call(le,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&le.ref===void 0||(ve[Te]=le[Te]);var Te=arguments.length-2;if(Te===1)ve.children=we;else if(1<Te){for(var gt=Array(Te),Ke=0;Ke<Te;Ke++)gt[Ke]=arguments[Ke+2];ve.children=gt}return V(B.type,ye,void 0,void 0,Ae,ve)},We.createContext=function(B){return B={$$typeof:f,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:h,_context:B},B},We.createElement=function(B,le,we){var ve,ye={},Ae=null;if(le!=null)for(ve in le.key!==void 0&&(Ae=""+le.key),le)Se.call(le,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(ye[ve]=le[ve]);var Te=arguments.length-2;if(Te===1)ye.children=we;else if(1<Te){for(var gt=Array(Te),Ke=0;Ke<Te;Ke++)gt[Ke]=arguments[Ke+2];ye.children=gt}if(B&&B.defaultProps)for(ve in Te=B.defaultProps,Te)ye[ve]===void 0&&(ye[ve]=Te[ve]);return V(B,Ae,void 0,void 0,null,ye)},We.createRef=function(){return{current:null}},We.forwardRef=function(B){return{$$typeof:_,render:B}},We.isValidElement=I,We.lazy=function(B){return{$$typeof:A,_payload:{_status:-1,_result:B},_init:Ee}},We.memo=function(B,le){return{$$typeof:b,type:B,compare:le===void 0?null:le}},We.startTransition=function(B){var le=_e.T,we={};_e.T=we;try{var ve=B(),ye=_e.S;ye!==null&&ye(we,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Ye,fe)}catch(Ae){fe(Ae)}finally{_e.T=le}},We.unstable_useCacheRefresh=function(){return _e.H.useCacheRefresh()},We.use=function(B){return _e.H.use(B)},We.useActionState=function(B,le,we){return _e.H.useActionState(B,le,we)},We.useCallback=function(B,le){return _e.H.useCallback(B,le)},We.useContext=function(B){return _e.H.useContext(B)},We.useDebugValue=function(){},We.useDeferredValue=function(B,le){return _e.H.useDeferredValue(B,le)},We.useEffect=function(B,le){return _e.H.useEffect(B,le)},We.useId=function(){return _e.H.useId()},We.useImperativeHandle=function(B,le,we){return _e.H.useImperativeHandle(B,le,we)},We.useInsertionEffect=function(B,le){return _e.H.useInsertionEffect(B,le)},We.useLayoutEffect=function(B,le){return _e.H.useLayoutEffect(B,le)},We.useMemo=function(B,le){return _e.H.useMemo(B,le)},We.useOptimistic=function(B,le){return _e.H.useOptimistic(B,le)},We.useReducer=function(B,le,we){return _e.H.useReducer(B,le,we)},We.useRef=function(B){return _e.H.useRef(B)},We.useState=function(B){return _e.H.useState(B)},We.useSyncExternalStore=function(B,le,we){return _e.H.useSyncExternalStore(B,le,we)},We.useTransition=function(){return _e.H.useTransition()},We.version="19.0.0",We}var h0;function _g(){return h0||(h0=1,hp.exports=Q1()),hp.exports}var dp={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function W1(){if(d0)return Gn;d0=1;var i=_g();function e(y){var b="https://react.dev/errors/"+y;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)b+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(y,b,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:y,containerInfo:b,implementation:A}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(y,b){if(y==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gn.createPortal=function(y,b){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return h(y,b,null,A)},Gn.flushSync=function(y){var b=f.T,A=s.p;try{if(f.T=null,s.p=2,y)return y()}finally{f.T=b,s.p=A,s.d.f()}},Gn.preconnect=function(y,b){typeof y=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(y,b))},Gn.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Gn.preinit=function(y,b){if(typeof y=="string"&&b&&typeof b.as=="string"){var A=b.as,C=_(A,b.crossOrigin),k=typeof b.integrity=="string"?b.integrity:void 0,D=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;A==="style"?s.d.S(y,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:C,integrity:k,fetchPriority:D}):A==="script"&&s.d.X(y,{crossOrigin:C,integrity:k,fetchPriority:D,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Gn.preinitModule=function(y,b){if(typeof y=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var A=_(b.as,b.crossOrigin);s.d.M(y,{crossOrigin:A,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(y)},Gn.preload=function(y,b){if(typeof y=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var A=b.as,C=_(A,b.crossOrigin);s.d.L(y,A,{crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Gn.preloadModule=function(y,b){if(typeof y=="string")if(b){var A=_(b.as,b.crossOrigin);s.d.m(y,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:A,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(y)},Gn.requestFormReset=function(y){s.d.r(y)},Gn.unstable_batchedUpdates=function(y,b){return y(b)},Gn.useFormState=function(y,b,A){return f.H.useFormState(y,b,A)},Gn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Gn.version="19.0.0",Gn}var f0;function aE(){if(f0)return dp.exports;f0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),dp.exports=W1(),dp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function Y1(){if(m0)return _c;m0=1;var i=$1(),e=_g(),t=aE();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),D=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),ue=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function Se(n){return n===null||typeof n!="object"?null:(n=_e&&n[_e]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function P(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case y:return"Fragment";case _:return"Portal";case A:return"Profiler";case b:return"StrictMode";case W:return"Suspense";case K:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Provider";case k:return(n._context.displayName||"Context")+".Consumer";case G:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case te:return r=n.displayName||null,r!==null?r:P(n.type)||"Memo";case se:r=n._payload,n=n._init;try{return P(n(r))}catch{}}return null}var I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=Object.assign,M,F;function j(n){if(M===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);M=r&&r[1]||"",F=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+n+F}var Oe=!1;function Me(n,r){if(!n||Oe)return"";Oe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var ne=ae}Reflect.construct(n,[],pe)}else{try{pe.call()}catch(ae){ne=ae}n.call(pe.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(pe=n())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),S=g[0],N=g[1];if(S&&N){var H=S.split(`
`),Q=N.split(`
`);for(p=c=0;c<H.length&&!H[c].includes("DetermineComponentFrameRoot");)c++;for(;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;if(c===H.length||p===Q.length)for(c=H.length-1,p=Q.length-1;1<=c&&0<=p&&H[c]!==Q[p];)p--;for(;1<=c&&0<=p;c--,p--)if(H[c]!==Q[p]){if(c!==1||p!==1)do if(c--,p--,0>p||H[c]!==Q[p]){var oe=`
`+H[c].replace(" at new "," at ");return n.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",n.displayName)),oe}while(1<=c&&0<=p);break}}}finally{Oe=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?j(o):""}function me(n){switch(n.tag){case 26:case 27:case 5:return j(n.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 15:return n=Me(n.type,!1),n;case 11:return n=Me(n.type.render,!1),n;case 1:return n=Me(n.type,!0),n;default:return""}}function Ee(n){try{var r="";do r+=me(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fe(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function Ye(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function B(n){if(fe(n)!==n)throw Error(s(188))}function le(n){var r=n.alternate;if(!r){if(r=fe(n),r===null)throw Error(s(188));return r!==n?null:n}for(var o=n,c=r;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){o=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return B(p),n;if(g===c)return B(p),r;g=g.sibling}throw Error(s(188))}if(o.return!==c.return)o=p,c=g;else{for(var S=!1,N=p.child;N;){if(N===o){S=!0,o=p,c=g;break}if(N===c){S=!0,c=p,o=g;break}N=N.sibling}if(!S){for(N=g.child;N;){if(N===o){S=!0,o=g,c=p;break}if(N===c){S=!0,c=g,o=p;break}N=N.sibling}if(!S)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:r}function we(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=we(n),r!==null)return r;n=n.sibling}return null}var ve=Array.isArray,ye=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},Te=[],gt=-1;function Ke(n){return{current:n}}function Nt(n){0>gt||(n.current=Te[gt],Te[gt]=null,gt--)}function ct(n,r){gt++,Te[gt]=n.current,n.current=r}var un=Ke(null),Yn=Ke(null),Mn=Ke(null),kr=Ke(null);function ur(n,r){switch(ct(Mn,r),ct(Yn,n),ct(un,null),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?Lv(r):0;break;default:if(n=n===8?r.parentNode:r,r=n.tagName,n=n.namespaceURI)n=Lv(n),r=Mv(n,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Nt(un),ct(un,r)}function qi(){Nt(un),Nt(Yn),Nt(Mn)}function fs(n){n.memoizedState!==null&&ct(kr,n);var r=un.current,o=Mv(r,n.type);r!==o&&(ct(Yn,n),ct(un,o))}function cr(n){Yn.current===n&&(Nt(un),Nt(Yn)),kr.current===n&&(Nt(kr),hc._currentValue=Ae)}var sa=Object.prototype.hasOwnProperty,Or=i.unstable_scheduleCallback,Dr=i.unstable_cancelCallback,yl=i.unstable_shouldYield,aa=i.unstable_requestPaint,Vn=i.unstable_now,vl=i.unstable_getCurrentPriorityLevel,Lt=i.unstable_ImmediatePriority,Qt=i.unstable_UserBlockingPriority,Fi=i.unstable_NormalPriority,bl=i.unstable_LowPriority,oa=i.unstable_IdlePriority,El=i.log,ms=i.unstable_setDisableYieldValue,hr=null,nn=null;function la(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(hr,n,void 0,(n.current.flags&128)===128)}catch{}}function Gi(n){if(typeof El=="function"&&ms(n),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(hr,n)}catch{}}var Wt=Math.clz32?Math.clz32:wo,Eo=Math.log,wl=Math.LN2;function wo(n){return n>>>=0,n===0?32:31-(Eo(n)/wl|0)|0}var xi=128,dr=4194304;function Si(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function hi(n,r){var o=n.pendingLanes;if(o===0)return 0;var c=0,p=n.suspendedLanes,g=n.pingedLanes,S=n.warmLanes;n=n.finishedLanes!==0;var N=o&134217727;return N!==0?(o=N&~p,o!==0?c=Si(o):(g&=N,g!==0?c=Si(g):n||(S=N&~S,S!==0&&(c=Si(S))))):(N=o&~p,N!==0?c=Si(N):g!==0?c=Si(g):n||(S=o&~S,S!==0&&(c=Si(S)))),c===0?0:r!==0&&r!==c&&(r&p)===0&&(p=c&-c,S=r&-r,p>=S||p===32&&(S&4194176)!==0)?r:c}function Lr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function ua(n,r){switch(n){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function To(){var n=xi;return xi<<=1,(xi&4194176)===0&&(xi=128),n}function Mr(){var n=dr;return dr<<=1,(dr&62914560)===0&&(dr=4194304),n}function Vr(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Mt(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Tl(n,r,o,c,p,g){var S=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var N=n.entanglements,H=n.expirationTimes,Q=n.hiddenUpdates;for(o=S&~o;0<o;){var oe=31-Wt(o),pe=1<<oe;N[oe]=0,H[oe]=-1;var ne=Q[oe];if(ne!==null)for(Q[oe]=null,oe=0;oe<ne.length;oe++){var ae=ne[oe];ae!==null&&(ae.lane&=-536870913)}o&=~pe}c!==0&&jr(n,c,0),g!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=g&~(S&~r))}function jr(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Wt(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194218}function zr(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Wt(o),p=1<<c;p&r|n[c]&r&&(n[c]|=r),o&=~p}}function Xn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ie(){var n=ye.p;return n!==0?n:(n=window.event,n===void 0?32:e0(n.type))}function fr(n,r){var o=ye.p;try{return ye.p=n,r()}finally{ye.p=o}}var Ai=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ai,Ut="__reactProps$"+Ai,Ri="__reactContainer$"+Ai,Ur="__reactEvents$"+Ai,Ci="__reactListeners$"+Ai,Ii="__reactHandles$"+Ai,xo="__reactResources$"+Ai,Br="__reactMarker$"+Ai;function ps(n){delete n[Yt],delete n[Ut],delete n[Ur],delete n[Ci],delete n[Ii]}function Ni(n){var r=n[Yt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Ri]||o[Yt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=zv(n);n!==null;){if(o=n[Yt])return o;n=zv(n)}return r}n=o,o=n.parentNode}return null}function Zi(n){if(n=n[Yt]||n[Ri]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Hr(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Pi(n){var r=n[xo];return r||(r=n[xo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(n){n[Br]=!0}var So=new Set,ca={};function Jn(n,r){jn(n,r),jn(n+"Capture",r)}function jn(n,r){for(ca[n]=r,n=0;n<r.length;n++)So.add(r[n])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ha={},da={};function qr(n){return sa.call(da,n)?!0:sa.call(ha,n)?!1:gs.test(n)?da[n]=!0:(ha[n]=!0,!1)}function $e(n,r,o){if(qr(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function dt(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Rn(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function Bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ao(n){var r=mr(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,g=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return p.call(this)},set:function(S){c=""+S,g.call(this,S)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Be(n){n._valueTracker||(n._valueTracker=Ao(n))}function wt(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=mr(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function Fr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var di=/[\n"\\]/g;function st(n){return n.replace(di,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Gr(n,r,o,c,p,g,S,N){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),r!=null?S==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Bt(r)):n.value!==""+Bt(r)&&(n.value=""+Bt(r)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),r!=null?fi(n,S,Bt(r)):o!=null?fi(n,S,Bt(o)):c!=null&&n.removeAttribute("value"),p==null&&g!=null&&(n.defaultChecked=!!g),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.name=""+Bt(N):n.removeAttribute("name")}function Ki(n,r,o,c,p,g,S,N){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;o=o!=null?""+Bt(o):"",r=r!=null?""+Bt(r):o,N||r===n.value||(n.value=r),n.defaultValue=r}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=N?n.checked:!!c,n.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function fi(n,r,o){r==="number"&&Fr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function De(n,r,o,c){if(n=n.options,r){r={};for(var p=0;p<o.length;p++)r["$"+o[p]]=!0;for(o=0;o<n.length;o++)p=r.hasOwnProperty("$"+n[o].value),n[o].selected!==p&&(n[o].selected=p),p&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Bt(o),r=null,p=0;p<n.length;p++){if(n[p].value===o){n[p].selected=!0,c&&(n[p].defaultSelected=!0);return}r!==null||n[p].disabled||(r=n[p])}r!==null&&(r.selected=!0)}}function ei(n,r,o){if(r!=null&&(r=""+Bt(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Bt(o):""}function mi(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(s(92));if(ve(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Bt(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function _n(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pr(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||Ro.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function fa(n,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var p in r)c=r[p],r.hasOwnProperty(p)&&o[p]!==c&&pr(n,p,c)}else for(var g in r)r.hasOwnProperty(g)&&pr(n,g,r[g])}function _s(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ma=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Co=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pi(n){return Co.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Cn=null;function ys(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ki=null,gr=null;function Ve(n){var r=Zi(n);if(r&&(n=r.stateNode)){var o=n[Ut]||null;e:switch(n=r.stateNode,r.type){case"input":if(Gr(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+st(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var p=c[Ut]||null;if(!p)throw Error(s(90));Gr(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&wt(c)}break e;case"textarea":ei(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&De(n,!!o.multiple,r,!1)}}}var zn=!1;function pt(n,r,o){if(zn)return n(r,o);zn=!0;try{var c=n(r);return c}finally{if(zn=!1,(ki!==null||gr!==null)&&(Vh(),ki&&(r=ki,n=gr,gr=ki=null,Ve(r),n)))for(r=0;r<n.length;r++)Ve(n[r])}}function Zr(n,r){var o=n.stateNode;if(o===null)return null;var c=o[Ut]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Un=!1;if(An)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){Un=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{Un=!1}var gi=null,Bn=null,Oi=null;function yr(){if(Oi)return Oi;var n,r=Bn,o=r.length,c,p="value"in gi?gi.value:gi.textContent,g=p.length;for(n=0;n<o&&r[n]===p[n];n++);var S=o-n;for(c=1;c<=S&&r[o-c]===p[g-c];c++);return Oi=p.slice(n,1<c?1-c:void 0)}function vt(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function yn(){return!0}function pa(){return!1}function Xt(n){function r(o,c,p,g,S){this._reactName=o,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(o=n[N],this[N]=o?o(g):g[N]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?yn:pa,this.isPropagationStopped=pa,this}return z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=yn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=yn)},persist:function(){},isPersistent:yn}),r}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=Xt(ft),vr=z({},ft,{view:0,detail:0}),xl=Xt(vr),bs,Qe,$i,cn=z({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$r,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$i&&($i&&n.type==="mousemove"?(bs=n.screenX-$i.screenX,Qe=n.screenY-$i.screenY):Qe=bs=0,$i=n),bs)},movementY:function(n){return"movementY"in n?n.movementY:Qe}}),vn=Xt(cn),Io=z({},cn,{dataTransfer:0}),Nu=Xt(Io),br=z({},vr,{relatedTarget:0}),ga=Xt(br),_a=z({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),ya=Xt(_a),Sl=z({},ft,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kr=Xt(Sl),Pu=z({},ft,{data:0}),Hn=Xt(Pu),Es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},No={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Di={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function va(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Di[n])?!!r[n]:!1}function $r(){return va}var ba=z({},vr,{key:function(n){if(n.key){var r=Es[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=vt(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?No[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$r,charCode:function(n){return n.type==="keypress"?vt(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vt(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ea=Xt(ba),Po=z({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wa=Xt(Po),Er=z({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$r}),Al=Xt(Er),Ta=z({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rl=Xt(Ta),ko=z({},cn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ws=Xt(ko),rn=z({},ft,{newState:0,oldState:0}),Qi=Xt(rn),Cl=[9,13,27,32],qn=An&&"CompositionEvent"in window,d=null;An&&"documentMode"in document&&(d=document.documentMode);var E=An&&"TextEvent"in window&&!d,x=An&&(!qn||d&&8<d&&11>=d),O=" ",J=!1;function re(n,r){switch(n){case"keyup":return Cl.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var tt=!1;function Ht(n,r){switch(n){case"compositionend":return be(r);case"keypress":return r.which!==32?null:(J=!0,O);case"textInput":return n=r.data,n===O&&J?null:n;default:return null}}function nt(n,r){if(tt)return n==="compositionend"||!qn&&re(n,r)?(n=yr(),Oi=Bn=gi=null,tt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return x&&r.locale!=="ko"?null:r.data;default:return null}}var _t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function St(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!_t[n.type]:r==="textarea"}function wr(n,r,o,c){ki?gr?gr.push(c):gr=[c]:ki=c,r=Hh(r,"onChange"),0<r.length&&(o=new vs("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var Tt=null,Wi=null;function Yi(n){Nv(n,0)}function Il(n){var r=Hr(n);if(wt(r))return n}function xa(n,r){if(n==="change")return r}var ku=!1;if(An){var Sa;if(An){var Ou="oninput"in document;if(!Ou){var Tr=document.createElement("div");Tr.setAttribute("oninput","return;"),Ou=typeof Tr.oninput=="function"}Sa=Ou}else Sa=!1;ku=Sa&&(!document.documentMode||9<document.documentMode)}function Oo(){Tt&&(Tt.detachEvent("onpropertychange",rh),Wi=Tt=null)}function rh(n){if(n.propertyName==="value"&&Il(Wi)){var r=[];wr(r,Wi,n,ys(n)),pt(Yi,r)}}function Du(n,r,o){n==="focusin"?(Oo(),Tt=r,Wi=o,Tt.attachEvent("onpropertychange",rh)):n==="focusout"&&Oo()}function Rf(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Il(Wi)}function xr(n,r){if(n==="click")return Il(r)}function Cf(n,r){if(n==="input"||n==="change")return Il(r)}function Aa(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var ti=typeof Object.is=="function"?Object.is:Aa;function ni(n,r){if(ti(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var p=o[c];if(!sa.call(r,p)||!ti(n[p],r[p]))return!1}return!0}function Do(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Lu(n,r){var o=Do(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Do(o)}}function Nl(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Nl(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Lo(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Fr(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Fr(n.document)}return r}function Mo(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Pl(n,r){var o=Lo(r);r=n.focusedElem;var c=n.selectionRange;if(o!==r&&r&&r.ownerDocument&&Nl(r.ownerDocument.documentElement,r)){if(c!==null&&Mo(r)){if(n=c.start,o=c.end,o===void 0&&(o=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(o,r.value.length);else if(o=(n=r.ownerDocument||document)&&n.defaultView||window,o.getSelection){o=o.getSelection();var p=r.textContent.length,g=Math.min(c.start,p);c=c.end===void 0?g:Math.min(c.end,p),!o.extend&&g>c&&(p=c,c=g,g=p),p=Lu(r,g);var S=Lu(r,c);p&&S&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),o.removeAllRanges(),g>c?(o.addRange(n),o.extend(S.node,S.offset)):(n.setEnd(S.node,S.offset),o.addRange(n)))}}for(n=[],o=r;o=o.parentNode;)o.nodeType===1&&n.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)o=n[r],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Ra=An&&"documentMode"in document&&11>=document.documentMode,Sr=null,Vo=null,Ca=null,Mu=!1;function jo(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Mu||Sr==null||Sr!==Fr(c)||(c=Sr,"selectionStart"in c&&Mo(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ca&&ni(Ca,c)||(Ca=c,c=Hh(Vo,"onSelect"),0<c.length&&(r=new vs("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=Sr)))}function Ts(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var xs={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},Vu={},ju={};An&&(ju=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Ss(n){if(Vu[n])return Vu[n];if(!xs[n])return n;var r=xs[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in ju)return Vu[n]=r[o];return n}var Li=Ss("animationend"),zo=Ss("animationiteration"),sh=Ss("animationstart"),kl=Ss("transitionrun"),If=Ss("transitionstart"),ah=Ss("transitioncancel"),oh=Ss("transitionend"),Ia=new Map,lh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function bn(n,r){Ia.set(n,r),Jn(r,[n])}var ii=[],As=0,zu=0;function _i(){for(var n=As,r=zu=As=0;r<n;){var o=ii[r];ii[r++]=null;var c=ii[r];ii[r++]=null;var p=ii[r];ii[r++]=null;var g=ii[r];if(ii[r++]=null,c!==null&&p!==null){var S=c.pending;S===null?p.next=p:(p.next=S.next,S.next=p),c.pending=p}g!==0&&uh(o,p,g)}}function Uo(n,r,o,c){ii[As++]=n,ii[As++]=r,ii[As++]=o,ii[As++]=c,zu|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ol(n,r,o,c){return Uo(n,r,o,c),Rs(n)}function yi(n,r){return Uo(n,null,null,r),Rs(n)}function uh(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var p=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(p=!0)),n=g,g=g.return;p&&r!==null&&n.tag===3&&(g=n.stateNode,p=31-Wt(o),g=g.hiddenUpdates,n=g[p],n===null?g[p]=[r]:n.push(r),r.lane=o|536870912)}function Rs(n){if(50<rc)throw rc=0,Pm=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Xi={},Uu=new WeakMap;function ri(n,r){if(typeof n=="object"&&n!==null){var o=Uu.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Ee(r)},Uu.set(n,r),r)}return{value:n,source:r,stack:Ee(r)}}var Na=[],Cs=0,Bo=null,Ho=0,si=[],ai=0,Is=null,Ji=1,er="";function Ns(n,r){Na[Cs++]=Ho,Na[Cs++]=Bo,Bo=n,Ho=r}function a(n,r,o){si[ai++]=Ji,si[ai++]=er,si[ai++]=Is,Is=n;var c=Ji;n=er;var p=32-Wt(c)-1;c&=~(1<<p),o+=1;var g=32-Wt(r)+p;if(30<g){var S=p-p%5;g=(c&(1<<S)-1).toString(32),c>>=S,p-=S,Ji=1<<32-Wt(r)+p|o<<p|c,er=g+n}else Ji=1<<g|o<<p|c,er=n}function u(n){n.return!==null&&(Ns(n,1),a(n,1,0))}function m(n){for(;n===Bo;)Bo=Na[--Cs],Na[Cs]=null,Ho=Na[--Cs],Na[Cs]=null;for(;n===Is;)Is=si[--ai],si[ai]=null,er=si[--ai],si[ai]=null,Ji=si[--ai],si[ai]=null}var v=null,T=null,R=!1,q=null,Y=!1,ie=Error(s(519));function ce(n){var r=Error(s(418,""));throw kt(ri(r,n)),ie}function xe(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[Yt]=n,r[Ut]=c,o){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(o=0;o<ac.length;o++)at(ac[o],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":at("invalid",r),Ki(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Be(r);break;case"select":at("invalid",r);break;case"textarea":at("invalid",r),mi(r,c.value,c.defaultValue,c.children),Be(r)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||Dv(r.textContent,o)?(c.popover!=null&&(at("beforetoggle",r),at("toggle",r)),c.onScroll!=null&&at("scroll",r),c.onScrollEnd!=null&&at("scrollend",r),c.onClick!=null&&(r.onclick=qh),r=!0):r=!1,r||ce(n)}function je(n){for(v=n.return;v;)switch(v.tag){case 3:case 27:Y=!0;return;case 5:case 13:Y=!1;return;default:v=v.return}}function Fe(n){if(n!==v)return!1;if(!R)return je(n),R=!0,!1;var r=!1,o;if((o=n.tag!==3&&n.tag!==27)&&((o=n.tag===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||$m(n.type,n.memoizedProps)),o=!o),o&&(r=!0),r&&T&&ce(n),je(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){T=Rr(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}T=null}}else T=v?Rr(n.stateNode.nextSibling):null;return!0}function Jt(){T=v=null,R=!1}function kt(n){q===null?q=[n]:q.push(n)}var En=Error(s(460)),In=Error(s(474)),Qr={then:function(){}};function ch(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Dl(){}function hh(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Dl,Dl),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===En?Error(s(483)):n;default:if(typeof r.status=="string")r.then(Dl,Dl);else{if(n=Rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var p=r;p.status="fulfilled",p.value=c}},function(c){if(r.status==="pending"){var p=r;p.status="rejected",p.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===En?Error(s(483)):n}throw Pa=r,En}}var Pa=null;function dh(){if(Pa===null)throw Error(s(459));var n=Pa;return Pa=null,n}var Ps=null,At=0;function ks(n){var r=At;return At+=1,Ps===null&&(Ps=[]),hh(Ps,n,r)}function qo(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Ll(n,r){throw r.$$typeof===h?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function fh(n){var r=n._init;return r(n._payload)}function Ml(n){function r(X,$){if(n){var ee=X.deletions;ee===null?(X.deletions=[$],X.flags|=16):ee.push($)}}function o(X,$){if(!n)return null;for(;$!==null;)r(X,$),$=$.sibling;return null}function c(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function p(X,$){return X=qa(X,$),X.index=0,X.sibling=null,X}function g(X,$,ee){return X.index=ee,n?(ee=X.alternate,ee!==null?(ee=ee.index,ee<$?(X.flags|=33554434,$):ee):(X.flags|=33554434,$)):(X.flags|=1048576,$)}function S(X){return n&&X.alternate===null&&(X.flags|=33554434),X}function N(X,$,ee,he){return $===null||$.tag!==6?($=Tm(ee,X.mode,he),$.return=X,$):($=p($,ee),$.return=X,$)}function H(X,$,ee,he){var Ce=ee.type;return Ce===y?oe(X,$,ee.props.children,he,ee.key):$!==null&&($.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===se&&fh(Ce)===$.type)?($=p($,ee.props),qo($,ee),$.return=X,$):($=kh(ee.type,ee.key,ee.props,null,X.mode,he),qo($,ee),$.return=X,$)}function Q(X,$,ee,he){return $===null||$.tag!==4||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?($=xm(ee,X.mode,he),$.return=X,$):($=p($,ee.children||[]),$.return=X,$)}function oe(X,$,ee,he,Ce){return $===null||$.tag!==7?($=Xo(ee,X.mode,he,Ce),$.return=X,$):($=p($,ee),$.return=X,$)}function pe(X,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Tm(""+$,X.mode,ee),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case f:return ee=kh($.type,$.key,$.props,null,X.mode,ee),qo(ee,$),ee.return=X,ee;case _:return $=xm($,X.mode,ee),$.return=X,$;case se:var he=$._init;return $=he($._payload),pe(X,$,ee)}if(ve($)||Se($))return $=Xo($,X.mode,ee,null),$.return=X,$;if(typeof $.then=="function")return pe(X,ks($),ee);if($.$$typeof===D)return pe(X,Ih(X,$),ee);Ll(X,$)}return null}function ne(X,$,ee,he){var Ce=$!==null?$.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ce!==null?null:N(X,$,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case f:return ee.key===Ce?H(X,$,ee,he):null;case _:return ee.key===Ce?Q(X,$,ee,he):null;case se:return Ce=ee._init,ee=Ce(ee._payload),ne(X,$,ee,he)}if(ve(ee)||Se(ee))return Ce!==null?null:oe(X,$,ee,he,null);if(typeof ee.then=="function")return ne(X,$,ks(ee),he);if(ee.$$typeof===D)return ne(X,$,Ih(X,ee),he);Ll(X,ee)}return null}function ae(X,$,ee,he,Ce){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return X=X.get(ee)||null,N($,X,""+he,Ce);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case f:return X=X.get(he.key===null?ee:he.key)||null,H($,X,he,Ce);case _:return X=X.get(he.key===null?ee:he.key)||null,Q($,X,he,Ce);case se:var Je=he._init;return he=Je(he._payload),ae(X,$,ee,he,Ce)}if(ve(he)||Se(he))return X=X.get(ee)||null,oe($,X,he,Ce,null);if(typeof he.then=="function")return ae(X,$,ee,ks(he),Ce);if(he.$$typeof===D)return ae(X,$,ee,Ih($,he),Ce);Ll($,he)}return null}function Ne(X,$,ee,he){for(var Ce=null,Je=null,ke=$,Ue=$=0,xn=null;ke!==null&&Ue<ee.length;Ue++){ke.index>Ue?(xn=ke,ke=null):xn=ke.sibling;var mt=ne(X,ke,ee[Ue],he);if(mt===null){ke===null&&(ke=xn);break}n&&ke&&mt.alternate===null&&r(X,ke),$=g(mt,$,Ue),Je===null?Ce=mt:Je.sibling=mt,Je=mt,ke=xn}if(Ue===ee.length)return o(X,ke),R&&Ns(X,Ue),Ce;if(ke===null){for(;Ue<ee.length;Ue++)ke=pe(X,ee[Ue],he),ke!==null&&($=g(ke,$,Ue),Je===null?Ce=ke:Je.sibling=ke,Je=ke);return R&&Ns(X,Ue),Ce}for(ke=c(ke);Ue<ee.length;Ue++)xn=ae(ke,X,Ue,ee[Ue],he),xn!==null&&(n&&xn.alternate!==null&&ke.delete(xn.key===null?Ue:xn.key),$=g(xn,$,Ue),Je===null?Ce=xn:Je.sibling=xn,Je=xn);return n&&ke.forEach(function(Wa){return r(X,Wa)}),R&&Ns(X,Ue),Ce}function Ge(X,$,ee,he){if(ee==null)throw Error(s(151));for(var Ce=null,Je=null,ke=$,Ue=$=0,xn=null,mt=ee.next();ke!==null&&!mt.done;Ue++,mt=ee.next()){ke.index>Ue?(xn=ke,ke=null):xn=ke.sibling;var Wa=ne(X,ke,mt.value,he);if(Wa===null){ke===null&&(ke=xn);break}n&&ke&&Wa.alternate===null&&r(X,ke),$=g(Wa,$,Ue),Je===null?Ce=Wa:Je.sibling=Wa,Je=Wa,ke=xn}if(mt.done)return o(X,ke),R&&Ns(X,Ue),Ce;if(ke===null){for(;!mt.done;Ue++,mt=ee.next())mt=pe(X,mt.value,he),mt!==null&&($=g(mt,$,Ue),Je===null?Ce=mt:Je.sibling=mt,Je=mt);return R&&Ns(X,Ue),Ce}for(ke=c(ke);!mt.done;Ue++,mt=ee.next())mt=ae(ke,X,Ue,mt.value,he),mt!==null&&(n&&mt.alternate!==null&&ke.delete(mt.key===null?Ue:mt.key),$=g(mt,$,Ue),Je===null?Ce=mt:Je.sibling=mt,Je=mt);return n&&ke.forEach(function(F1){return r(X,F1)}),R&&Ns(X,Ue),Ce}function Gt(X,$,ee,he){if(typeof ee=="object"&&ee!==null&&ee.type===y&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case f:e:{for(var Ce=ee.key;$!==null;){if($.key===Ce){if(Ce=ee.type,Ce===y){if($.tag===7){o(X,$.sibling),he=p($,ee.props.children),he.return=X,X=he;break e}}else if($.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===se&&fh(Ce)===$.type){o(X,$.sibling),he=p($,ee.props),qo(he,ee),he.return=X,X=he;break e}o(X,$);break}else r(X,$);$=$.sibling}ee.type===y?(he=Xo(ee.props.children,X.mode,he,ee.key),he.return=X,X=he):(he=kh(ee.type,ee.key,ee.props,null,X.mode,he),qo(he,ee),he.return=X,X=he)}return S(X);case _:e:{for(Ce=ee.key;$!==null;){if($.key===Ce)if($.tag===4&&$.stateNode.containerInfo===ee.containerInfo&&$.stateNode.implementation===ee.implementation){o(X,$.sibling),he=p($,ee.children||[]),he.return=X,X=he;break e}else{o(X,$);break}else r(X,$);$=$.sibling}he=xm(ee,X.mode,he),he.return=X,X=he}return S(X);case se:return Ce=ee._init,ee=Ce(ee._payload),Gt(X,$,ee,he)}if(ve(ee))return Ne(X,$,ee,he);if(Se(ee)){if(Ce=Se(ee),typeof Ce!="function")throw Error(s(150));return ee=Ce.call(ee),Ge(X,$,ee,he)}if(typeof ee.then=="function")return Gt(X,$,ks(ee),he);if(ee.$$typeof===D)return Gt(X,$,Ih(X,ee),he);Ll(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,$!==null&&$.tag===6?(o(X,$.sibling),he=p($,ee),he.return=X,X=he):(o(X,$),he=Tm(ee,X.mode,he),he.return=X,X=he),S(X)):o(X,$)}return function(X,$,ee,he){try{At=0;var Ce=Gt(X,$,ee,he);return Ps=null,Ce}catch(ke){if(ke===En)throw ke;var Je=rr(29,ke,null,X.mode);return Je.lanes=he,Je.return=X,Je}finally{}}}var Wr=Ml(!0),mh=Ml(!1),Vl=Ke(null),ph=Ke(0);function D_(n,r){n=qs,ct(ph,n),ct(Vl,r),qs=n|r.baseLanes}function Nf(){ct(ph,qs),ct(Vl,Vl.current)}function Pf(){qs=ph.current,Nt(Vl),Nt(ph)}var tr=Ke(null),Yr=null;function ka(n){var r=n.alternate;ct(hn,hn.current&1),ct(tr,n),Yr===null&&(r===null||Vl.current!==null||r.memoizedState!==null)&&(Yr=n)}function L_(n){if(n.tag===22){if(ct(hn,hn.current),ct(tr,n),Yr===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Yr=n)}}else Oa()}function Oa(){ct(hn,hn.current),ct(tr,tr.current)}function Os(n){Nt(tr),Yr===n&&(Yr=null),Nt(hn)}var hn=Ke(0);function gh(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Px=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},kx=i.unstable_scheduleCallback,Ox=i.unstable_NormalPriority,dn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kf(){return{controller:new Px,data:new Map,refCount:0}}function Bu(n){n.refCount--,n.refCount===0&&kx(Ox,function(){n.controller.abort()})}var Hu=null,Of=0,jl=0,zl=null;function Dx(n,r){if(Hu===null){var o=Hu=[];Of=0,jl=zm(),zl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Of++,r.then(M_,M_),r}function M_(){if(--Of===0&&Hu!==null){zl!==null&&(zl.status="fulfilled");var n=Hu;Hu=null,jl=0,zl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Lx(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var p=0;p<o.length;p++)(0,o[p])(r)},function(p){for(c.status="rejected",c.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),c}var V_=I.S;I.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Dx(n,r),V_!==null&&V_(n,r)};var Fo=Ke(null);function Df(){var n=Fo.current;return n!==null?n:Rt.pooledCache}function _h(n,r){r===null?ct(Fo,Fo.current):ct(Fo,r.pool)}function j_(){var n=Df();return n===null?null:{parent:dn._currentValue,pool:n}}var Da=0,Xe=null,bt=null,sn=null,yh=!1,Ul=!1,Go=!1,vh=0,qu=0,Bl=null,Mx=0;function en(){throw Error(s(321))}function Lf(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!ti(n[o],r[o]))return!1;return!0}function Mf(n,r,o,c,p,g){return Da=g,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=n===null||n.memoizedState===null?Zo:La,Go=!1,g=o(c,p),Go=!1,Ul&&(g=U_(r,o,c,p)),z_(n),g}function z_(n){I.H=Xr;var r=bt!==null&&bt.next!==null;if(Da=0,sn=bt=Xe=null,yh=!1,qu=0,Bl=null,r)throw Error(s(300));n===null||wn||(n=n.dependencies,n!==null&&Ch(n)&&(wn=!0))}function U_(n,r,o,c){Xe=n;var p=0;do{if(Ul&&(Bl=null),qu=0,Ul=!1,25<=p)throw Error(s(301));if(p+=1,sn=bt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}I.H=Ko,g=r(o,c)}while(Ul);return g}function Vx(){var n=I.H,r=n.useState()[0];return r=typeof r.then=="function"?Fu(r):r,n=n.useState()[0],(bt!==null?bt.memoizedState:null)!==n&&(Xe.flags|=1024),r}function Vf(){var n=vh!==0;return vh=0,n}function jf(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function zf(n){if(yh){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}yh=!1}Da=0,sn=bt=Xe=null,Ul=!1,qu=vh=0,Bl=null}function vi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Xe.memoizedState=sn=n:sn=sn.next=n,sn}function an(){if(bt===null){var n=Xe.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var r=sn===null?Xe.memoizedState:sn.next;if(r!==null)sn=r,bt=n;else{if(n===null)throw Xe.alternate===null?Error(s(467)):Error(s(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},sn===null?Xe.memoizedState=sn=n:sn=sn.next=n}return sn}var bh;bh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Fu(n){var r=qu;return qu+=1,Bl===null&&(Bl=[]),n=hh(Bl,n,r),r=Xe,(sn===null?r.memoizedState:sn.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?Zo:La),n}function Eh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fu(n);if(n.$$typeof===D)return Fn(n)}throw Error(s(438,String(n)))}function Uf(n){var r=null,o=Xe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(p){return p.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=bh(),Xe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=ue;return r.index++,o}function Ds(n,r){return typeof r=="function"?r(n):r}function wh(n){var r=an();return Bf(r,bt,n)}function Bf(n,r,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var p=n.baseQueue,g=c.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}r.baseQueue=p=g,c.pending=null}if(g=n.baseState,p===null)n.memoizedState=g;else{r=p.next;var N=S=null,H=null,Q=r,oe=!1;do{var pe=Q.lane&-536870913;if(pe!==Q.lane?(lt&pe)===pe:(Da&pe)===pe){var ne=Q.revertLane;if(ne===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),pe===jl&&(oe=!0);else if((Da&ne)===ne){Q=Q.next,ne===jl&&(oe=!0);continue}else pe={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},H===null?(N=H=pe,S=g):H=H.next=pe,Xe.lanes|=ne,Fa|=ne;pe=Q.action,Go&&o(g,pe),g=Q.hasEagerState?Q.eagerState:o(g,pe)}else ne={lane:pe,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},H===null?(N=H=ne,S=g):H=H.next=ne,Xe.lanes|=pe,Fa|=pe;Q=Q.next}while(Q!==null&&Q!==r);if(H===null?S=g:H.next=N,!ti(g,n.memoizedState)&&(wn=!0,oe&&(o=zl,o!==null)))throw o;n.memoizedState=g,n.baseState=S,n.baseQueue=H,c.lastRenderedState=g}return p===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Hf(n){var r=an(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,p=o.pending,g=r.memoizedState;if(p!==null){o.pending=null;var S=p=p.next;do g=n(g,S.action),S=S.next;while(S!==p);ti(g,r.memoizedState)||(wn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,c]}function B_(n,r,o){var c=Xe,p=an(),g=R;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=r();var S=!ti((bt||p).memoizedState,o);if(S&&(p.memoizedState=o,wn=!0),p=p.queue,Gf(F_.bind(null,c,p,n),[n]),p.getSnapshot!==r||S||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Hl(9,q_.bind(null,c,p,o,r),{destroy:void 0},null),Rt===null)throw Error(s(349));g||(Da&60)!==0||H_(c,r,o)}return o}function H_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Xe.updateQueue,r===null?(r=bh(),Xe.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function q_(n,r,o,c){r.value=o,r.getSnapshot=c,G_(r)&&Z_(n)}function F_(n,r,o){return o(function(){G_(r)&&Z_(n)})}function G_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!ti(n,o)}catch{return!0}}function Z_(n){var r=yi(n,2);r!==null&&oi(r,n,2)}function qf(n){var r=vi();if(typeof n=="function"){var o=n;if(n=o(),Go){Gi(!0);try{o()}finally{Gi(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:n},r}function K_(n,r,o,c){return n.baseState=o,Bf(n,bt,typeof c=="function"?c:Ds)}function jx(n,r,o,c,p){if(Sh(n))throw Error(s(485));if(n=r.action,n!==null){var g={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};I.T!==null?o(!0):g.isTransition=!1,c(g),o=r.pending,o===null?(g.next=r.pending=g,$_(r,g)):(g.next=o.next,r.pending=o.next=g)}}function $_(n,r){var o=r.action,c=r.payload,p=n.state;if(r.isTransition){var g=I.T,S={};I.T=S;try{var N=o(p,c),H=I.S;H!==null&&H(S,N),Q_(n,r,N)}catch(Q){Ff(n,r,Q)}finally{I.T=g}}else try{g=o(p,c),Q_(n,r,g)}catch(Q){Ff(n,r,Q)}}function Q_(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){W_(n,r,c)},function(c){return Ff(n,r,c)}):W_(n,r,o)}function W_(n,r,o){r.status="fulfilled",r.value=o,Y_(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,$_(n,o)))}function Ff(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Y_(r),r=r.next;while(r!==c)}n.action=null}function Y_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function X_(n,r){return r}function J_(n,r){if(R){var o=Rt.formState;if(o!==null){e:{var c=Xe;if(R){if(T){t:{for(var p=T,g=Y;p.nodeType!==8;){if(!g){p=null;break t}if(p=Rr(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){T=Rr(p.nextSibling),c=p.data==="F!";break e}}ce(c)}c=!1}c&&(r=o[0])}}return o=vi(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:X_,lastRenderedState:r},o.queue=c,o=_y.bind(null,Xe,c),c.dispatch=o,c=qf(!1),g=Wf.bind(null,Xe,!1,c.queue),c=vi(),p={state:r,dispatch:null,action:n,pending:null},c.queue=p,o=jx.bind(null,Xe,p,g,o),p.dispatch=o,c.memoizedState=n,[r,o,!1]}function ey(n){var r=an();return ty(r,bt,n)}function ty(n,r,o){r=Bf(n,r,X_)[0],n=wh(Ds)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?Fu(r):r;var c=an(),p=c.queue,g=p.dispatch;return o!==c.memoizedState&&(Xe.flags|=2048,Hl(9,zx.bind(null,p,o),{destroy:void 0},null)),[r,g,n]}function zx(n,r){n.action=r}function ny(n){var r=an(),o=bt;if(o!==null)return ty(r,o,n);an(),r=r.memoizedState,o=an();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function Hl(n,r,o,c){return n={tag:n,create:r,inst:o,deps:c,next:null},r=Xe.updateQueue,r===null&&(r=bh(),Xe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function iy(){return an().memoizedState}function Th(n,r,o,c){var p=vi();Xe.flags|=n,p.memoizedState=Hl(1|r,o,{destroy:void 0},c===void 0?null:c)}function xh(n,r,o,c){var p=an();c=c===void 0?null:c;var g=p.memoizedState.inst;bt!==null&&c!==null&&Lf(c,bt.memoizedState.deps)?p.memoizedState=Hl(r,o,g,c):(Xe.flags|=n,p.memoizedState=Hl(1|r,o,g,c))}function ry(n,r){Th(8390656,8,n,r)}function Gf(n,r){xh(2048,8,n,r)}function sy(n,r){return xh(4,2,n,r)}function ay(n,r){return xh(4,4,n,r)}function oy(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function ly(n,r,o){o=o!=null?o.concat([n]):null,xh(4,4,oy.bind(null,r,n),o)}function Zf(){}function uy(n,r){var o=an();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Lf(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function cy(n,r){var o=an();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Lf(r,c[1]))return c[0];if(c=n(),Go){Gi(!0);try{n()}finally{Gi(!1)}}return o.memoizedState=[c,r],c}function Kf(n,r,o){return o===void 0||(Da&1073741824)!==0?n.memoizedState=r:(n.memoizedState=o,n=dv(),Xe.lanes|=n,Fa|=n,o)}function hy(n,r,o,c){return ti(o,r)?o:Vl.current!==null?(n=Kf(n,o,c),ti(n,r)||(wn=!0),n):(Da&42)===0?(wn=!0,n.memoizedState=o):(n=dv(),Xe.lanes|=n,Fa|=n,r)}function dy(n,r,o,c,p){var g=ye.p;ye.p=g!==0&&8>g?g:8;var S=I.T,N={};I.T=N,Wf(n,!1,r,o);try{var H=p(),Q=I.S;if(Q!==null&&Q(N,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var oe=Lx(H,c);Gu(n,r,oe,zi(n))}else Gu(n,r,c,zi(n))}catch(pe){Gu(n,r,{then:function(){},status:"rejected",reason:pe},zi())}finally{ye.p=g,I.T=S}}function Ux(){}function $f(n,r,o,c){if(n.tag!==5)throw Error(s(476));var p=fy(n).queue;dy(n,p,r,Ae,o===null?Ux:function(){return my(n),o(c)})}function fy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:Ae},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function my(n){var r=fy(n).next.queue;Gu(n,r,{},zi())}function Qf(){return Fn(hc)}function py(){return an().memoizedState}function gy(){return an().memoizedState}function Bx(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=zi();n=ja(o);var c=za(r,n,o);c!==null&&(oi(c,r,o),$u(c,r,o)),r={cache:kf()},n.payload=r;return}r=r.return}}function Hx(n,r,o){var c=zi();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Sh(n)?yy(r,o):(o=Ol(n,r,o,c),o!==null&&(oi(o,n,c),vy(o,r,c)))}function _y(n,r,o){var c=zi();Gu(n,r,o,c)}function Gu(n,r,o,c){var p={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Sh(n))yy(r,p);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var S=r.lastRenderedState,N=g(S,o);if(p.hasEagerState=!0,p.eagerState=N,ti(N,S))return Uo(n,r,p,0),Rt===null&&_i(),!1}catch{}finally{}if(o=Ol(n,r,p,c),o!==null)return oi(o,n,c),vy(o,r,c),!0}return!1}function Wf(n,r,o,c){if(c={lane:2,revertLane:zm(),action:c,hasEagerState:!1,eagerState:null,next:null},Sh(n)){if(r)throw Error(s(479))}else r=Ol(n,o,c,2),r!==null&&oi(r,n,2)}function Sh(n){var r=n.alternate;return n===Xe||r!==null&&r===Xe}function yy(n,r){Ul=yh=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function vy(n,r,o){if((o&4194176)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,zr(n,o)}}var Xr={readContext:Fn,use:Eh,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en};Xr.useCacheRefresh=en,Xr.useMemoCache=en,Xr.useHostTransitionStatus=en,Xr.useFormState=en,Xr.useActionState=en,Xr.useOptimistic=en;var Zo={readContext:Fn,use:Eh,useCallback:function(n,r){return vi().memoizedState=[n,r===void 0?null:r],n},useContext:Fn,useEffect:ry,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Th(4194308,4,oy.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Th(4194308,4,n,r)},useInsertionEffect:function(n,r){Th(4,2,n,r)},useMemo:function(n,r){var o=vi();r=r===void 0?null:r;var c=n();if(Go){Gi(!0);try{n()}finally{Gi(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=vi();if(o!==void 0){var p=o(r);if(Go){Gi(!0);try{o(r)}finally{Gi(!1)}}}else p=r;return c.memoizedState=c.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},c.queue=n,n=n.dispatch=Hx.bind(null,Xe,n),[c.memoizedState,n]},useRef:function(n){var r=vi();return n={current:n},r.memoizedState=n},useState:function(n){n=qf(n);var r=n.queue,o=_y.bind(null,Xe,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Zf,useDeferredValue:function(n,r){var o=vi();return Kf(o,n,r)},useTransition:function(){var n=qf(!1);return n=dy.bind(null,Xe,n.queue,!0,!1),vi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=Xe,p=vi();if(R){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),Rt===null)throw Error(s(349));(lt&60)!==0||H_(c,r,o)}p.memoizedState=o;var g={value:o,getSnapshot:r};return p.queue=g,ry(F_.bind(null,c,g,n),[n]),c.flags|=2048,Hl(9,q_.bind(null,c,g,o,r),{destroy:void 0},null),o},useId:function(){var n=vi(),r=Rt.identifierPrefix;if(R){var o=er,c=Ji;o=(c&~(1<<32-Wt(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=vh++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Mx++,r=":"+r+"r"+o.toString(32)+":";return n.memoizedState=r},useCacheRefresh:function(){return vi().memoizedState=Bx.bind(null,Xe)}};Zo.useMemoCache=Uf,Zo.useHostTransitionStatus=Qf,Zo.useFormState=J_,Zo.useActionState=J_,Zo.useOptimistic=function(n){var r=vi();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Wf.bind(null,Xe,!0,o),o.dispatch=r,[n,r]};var La={readContext:Fn,use:Eh,useCallback:uy,useContext:Fn,useEffect:Gf,useImperativeHandle:ly,useInsertionEffect:sy,useLayoutEffect:ay,useMemo:cy,useReducer:wh,useRef:iy,useState:function(){return wh(Ds)},useDebugValue:Zf,useDeferredValue:function(n,r){var o=an();return hy(o,bt.memoizedState,n,r)},useTransition:function(){var n=wh(Ds)[0],r=an().memoizedState;return[typeof n=="boolean"?n:Fu(n),r]},useSyncExternalStore:B_,useId:py};La.useCacheRefresh=gy,La.useMemoCache=Uf,La.useHostTransitionStatus=Qf,La.useFormState=ey,La.useActionState=ey,La.useOptimistic=function(n,r){var o=an();return K_(o,bt,n,r)};var Ko={readContext:Fn,use:Eh,useCallback:uy,useContext:Fn,useEffect:Gf,useImperativeHandle:ly,useInsertionEffect:sy,useLayoutEffect:ay,useMemo:cy,useReducer:Hf,useRef:iy,useState:function(){return Hf(Ds)},useDebugValue:Zf,useDeferredValue:function(n,r){var o=an();return bt===null?Kf(o,n,r):hy(o,bt.memoizedState,n,r)},useTransition:function(){var n=Hf(Ds)[0],r=an().memoizedState;return[typeof n=="boolean"?n:Fu(n),r]},useSyncExternalStore:B_,useId:py};Ko.useCacheRefresh=gy,Ko.useMemoCache=Uf,Ko.useHostTransitionStatus=Qf,Ko.useFormState=ny,Ko.useActionState=ny,Ko.useOptimistic=function(n,r){var o=an();return bt!==null?K_(o,bt,n,r):(o.baseState=n,[n,o.queue.dispatch])};function Yf(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:z({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Xf={isMounted:function(n){return(n=n._reactInternals)?fe(n)===n:!1},enqueueSetState:function(n,r,o){n=n._reactInternals;var c=zi(),p=ja(c);p.payload=r,o!=null&&(p.callback=o),r=za(n,p,c),r!==null&&(oi(r,n,c),$u(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=zi(),p=ja(c);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=za(n,p,c),r!==null&&(oi(r,n,c),$u(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=zi(),c=ja(o);c.tag=2,r!=null&&(c.callback=r),r=za(n,c,o),r!==null&&(oi(r,n,o),$u(r,n,o))}};function by(n,r,o,c,p,g,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,S):r.prototype&&r.prototype.isPureReactComponent?!ni(o,c)||!ni(p,g):!0}function Ey(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&Xf.enqueueReplaceState(r,r.state,null)}function $o(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=z({},o));for(var p in n)o[p]===void 0&&(o[p]=n[p])}return o}var Ah=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function wy(n){Ah(n)}function Ty(n){console.error(n)}function xy(n){Ah(n)}function Rh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Sy(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Jf(n,r,o){return o=ja(o),o.tag=3,o.payload={element:null},o.callback=function(){Rh(n,r)},o}function Ay(n){return n=ja(n),n.tag=3,n}function Ry(n,r,o,c){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=c.value;n.payload=function(){return p(g)},n.callback=function(){Sy(r,o,c)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Sy(r,o,c),typeof p!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function qx(n,r,o,c,p){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Ku(r,o,p,!0),o=tr.current,o!==null){switch(o.tag){case 13:return Yr===null?Dm():o.alternate===null&&Ft===0&&(Ft=3),o.flags&=-257,o.flags|=65536,o.lanes=p,c===Qr?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Mm(n,c,p)),!1;case 22:return o.flags|=65536,c===Qr?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Mm(n,c,p)),!1}throw Error(s(435,o.tag))}return Mm(n,c,p),Dm(),!1}if(R)return r=tr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=p,c!==ie&&(n=Error(s(422),{cause:c}),kt(ri(n,o)))):(c!==ie&&(r=Error(s(423),{cause:c}),kt(ri(r,o))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,c=ri(c,o),p=Jf(n.stateNode,c,p),mm(n,p),Ft!==4&&(Ft=2)),!1;var g=Error(s(520),{cause:c});if(g=ri(g,o),nc===null?nc=[g]:nc.push(g),Ft!==4&&(Ft=2),r===null)return!0;c=ri(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=p&-p,o.lanes|=n,n=Jf(o.stateNode,c,n),mm(o,n),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ga===null||!Ga.has(g))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Ay(p),Ry(p,n,o,c),mm(o,p),!1}o=o.return}while(o!==null);return!1}var Cy=Error(s(461)),wn=!1;function Nn(n,r,o,c){r.child=n===null?mh(r,null,o,c):Wr(r,n.child,o,c)}function Iy(n,r,o,c,p){o=o.render;var g=r.ref;if("ref"in c){var S={};for(var N in c)N!=="ref"&&(S[N]=c[N])}else S=c;return Wo(r),c=Mf(n,r,o,S,g,p),N=Vf(),n!==null&&!wn?(jf(n,r,p),Ls(n,r,p)):(R&&N&&u(r),r.flags|=1,Nn(n,r,c,p),r.child)}function Ny(n,r,o,c,p){if(n===null){var g=o.type;return typeof g=="function"&&!wm(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,Py(n,r,g,c,p)):(n=kh(o.type,null,c,r,r.mode,p),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!lm(n,p)){var S=g.memoizedProps;if(o=o.compare,o=o!==null?o:ni,o(S,c)&&n.ref===r.ref)return Ls(n,r,p)}return r.flags|=1,n=qa(g,c),n.ref=r.ref,n.return=r,r.child=n}function Py(n,r,o,c,p){if(n!==null){var g=n.memoizedProps;if(ni(g,c)&&n.ref===r.ref)if(wn=!1,r.pendingProps=c=g,lm(n,p))(n.flags&131072)!==0&&(wn=!0);else return r.lanes=n.lanes,Ls(n,r,p)}return em(n,r,o,c,p)}function ky(n,r,o){var c=r.pendingProps,p=c.children,g=(r.stateNode._pendingVisibility&2)!==0,S=n!==null?n.memoizedState:null;if(Zu(n,r),c.mode==="hidden"||g){if((r.flags&128)!==0){if(c=S!==null?S.baseLanes|o:o,n!==null){for(p=r.child=n.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;r.childLanes=g&~c}else r.childLanes=0,r.child=null;return Oy(n,r,c,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&_h(r,S!==null?S.cachePool:null),S!==null?D_(r,S):Nf(),L_(r);else return r.lanes=r.childLanes=536870912,Oy(n,r,S!==null?S.baseLanes|o:o,o)}else S!==null?(_h(r,S.cachePool),D_(r,S),Oa(),r.memoizedState=null):(n!==null&&_h(r,null),Nf(),Oa());return Nn(n,r,p,o),r.child}function Oy(n,r,o,c){var p=Df();return p=p===null?null:{parent:dn._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},n!==null&&_h(r,null),Nf(),L_(r),n!==null&&Ku(n,r,c,!0),null}function Zu(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(r.flags|=2097664)}}function em(n,r,o,c,p){return Wo(r),o=Mf(n,r,o,c,void 0,p),c=Vf(),n!==null&&!wn?(jf(n,r,p),Ls(n,r,p)):(R&&c&&u(r),r.flags|=1,Nn(n,r,o,p),r.child)}function Dy(n,r,o,c,p,g){return Wo(r),r.updateQueue=null,o=U_(r,c,o,p),z_(n),c=Vf(),n!==null&&!wn?(jf(n,r,g),Ls(n,r,g)):(R&&c&&u(r),r.flags|=1,Nn(n,r,o,g),r.child)}function Ly(n,r,o,c,p){if(Wo(r),r.stateNode===null){var g=Xi,S=o.contextType;typeof S=="object"&&S!==null&&(g=Fn(S)),g=new o(c,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Xf,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=c,g.state=r.memoizedState,g.refs={},dm(r),S=o.contextType,g.context=typeof S=="object"&&S!==null?Fn(S):Xi,g.state=r.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Yf(r,o,S,c),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Xf.enqueueReplaceState(g,g.state,null),Wu(r,c,g,p),Qu(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){g=r.stateNode;var N=r.memoizedProps,H=$o(o,N);g.props=H;var Q=g.context,oe=o.contextType;S=Xi,typeof oe=="object"&&oe!==null&&(S=Fn(oe));var pe=o.getDerivedStateFromProps;oe=typeof pe=="function"||typeof g.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N||Q!==S)&&Ey(r,g,c,S),Va=!1;var ne=r.memoizedState;g.state=ne,Wu(r,c,g,p),Qu(),Q=r.memoizedState,N||ne!==Q||Va?(typeof pe=="function"&&(Yf(r,o,pe,c),Q=r.memoizedState),(H=Va||by(r,o,H,c,ne,Q,S))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Q),g.props=c,g.state=Q,g.context=S,c=H):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{g=r.stateNode,fm(n,r),S=r.memoizedProps,oe=$o(o,S),g.props=oe,pe=r.pendingProps,ne=g.context,Q=o.contextType,H=Xi,typeof Q=="object"&&Q!==null&&(H=Fn(Q)),N=o.getDerivedStateFromProps,(Q=typeof N=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==pe||ne!==H)&&Ey(r,g,c,H),Va=!1,ne=r.memoizedState,g.state=ne,Wu(r,c,g,p),Qu();var ae=r.memoizedState;S!==pe||ne!==ae||Va||n!==null&&n.dependencies!==null&&Ch(n.dependencies)?(typeof N=="function"&&(Yf(r,o,N,c),ae=r.memoizedState),(oe=Va||by(r,o,oe,c,ne,ae,H)||n!==null&&n.dependencies!==null&&Ch(n.dependencies))?(Q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ae,H),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ae,H)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ae),g.props=c,g.state=ae,g.context=H,c=oe):(typeof g.componentDidUpdate!="function"||S===n.memoizedProps&&ne===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ne===n.memoizedState||(r.flags|=1024),c=!1)}return g=c,Zu(n,r),c=(r.flags&128)!==0,g||c?(g=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&c?(r.child=Wr(r,n.child,null,p),r.child=Wr(r,null,o,p)):Nn(n,r,o,p),r.memoizedState=g.state,n=r.child):n=Ls(n,r,p),n}function My(n,r,o,c){return Jt(),r.flags|=256,Nn(n,r,o,c),r.child}var tm={dehydrated:null,treeContext:null,retryLane:0};function nm(n){return{baseLanes:n,cachePool:j_()}}function im(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=sr),n}function Vy(n,r,o){var c=r.pendingProps,p=!1,g=(r.flags&128)!==0,S;if((S=g)||(S=n!==null&&n.memoizedState===null?!1:(hn.current&2)!==0),S&&(p=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,n===null){if(R){if(p?ka(r):Oa(),R){var N=T,H;if(H=N){e:{for(H=N,N=Y;H.nodeType!==8;){if(!N){N=null;break e}if(H=Rr(H.nextSibling),H===null){N=null;break e}}N=H}N!==null?(r.memoizedState={dehydrated:N,treeContext:Is!==null?{id:Ji,overflow:er}:null,retryLane:536870912},H=rr(18,null,null,0),H.stateNode=N,H.return=r,r.child=H,v=r,T=null,H=!0):H=!1}H||ce(r)}if(N=r.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return N.data==="$!"?r.lanes=16:r.lanes=536870912,null;Os(r)}return N=c.children,c=c.fallback,p?(Oa(),p=r.mode,N=sm({mode:"hidden",children:N},p),c=Xo(c,p,o,null),N.return=r,c.return=r,N.sibling=c,r.child=N,p=r.child,p.memoizedState=nm(o),p.childLanes=im(n,S,o),r.memoizedState=tm,c):(ka(r),rm(r,N))}if(H=n.memoizedState,H!==null&&(N=H.dehydrated,N!==null)){if(g)r.flags&256?(ka(r),r.flags&=-257,r=am(n,r,o)):r.memoizedState!==null?(Oa(),r.child=n.child,r.flags|=128,r=null):(Oa(),p=c.fallback,N=r.mode,c=sm({mode:"visible",children:c.children},N),p=Xo(p,N,o,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,Wr(r,n.child,null,o),c=r.child,c.memoizedState=nm(o),c.childLanes=im(n,S,o),r.memoizedState=tm,r=p);else if(ka(r),N.data==="$!"){if(S=N.nextSibling&&N.nextSibling.dataset,S)var Q=S.dgst;S=Q,c=Error(s(419)),c.stack="",c.digest=S,kt({value:c,source:null,stack:null}),r=am(n,r,o)}else if(wn||Ku(n,r,o,!1),S=(o&n.childLanes)!==0,wn||S){if(S=Rt,S!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(S.suspendedLanes|o))!==0?0:c,c!==0&&c!==H.retryLane)throw H.retryLane=c,yi(n,c),oi(S,n,c),Cy}N.data==="$?"||Dm(),r=am(n,r,o)}else N.data==="$?"?(r.flags|=128,r.child=n.child,r=r1.bind(null,n),N._reactRetry=r,r=null):(n=H.treeContext,T=Rr(N.nextSibling),v=r,R=!0,q=null,Y=!1,n!==null&&(si[ai++]=Ji,si[ai++]=er,si[ai++]=Is,Ji=n.id,er=n.overflow,Is=r),r=rm(r,c.children),r.flags|=4096);return r}return p?(Oa(),p=c.fallback,N=r.mode,H=n.child,Q=H.sibling,c=qa(H,{mode:"hidden",children:c.children}),c.subtreeFlags=H.subtreeFlags&31457280,Q!==null?p=qa(Q,p):(p=Xo(p,N,o,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,N=n.child.memoizedState,N===null?N=nm(o):(H=N.cachePool,H!==null?(Q=dn._currentValue,H=H.parent!==Q?{parent:Q,pool:Q}:H):H=j_(),N={baseLanes:N.baseLanes|o,cachePool:H}),p.memoizedState=N,p.childLanes=im(n,S,o),r.memoizedState=tm,c):(ka(r),o=n.child,n=o.sibling,o=qa(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(S=r.deletions,S===null?(r.deletions=[n],r.flags|=16):S.push(n)),r.child=o,r.memoizedState=null,o)}function rm(n,r){return r=sm({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function sm(n,r){return uv(n,r,0,null)}function am(n,r,o){return Wr(r,n.child,null,o),n=rm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function jy(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),cm(n.return,r,o)}function om(n,r,o,c,p){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:p}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=p)}function zy(n,r,o){var c=r.pendingProps,p=c.revealOrder,g=c.tail;if(Nn(n,r,c.children,o),c=hn.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jy(n,o,r);else if(n.tag===19)jy(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(ct(hn,c),p){case"forwards":for(o=r.child,p=null;o!==null;)n=o.alternate,n!==null&&gh(n)===null&&(p=o),o=o.sibling;o=p,o===null?(p=r.child,r.child=null):(p=o.sibling,o.sibling=null),om(r,!1,p,o,g);break;case"backwards":for(o=null,p=r.child,r.child=null;p!==null;){if(n=p.alternate,n!==null&&gh(n)===null){r.child=p;break}n=p.sibling,p.sibling=o,o=p,p=n}om(r,!0,o,null,g);break;case"together":om(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ls(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Fa|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(Ku(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,o=qa(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=qa(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function lm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Ch(n)))}function Fx(n,r,o){switch(r.tag){case 3:ur(r,r.stateNode.containerInfo),Ma(r,dn,n.memoizedState.cache),Jt();break;case 27:case 5:fs(r);break;case 4:ur(r,r.stateNode.containerInfo);break;case 10:Ma(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ka(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Vy(n,r,o):(ka(r),n=Ls(n,r,o),n!==null?n.sibling:null);ka(r);break;case 19:var p=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Ku(n,r,o,!1),c=(o&r.childLanes)!==0),p){if(c)return zy(n,r,o);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ct(hn,hn.current),c)break;return null;case 22:case 23:return r.lanes=0,ky(n,r,o);case 24:Ma(r,dn,n.memoizedState.cache)}return Ls(n,r,o)}function Uy(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)wn=!0;else{if(!lm(n,o)&&(r.flags&128)===0)return wn=!1,Fx(n,r,o);wn=(n.flags&131072)!==0}else wn=!1,R&&(r.flags&1048576)!==0&&a(r,Ho,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var c=r.elementType,p=c._init;if(c=p(c._payload),r.type=c,typeof c=="function")wm(c)?(n=$o(c,n),r.tag=1,r=Ly(null,r,c,n,o)):(r.tag=0,r=em(null,r,c,n,o));else{if(c!=null){if(p=c.$$typeof,p===G){r.tag=11,r=Iy(null,r,c,n,o);break e}else if(p===te){r.tag=14,r=Ny(null,r,c,n,o);break e}}throw r=P(c)||c,Error(s(306,r,""))}}return r;case 0:return em(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,p=$o(c,r.pendingProps),Ly(n,r,c,p,o);case 3:e:{if(ur(r,r.stateNode.containerInfo),n===null)throw Error(s(387));var g=r.pendingProps;p=r.memoizedState,c=p.element,fm(n,r),Wu(r,g,null,o);var S=r.memoizedState;if(g=S.cache,Ma(r,dn,g),g!==p.cache&&hm(r,[dn],o,!0),Qu(),g=S.element,p.isDehydrated)if(p={element:g,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=My(n,r,g,o);break e}else if(g!==c){c=ri(Error(s(424)),r),kt(c),r=My(n,r,g,o);break e}else for(T=Rr(r.stateNode.containerInfo.firstChild),v=r,R=!0,q=null,Y=!0,o=mh(r,null,g,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Jt(),g===c){r=Ls(n,r,o);break e}Nn(n,r,g,o)}r=r.child}return r;case 26:return Zu(n,r),n===null?(o=qv(r.type,null,r.pendingProps,null))?r.memoizedState=o:R||(o=r.type,n=r.pendingProps,c=Fh(Mn.current).createElement(o),c[Yt]=r,c[Ut]=n,Pn(c,o,n),Pt(c),r.stateNode=c):r.memoizedState=qv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return fs(r),n===null&&R&&(c=r.stateNode=Uv(r.type,r.pendingProps,Mn.current),v=r,Y=!0,T=Rr(c.firstChild)),c=r.pendingProps.children,n!==null||R?Nn(n,r,c,o):r.child=Wr(r,null,c,o),Zu(n,r),r.child;case 5:return n===null&&R&&((p=c=T)&&(c=b1(c,r.type,r.pendingProps,Y),c!==null?(r.stateNode=c,v=r,T=Rr(c.firstChild),Y=!1,p=!0):p=!1),p||ce(r)),fs(r),p=r.type,g=r.pendingProps,S=n!==null?n.memoizedProps:null,c=g.children,$m(p,g)?c=null:S!==null&&$m(p,S)&&(r.flags|=32),r.memoizedState!==null&&(p=Mf(n,r,Vx,null,null,o),hc._currentValue=p),Zu(n,r),Nn(n,r,c,o),r.child;case 6:return n===null&&R&&((n=o=T)&&(o=E1(o,r.pendingProps,Y),o!==null?(r.stateNode=o,v=r,T=null,n=!0):n=!1),n||ce(r)),null;case 13:return Vy(n,r,o);case 4:return ur(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Wr(r,null,c,o):Nn(n,r,c,o),r.child;case 11:return Iy(n,r,r.type,r.pendingProps,o);case 7:return Nn(n,r,r.pendingProps,o),r.child;case 8:return Nn(n,r,r.pendingProps.children,o),r.child;case 12:return Nn(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Ma(r,r.type,c.value),Nn(n,r,c.children,o),r.child;case 9:return p=r.type._context,c=r.pendingProps.children,Wo(r),p=Fn(p),c=c(p),r.flags|=1,Nn(n,r,c,o),r.child;case 14:return Ny(n,r,r.type,r.pendingProps,o);case 15:return Py(n,r,r.type,r.pendingProps,o);case 19:return zy(n,r,o);case 22:return ky(n,r,o);case 24:return Wo(r),c=Fn(dn),n===null?(p=Df(),p===null&&(p=Rt,g=kf(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=o),p=g),r.memoizedState={parent:c,cache:p},dm(r),Ma(r,dn,p)):((n.lanes&o)!==0&&(fm(n,r),Wu(r,null,null,o),Qu()),p=n.memoizedState,g=r.memoizedState,p.parent!==c?(p={parent:c,cache:c},r.memoizedState=p,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=p),Ma(r,dn,c)):(c=g.cache,Ma(r,dn,c),c!==p.cache&&hm(r,[dn],o,!0))),Nn(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}var um=Ke(null),Qo=null,Ms=null;function Ma(n,r,o){ct(um,r._currentValue),r._currentValue=o}function Vs(n){n._currentValue=um.current,Nt(um)}function cm(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function hm(n,r,o,c){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var N=g;g=p;for(var H=0;H<r.length;H++)if(N.context===r[H]){g.lanes|=o,N=g.alternate,N!==null&&(N.lanes|=o),cm(g.return,o,n),c||(S=null);break e}g=N.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(s(341));S.lanes|=o,g=S.alternate,g!==null&&(g.lanes|=o),cm(S,o,n),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===n){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ku(n,r,o,c){n=null;for(var p=r,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var N=p.type;ti(p.pendingProps.value,S.value)||(n!==null?n.push(N):n=[N])}}else if(p===kr.current){if(S=p.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(hc):n=[hc])}p=p.return}n!==null&&hm(r,n,o,c),r.flags|=262144}function Ch(n){for(n=n.firstContext;n!==null;){if(!ti(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Wo(n){Qo=n,Ms=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Fn(n){return By(Qo,n)}function Ih(n,r){return Qo===null&&Wo(n),By(n,r)}function By(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ms===null){if(n===null)throw Error(s(308));Ms=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ms=Ms.next=r;return o}var Va=!1;function dm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ja(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function za(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(jt&2)!==0){var p=c.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),c.pending=r,r=Rs(n),uh(n,null,o),r}return Uo(n,c,r,o),Rs(n)}function $u(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194176)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,zr(n,o)}}function mm(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,o=o.next}while(o!==null);g===null?p=g=r:g=g.next=r}else p=g=r;o={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var pm=!1;function Qu(){if(pm){var n=zl;if(n!==null)throw n}}function Wu(n,r,o,c){pm=!1;var p=n.updateQueue;Va=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var H=N,Q=H.next;H.next=null,S===null?g=Q:S.next=Q,S=H;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==S&&(N===null?oe.firstBaseUpdate=Q:N.next=Q,oe.lastBaseUpdate=H))}if(g!==null){var pe=p.baseState;S=0,oe=Q=H=null,N=g;do{var ne=N.lane&-536870913,ae=ne!==N.lane;if(ae?(lt&ne)===ne:(c&ne)===ne){ne!==0&&ne===jl&&(pm=!0),oe!==null&&(oe=oe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ne=n,Ge=N;ne=r;var Gt=o;switch(Ge.tag){case 1:if(Ne=Ge.payload,typeof Ne=="function"){pe=Ne.call(Gt,pe,ne);break e}pe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ge.payload,ne=typeof Ne=="function"?Ne.call(Gt,pe,ne):Ne,ne==null)break e;pe=z({},pe,ne);break e;case 2:Va=!0}}ne=N.callback,ne!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=p.callbacks,ae===null?p.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(Q=oe=ae,H=pe):oe=oe.next=ae,S|=ne;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,p.lastBaseUpdate=ae,p.shared.pending=null}}while(!0);oe===null&&(H=pe),p.baseState=H,p.firstBaseUpdate=Q,p.lastBaseUpdate=oe,g===null&&(p.shared.lanes=0),Fa|=S,n.lanes=S,n.memoizedState=pe}}function Hy(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function qy(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Hy(o[n],r)}function Yu(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var p=c.next;o=p;do{if((o.tag&n)===n){c=void 0;var g=o.create,S=o.inst;c=g(),S.destroy=c}o=o.next}while(o!==p)}}catch(N){xt(r,r.return,N)}}function Ua(n,r,o){try{var c=r.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var g=p.next;c=g;do{if((c.tag&n)===n){var S=c.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,p=r;var H=o;try{N()}catch(Q){xt(p,H,Q)}}}c=c.next}while(c!==g)}}catch(Q){xt(r,r.return,Q)}}function Fy(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{qy(r,o)}catch(c){xt(n,n.return,c)}}}function Gy(n,r,o){o.props=$o(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){xt(n,r,c)}}function Yo(n,r){try{var o=n.ref;if(o!==null){var c=n.stateNode;switch(n.tag){case 26:case 27:case 5:var p=c;break;default:p=c}typeof o=="function"?n.refCleanup=o(p):o.current=p}}catch(g){xt(n,r,g)}}function Mi(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(p){xt(n,r,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){xt(n,r,p)}else o.current=null}function Zy(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(p){xt(n,n.return,p)}}function Ky(n,r,o){try{var c=n.stateNode;p1(c,n.type,o,r),c[Ut]=r}catch(p){xt(n,n.return,p)}}function $y(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function gm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$y(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _m(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(n,r):o.insertBefore(n,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(n,o)):(r=o,r.appendChild(n)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=qh));else if(c!==4&&c!==27&&(n=n.child,n!==null))for(_m(n,r,o),n=n.sibling;n!==null;)_m(n,r,o),n=n.sibling}function Nh(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&c!==27&&(n=n.child,n!==null))for(Nh(n,r,o),n=n.sibling;n!==null;)Nh(n,r,o),n=n.sibling}var js=!1,qt=!1,ym=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,Tn=null,Wy=!1;function Gx(n,r){if(n=n.containerInfo,Zm=Wh,n=Lo(n),Mo(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var S=0,N=-1,H=-1,Q=0,oe=0,pe=n,ne=null;t:for(;;){for(var ae;pe!==o||p!==0&&pe.nodeType!==3||(N=S+p),pe!==g||c!==0&&pe.nodeType!==3||(H=S+c),pe.nodeType===3&&(S+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)ne=pe,pe=ae;for(;;){if(pe===n)break t;if(ne===o&&++Q===p&&(N=S),ne===g&&++oe===c&&(H=S),(ae=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=ae}o=N===-1||H===-1?null:{start:N,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(Km={focusedElem:n,selectionRange:o},Wh=!1,Tn=r;Tn!==null;)if(r=Tn,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Tn=n;else for(;Tn!==null;){switch(r=Tn,g=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=r,p=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Ne=$o(o.type,p,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(Ne,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ge){xt(o,o.return,Ge)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)Ym(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ym(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,Tn=n;break}Tn=r.return}return Ne=Wy,Wy=!1,Ne}function Yy(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Us(n,o),c&4&&Yu(5,o);break;case 1:if(Us(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(N){xt(o,o.return,N)}else{var p=$o(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(p,r,n.__reactInternalSnapshotBeforeUpdate)}catch(N){xt(o,o.return,N)}}c&64&&Fy(o),c&512&&Yo(o,o.return);break;case 3:if(Us(n,o),c&64&&(c=o.updateQueue,c!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{qy(c,n)}catch(N){xt(o,o.return,N)}}break;case 26:Us(n,o),c&512&&Yo(o,o.return);break;case 27:case 5:Us(n,o),r===null&&c&4&&Zy(o),c&512&&Yo(o,o.return);break;case 12:Us(n,o);break;case 13:Us(n,o),c&4&&ev(n,o);break;case 22:if(p=o.memoizedState!==null||js,!p){r=r!==null&&r.memoizedState!==null||qt;var g=js,S=qt;js=p,(qt=r)&&!S?Ba(n,o,(o.subtreeFlags&8772)!==0):Us(n,o),js=g,qt=S}c&512&&(o.memoizedProps.mode==="manual"?Yo(o,o.return):Mi(o,o.return));break;default:Us(n,o)}}function Xy(n){var r=n.alternate;r!==null&&(n.alternate=null,Xy(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ps(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var on=null,Vi=!1;function zs(n,r,o){for(o=o.child;o!==null;)Jy(n,r,o),o=o.sibling}function Jy(n,r,o){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(hr,o)}catch{}switch(o.tag){case 26:qt||Mi(o,r),zs(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:qt||Mi(o,r);var c=on,p=Vi;for(on=o.stateNode,zs(n,r,o),o=o.stateNode,r=o.attributes;r.length;)o.removeAttributeNode(r[0]);ps(o),on=c,Vi=p;break;case 5:qt||Mi(o,r);case 6:p=on;var g=Vi;if(on=null,zs(n,r,o),on=p,Vi=g,on!==null)if(Vi)try{n=on,c=o.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)}catch(S){xt(o,r,S)}else try{on.removeChild(o.stateNode)}catch(S){xt(o,r,S)}break;case 18:on!==null&&(Vi?(r=on,o=o.stateNode,r.nodeType===8?Wm(r.parentNode,o):r.nodeType===1&&Wm(r,o),pc(r)):Wm(on,o.stateNode));break;case 4:c=on,p=Vi,on=o.stateNode.containerInfo,Vi=!0,zs(n,r,o),on=c,Vi=p;break;case 0:case 11:case 14:case 15:qt||Ua(2,o,r),qt||Ua(4,o,r),zs(n,r,o);break;case 1:qt||(Mi(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Gy(o,r,c)),zs(n,r,o);break;case 21:zs(n,r,o);break;case 22:qt||Mi(o,r),qt=(c=qt)||o.memoizedState!==null,zs(n,r,o),qt=c;break;default:zs(n,r,o)}}function ev(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{pc(n)}catch(o){xt(r,r.return,o)}}function Zx(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Qy),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Qy),r;default:throw Error(s(435,n.tag))}}function vm(n,r){var o=Zx(n);r.forEach(function(c){var p=s1.bind(null,n,c);o.has(c)||(o.add(c),c.then(p,p))})}function nr(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var p=o[c],g=n,S=r,N=S;e:for(;N!==null;){switch(N.tag){case 27:case 5:on=N.stateNode,Vi=!1;break e;case 3:on=N.stateNode.containerInfo,Vi=!0;break e;case 4:on=N.stateNode.containerInfo,Vi=!0;break e}N=N.return}if(on===null)throw Error(s(160));Jy(g,S,p),on=null,Vi=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)tv(r,n),r=r.sibling}var Ar=null;function tv(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:nr(r,n),ir(n),c&4&&(Ua(3,n,n.return),Yu(3,n),Ua(5,n,n.return));break;case 1:nr(r,n),ir(n),c&512&&(qt||o===null||Mi(o,o.return)),c&64&&js&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var p=Ar;if(nr(r,n),ir(n),c&512&&(qt||o===null||Mi(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Br]||g[Yt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(c),p.head.insertBefore(g,p.querySelector("head > title"))),Pn(g,c,o),g[Yt]=n,Pt(g),c=g;break e;case"link":var S=Zv("link","href",p).get(c+(o.href||""));if(S){for(var N=0;N<S.length;N++)if(g=S[N],g.getAttribute("href")===(o.href==null?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(N,1);break t}}g=p.createElement(c),Pn(g,c,o),p.head.appendChild(g);break;case"meta":if(S=Zv("meta","content",p).get(c+(o.content||""))){for(N=0;N<S.length;N++)if(g=S[N],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(N,1);break t}}g=p.createElement(c),Pn(g,c,o),p.head.appendChild(g);break;default:throw Error(s(468,c))}g[Yt]=n,Pt(g),c=g}n.stateNode=c}else Kv(p,n.type,n.stateNode);else n.stateNode=Gv(p,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?Kv(p,n.type,n.stateNode):Gv(p,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Ky(n,n.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&n.alternate===null){p=n.stateNode,g=n.memoizedProps;try{for(var H=p.firstChild;H;){var Q=H.nextSibling,oe=H.nodeName;H[Br]||oe==="HEAD"||oe==="BODY"||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&H.rel.toLowerCase()==="stylesheet"||p.removeChild(H),H=Q}for(var pe=n.type,ne=p.attributes;ne.length;)p.removeAttributeNode(ne[0]);Pn(p,pe,g),p[Yt]=n,p[Ut]=g}catch(Ne){xt(n,n.return,Ne)}}case 5:if(nr(r,n),ir(n),c&512&&(qt||o===null||Mi(o,o.return)),n.flags&32){p=n.stateNode;try{_n(p,"")}catch(Ne){xt(n,n.return,Ne)}}c&4&&n.stateNode!=null&&(p=n.memoizedProps,Ky(n,p,o!==null?o.memoizedProps:p)),c&1024&&(ym=!0);break;case 6:if(nr(r,n),ir(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ne){xt(n,n.return,Ne)}}break;case 3:if(Kh=null,p=Ar,Ar=Gh(r.containerInfo),nr(r,n),Ar=p,ir(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{pc(r.containerInfo)}catch(Ne){xt(n,n.return,Ne)}ym&&(ym=!1,nv(n));break;case 4:c=Ar,Ar=Gh(n.stateNode.containerInfo),nr(r,n),ir(n),Ar=c;break;case 12:nr(r,n),ir(n);break;case 13:nr(r,n),ir(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Cm=Vn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,vm(n,c)));break;case 22:if(c&512&&(qt||o===null||Mi(o,o.return)),H=n.memoizedState!==null,Q=o!==null&&o.memoizedState!==null,oe=js,pe=qt,js=oe||H,qt=pe||Q,nr(r,n),qt=pe,js=oe,ir(n),r=n.stateNode,r._current=n,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,c&8192&&(r._visibility=H?r._visibility&-2:r._visibility|1,H&&(r=js||qt,o===null||Q||r||ql(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(o=null,r=n;;){if(r.tag===5||r.tag===26||r.tag===27){if(o===null){Q=o=r;try{if(p=Q.stateNode,H)g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{S=Q.stateNode,N=Q.memoizedProps.style;var ae=N!=null&&N.hasOwnProperty("display")?N.display:null;S.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ne){xt(Q,Q.return,Ne)}}}else if(r.tag===6){if(o===null){Q=r;try{Q.stateNode.nodeValue=H?"":Q.memoizedProps}catch(Ne){xt(Q,Q.return,Ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,vm(n,o))));break;case 19:nr(r,n),ir(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,vm(n,c)));break;case 21:break;default:nr(r,n),ir(n)}}function ir(n){var r=n.flags;if(r&2){try{if(n.tag!==27){e:{for(var o=n.return;o!==null;){if($y(o)){var c=o;break e}o=o.return}throw Error(s(160))}switch(c.tag){case 27:var p=c.stateNode,g=gm(n);Nh(n,g,p);break;case 5:var S=c.stateNode;c.flags&32&&(_n(S,""),c.flags&=-33);var N=gm(n);Nh(n,N,S);break;case 3:case 4:var H=c.stateNode.containerInfo,Q=gm(n);_m(n,Q,H);break;default:throw Error(s(161))}}}catch(oe){xt(n,n.return,oe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function nv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;nv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Us(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Yy(n,r.alternate,r),r=r.sibling}function ql(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Ua(4,r,r.return),ql(r);break;case 1:Mi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Gy(r,r.return,o),ql(r);break;case 26:case 27:case 5:Mi(r,r.return),ql(r);break;case 22:Mi(r,r.return),r.memoizedState===null&&ql(r);break;default:ql(r)}n=n.sibling}}function Ba(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,p=n,g=r,S=g.flags;switch(g.tag){case 0:case 11:case 15:Ba(p,g,o),Yu(4,g);break;case 1:if(Ba(p,g,o),c=g,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Q){xt(c,c.return,Q)}if(c=g,p=c.updateQueue,p!==null){var N=c.stateNode;try{var H=p.shared.hiddenCallbacks;if(H!==null)for(p.shared.hiddenCallbacks=null,p=0;p<H.length;p++)Hy(H[p],N)}catch(Q){xt(c,c.return,Q)}}o&&S&64&&Fy(g),Yo(g,g.return);break;case 26:case 27:case 5:Ba(p,g,o),o&&c===null&&S&4&&Zy(g),Yo(g,g.return);break;case 12:Ba(p,g,o);break;case 13:Ba(p,g,o),o&&S&4&&ev(p,g);break;case 22:g.memoizedState===null&&Ba(p,g,o),Yo(g,g.return);break;default:Ba(p,g,o)}r=r.sibling}}function bm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Bu(o))}function Em(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Bu(n))}function Ha(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iv(n,r,o,c),r=r.sibling}function iv(n,r,o,c){var p=r.flags;switch(r.tag){case 0:case 11:case 15:Ha(n,r,o,c),p&2048&&Yu(9,r);break;case 3:Ha(n,r,o,c),p&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Bu(n)));break;case 12:if(p&2048){Ha(n,r,o,c),n=r.stateNode;try{var g=r.memoizedProps,S=g.id,N=g.onPostCommit;typeof N=="function"&&N(S,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(H){xt(r,r.return,H)}}else Ha(n,r,o,c);break;case 23:break;case 22:g=r.stateNode,r.memoizedState!==null?g._visibility&4?Ha(n,r,o,c):Xu(n,r):g._visibility&4?Ha(n,r,o,c):(g._visibility|=4,Fl(n,r,o,c,(r.subtreeFlags&10256)!==0)),p&2048&&bm(r.alternate,r);break;case 24:Ha(n,r,o,c),p&2048&&Em(r.alternate,r);break;default:Ha(n,r,o,c)}}function Fl(n,r,o,c,p){for(p=p&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=n,S=r,N=o,H=c,Q=S.flags;switch(S.tag){case 0:case 11:case 15:Fl(g,S,N,H,p),Yu(8,S);break;case 23:break;case 22:var oe=S.stateNode;S.memoizedState!==null?oe._visibility&4?Fl(g,S,N,H,p):Xu(g,S):(oe._visibility|=4,Fl(g,S,N,H,p)),p&&Q&2048&&bm(S.alternate,S);break;case 24:Fl(g,S,N,H,p),p&&Q&2048&&Em(S.alternate,S);break;default:Fl(g,S,N,H,p)}r=r.sibling}}function Xu(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,p=c.flags;switch(c.tag){case 22:Xu(o,c),p&2048&&bm(c.alternate,c);break;case 24:Xu(o,c),p&2048&&Em(c.alternate,c);break;default:Xu(o,c)}r=r.sibling}}var Ju=8192;function Gl(n){if(n.subtreeFlags&Ju)for(n=n.child;n!==null;)rv(n),n=n.sibling}function rv(n){switch(n.tag){case 26:Gl(n),n.flags&Ju&&n.memoizedState!==null&&D1(Ar,n.memoizedState,n.memoizedProps);break;case 5:Gl(n);break;case 3:case 4:var r=Ar;Ar=Gh(n.stateNode.containerInfo),Gl(n),Ar=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Ju,Ju=16777216,Gl(n),Ju=r):Gl(n));break;default:Gl(n)}}function sv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function ec(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Tn=c,ov(c,n)}sv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)av(n),n=n.sibling}function av(n){switch(n.tag){case 0:case 11:case 15:ec(n),n.flags&2048&&Ua(9,n,n.return);break;case 3:ec(n);break;case 12:ec(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&4&&(n.return===null||n.return.tag!==13)?(r._visibility&=-5,Ph(n)):ec(n);break;default:ec(n)}}function Ph(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Tn=c,ov(c,n)}sv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Ua(8,r,r.return),Ph(r);break;case 22:o=r.stateNode,o._visibility&4&&(o._visibility&=-5,Ph(r));break;default:Ph(r)}n=n.sibling}}function ov(n,r){for(;Tn!==null;){var o=Tn;switch(o.tag){case 0:case 11:case 15:Ua(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Bu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Tn=c;else e:for(o=n;Tn!==null;){c=Tn;var p=c.sibling,g=c.return;if(Xy(c),c===o){Tn=null;break e}if(p!==null){p.return=g,Tn=p;break e}Tn=g}}}function Kx(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(n,r,o,c){return new Kx(n,r,o,c)}function wm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qa(n,r){var o=n.alternate;return o===null?(o=rr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&31457280,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function lv(n,r){n.flags&=31457282;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function kh(n,r,o,c,p,g){var S=0;if(c=n,typeof n=="function")wm(n)&&(S=1);else if(typeof n=="string")S=k1(n,o,un.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case y:return Xo(o.children,p,g,r);case b:S=8,p|=24;break;case A:return n=rr(12,o,r,p|2),n.elementType=A,n.lanes=g,n;case W:return n=rr(13,o,r,p),n.elementType=W,n.lanes=g,n;case K:return n=rr(19,o,r,p),n.elementType=K,n.lanes=g,n;case Z:return uv(o,p,g,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:case D:S=10;break e;case k:S=9;break e;case G:S=11;break e;case te:S=14;break e;case se:S=16,c=null;break e}S=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return r=rr(S,o,r,p),r.elementType=n,r.type=c,r.lanes=g,r}function Xo(n,r,o,c){return n=rr(7,n,c,r),n.lanes=o,n}function uv(n,r,o,c){n=rr(22,n,c,r),n.elementType=Z,n.lanes=o;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=p._current;if(g===null)throw Error(s(456));if((p._pendingVisibility&2)===0){var S=yi(g,2);S!==null&&(p._pendingVisibility|=2,oi(S,g,2))}},attach:function(){var g=p._current;if(g===null)throw Error(s(456));if((p._pendingVisibility&2)!==0){var S=yi(g,2);S!==null&&(p._pendingVisibility&=-3,oi(S,g,2))}}};return n.stateNode=p,n}function Tm(n,r,o){return n=rr(6,n,null,r),n.lanes=o,n}function xm(n,r,o){return r=rr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Bs(n){n.flags|=4}function cv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$v(r)){if(r=tr.current,r!==null&&((lt&4194176)===lt?Yr!==null:(lt&62914560)!==lt&&(lt&536870912)===0||r!==Yr))throw Pa=Qr,In;n.flags|=8192}}function Oh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Mr():536870912,n.lanes|=r,Kl|=r)}function tc(n,r){if(!R)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Vt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var p=n.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags&31457280,c|=p.flags&31457280,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function $x(n,r,o){var c=r.pendingProps;switch(m(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(r),null;case 1:return Vt(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Vs(dn),qi(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Fe(r)?Bs(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,q!==null&&(km(q),q=null))),Vt(r),null;case 26:return o=r.memoizedState,n===null?(Bs(r),o!==null?(Vt(r),cv(r,o)):(Vt(r),r.flags&=-16777217)):o?o!==n.memoizedState?(Bs(r),Vt(r),cv(r,o)):(Vt(r),r.flags&=-16777217):(n.memoizedProps!==c&&Bs(r),Vt(r),r.flags&=-16777217),null;case 27:cr(r),o=Mn.current;var p=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Bs(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Vt(r),null}n=un.current,Fe(r)?xe(r):(n=Uv(p,c,o),r.stateNode=n,Bs(r))}return Vt(r),null;case 5:if(cr(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Bs(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Vt(r),null}if(n=un.current,Fe(r))xe(r);else{switch(p=Fh(Mn.current),n){case 1:n=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=p.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?p.createElement(o,{is:c.is}):p.createElement(o)}}n[Yt]=r,n[Ut]=c;e:for(p=r.child;p!==null;){if(p.tag===5||p.tag===6)n.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===r)break e;for(;p.sibling===null;){if(p.return===null||p.return===r)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}r.stateNode=n;e:switch(Pn(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Bs(r)}}return Vt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&Bs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(n=Mn.current,Fe(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,p=v,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}n[Yt]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Dv(n.nodeValue,o)),n||ce(r)}else n=Fh(n).createTextNode(c),n[Yt]=r,r.stateNode=n}return Vt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=Fe(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(s(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Yt]=r}else Jt(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vt(r),p=!1}else q!==null&&(km(q),q=null),p=!0;if(!p)return r.flags&256?(Os(r),r):(Os(r),null)}if(Os(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=r.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==p&&(c.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),Oh(r,r.updateQueue),Vt(r),null;case 4:return qi(),n===null&&qm(r.stateNode.containerInfo),Vt(r),null;case 10:return Vs(r.type),Vt(r),null;case 19:if(Nt(hn),p=r.memoizedState,p===null)return Vt(r),null;if(c=(r.flags&128)!==0,g=p.rendering,g===null)if(c)tc(p,!1);else{if(Ft!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=gh(n),g!==null){for(r.flags|=128,tc(p,!1),n=g.updateQueue,r.updateQueue=n,Oh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)lv(o,n),o=o.sibling;return ct(hn,hn.current&1|2),r.child}n=n.sibling}p.tail!==null&&Vn()>Dh&&(r.flags|=128,c=!0,tc(p,!1),r.lanes=4194304)}else{if(!c)if(n=gh(g),n!==null){if(r.flags|=128,c=!0,n=n.updateQueue,r.updateQueue=n,Oh(r,n),tc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!R)return Vt(r),null}else 2*Vn()-p.renderingStartTime>Dh&&o!==536870912&&(r.flags|=128,c=!0,tc(p,!1),r.lanes=4194304);p.isBackwards?(g.sibling=r.child,r.child=g):(n=p.last,n!==null?n.sibling=g:r.child=g,p.last=g)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Vn(),r.sibling=null,n=hn.current,ct(hn,c?n&1|2:n&1),r):(Vt(r),null);case 22:case 23:return Os(r),Pf(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Vt(r),r.subtreeFlags&6&&(r.flags|=8192)):Vt(r),o=r.updateQueue,o!==null&&Oh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&Nt(Fo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Vs(dn),Vt(r),null;case 25:return null}throw Error(s(156,r.tag))}function Qx(n,r){switch(m(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Vs(dn),qi(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return cr(r),null;case 13:if(Os(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Jt()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Nt(hn),null;case 4:return qi(),null;case 10:return Vs(r.type),null;case 22:case 23:return Os(r),Pf(),n!==null&&Nt(Fo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Vs(dn),null;case 25:return null;default:return null}}function hv(n,r){switch(m(r),r.tag){case 3:Vs(dn),qi();break;case 26:case 27:case 5:cr(r);break;case 4:qi();break;case 13:Os(r);break;case 19:Nt(hn);break;case 10:Vs(r.type);break;case 22:case 23:Os(r),Pf(),n!==null&&Nt(Fo);break;case 24:Vs(dn)}}var Wx={getCacheForType:function(n){var r=Fn(dn),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},Yx=typeof WeakMap=="function"?WeakMap:Map,jt=0,Rt=null,et=null,lt=0,Ct=0,ji=null,Hs=!1,Zl=!1,Sm=!1,qs=0,Ft=0,Fa=0,Jo=0,Am=0,sr=0,Kl=0,nc=null,Jr=null,Rm=!1,Cm=0,Dh=1/0,Lh=null,Ga=null,Mh=!1,el=null,ic=0,Im=0,Nm=null,rc=0,Pm=null;function zi(){if((jt&2)!==0&&lt!==0)return lt&-lt;if(I.T!==null){var n=jl;return n!==0?n:zm()}return Ie()}function dv(){sr===0&&(sr=(lt&536870912)===0||R?To():536870912);var n=tr.current;return n!==null&&(n.flags|=32),sr}function oi(n,r,o){(n===Rt&&Ct===2||n.cancelPendingCommit!==null)&&($l(n,0),Fs(n,lt,sr,!1)),Mt(n,o),((jt&2)===0||n!==Rt)&&(n===Rt&&((jt&2)===0&&(Jo|=o),Ft===4&&Fs(n,lt,sr,!1)),es(n))}function fv(n,r,o){if((jt&6)!==0)throw Error(s(327));var c=!o&&(r&60)===0&&(r&n.expiredLanes)===0||Lr(n,r),p=c?e1(n,r):Lm(n,r,!0),g=c;do{if(p===0){Zl&&!c&&Fs(n,r,0,!1);break}else if(p===6)Fs(n,r,0,!Hs);else{if(o=n.current.alternate,g&&!Xx(o)){p=Lm(n,r,!1),g=!1;continue}if(p===2){if(g=r,n.errorRecoveryDisabledLanes&g)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var N=n;p=nc;var H=N.current.memoizedState.isDehydrated;if(H&&($l(N,S).flags|=256),S=Lm(N,S,!1),S!==2){if(Sm&&!H){N.errorRecoveryDisabledLanes|=g,Jo|=g,p=4;break e}g=Jr,Jr=p,g!==null&&km(g)}p=S}if(g=!1,p!==2)continue}}if(p===1){$l(n,0),Fs(n,r,0,!0);break}e:{switch(c=n,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194176)===r){Fs(c,r,sr,!Hs);break e}break;case 2:Jr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(c.finishedWork=o,c.finishedLanes=r,(r&62914560)===r&&(g=Cm+300-Vn(),10<g)){if(Fs(c,r,sr,!Hs),hi(c,0)!==0)break e;c.timeoutHandle=Vv(mv.bind(null,c,o,Jr,Lh,Rm,r,sr,Jo,Kl,Hs,2,-0,0),g);break e}mv(c,o,Jr,Lh,Rm,r,sr,Jo,Kl,Hs,0,-0,0)}}break}while(!0);es(n)}function km(n){Jr===null?Jr=n:Jr.push.apply(Jr,n)}function mv(n,r,o,c,p,g,S,N,H,Q,oe,pe,ne){var ae=r.subtreeFlags;if((ae&8192||(ae&16785408)===16785408)&&(cc={stylesheets:null,count:0,unsuspend:O1},rv(r),r=L1(),r!==null)){n.cancelPendingCommit=r(Ev.bind(null,n,o,c,p,S,N,H,1,pe,ne)),Fs(n,g,S,!Q);return}Ev(n,o,c,p,S,N,H,oe,pe,ne)}function Xx(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var p=o[c],g=p.getSnapshot;p=p.value;try{if(!ti(g(),p))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fs(n,r,o,c){r&=~Am,r&=~Jo,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var p=r;0<p;){var g=31-Wt(p),S=1<<g;c[g]=-1,p&=~S}o!==0&&jr(n,o,r)}function Vh(){return(jt&6)===0?(sc(0),!1):!0}function Om(){if(et!==null){if(Ct===0)var n=et.return;else n=et,Ms=Qo=null,zf(n),Ps=null,At=0,n=et;for(;n!==null;)hv(n.alternate,n),n=n.return;et=null}}function $l(n,r){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,_1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Om(),Rt=n,et=o=qa(n.current,null),lt=r,Ct=0,ji=null,Hs=!1,Zl=Lr(n,r),Sm=!1,Kl=sr=Am=Jo=Fa=Ft=0,Jr=nc=null,Rm=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var p=31-Wt(c),g=1<<p;r|=n[p],c&=~g}return qs=r,_i(),o}function pv(n,r){Xe=null,I.H=Xr,r===En?(r=dh(),Ct=3):r===In?(r=dh(),Ct=4):Ct=r===Cy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ji=r,et===null&&(Ft=1,Rh(n,ri(r,n.current)))}function gv(){var n=I.H;return I.H=Xr,n===null?Xr:n}function _v(){var n=I.A;return I.A=Wx,n}function Dm(){Ft=4,Hs||(lt&4194176)!==lt&&tr.current!==null||(Zl=!0),(Fa&134217727)===0&&(Jo&134217727)===0||Rt===null||Fs(Rt,lt,sr,!1)}function Lm(n,r,o){var c=jt;jt|=2;var p=gv(),g=_v();(Rt!==n||lt!==r)&&(Lh=null,$l(n,r)),r=!1;var S=Ft;e:do try{if(Ct!==0&&et!==null){var N=et,H=ji;switch(Ct){case 8:Om(),S=6;break e;case 3:case 2:case 6:tr.current===null&&(r=!0);var Q=Ct;if(Ct=0,ji=null,Ql(n,N,H,Q),o&&Zl){S=0;break e}break;default:Q=Ct,Ct=0,ji=null,Ql(n,N,H,Q)}}Jx(),S=Ft;break}catch(oe){pv(n,oe)}while(!0);return r&&n.shellSuspendCounter++,Ms=Qo=null,jt=c,I.H=p,I.A=g,et===null&&(Rt=null,lt=0,_i()),S}function Jx(){for(;et!==null;)yv(et)}function e1(n,r){var o=jt;jt|=2;var c=gv(),p=_v();Rt!==n||lt!==r?(Lh=null,Dh=Vn()+500,$l(n,r)):Zl=Lr(n,r);e:do try{if(Ct!==0&&et!==null){r=et;var g=ji;t:switch(Ct){case 1:Ct=0,ji=null,Ql(n,r,g,1);break;case 2:if(ch(g)){Ct=0,ji=null,vv(r);break}r=function(){Ct===2&&Rt===n&&(Ct=7),es(n)},g.then(r,r);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:ch(g)?(Ct=0,ji=null,vv(r)):(Ct=0,ji=null,Ql(n,r,g,7));break;case 5:var S=null;switch(et.tag){case 26:S=et.memoizedState;case 5:case 27:var N=et;if(!S||$v(S)){Ct=0,ji=null;var H=N.sibling;if(H!==null)et=H;else{var Q=N.return;Q!==null?(et=Q,jh(Q)):et=null}break t}}Ct=0,ji=null,Ql(n,r,g,5);break;case 6:Ct=0,ji=null,Ql(n,r,g,6);break;case 8:Om(),Ft=6;break e;default:throw Error(s(462))}}t1();break}catch(oe){pv(n,oe)}while(!0);return Ms=Qo=null,I.H=c,I.A=p,jt=o,et!==null?0:(Rt=null,lt=0,_i(),Ft)}function t1(){for(;et!==null&&!yl();)yv(et)}function yv(n){var r=Uy(n.alternate,n,qs);n.memoizedProps=n.pendingProps,r===null?jh(n):et=r}function vv(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=Dy(o,r,r.pendingProps,r.type,void 0,lt);break;case 11:r=Dy(o,r,r.pendingProps,r.type.render,r.ref,lt);break;case 5:zf(r);default:hv(o,r),r=et=lv(r,qs),r=Uy(o,r,qs)}n.memoizedProps=n.pendingProps,r===null?jh(n):et=r}function Ql(n,r,o,c){Ms=Qo=null,zf(r),Ps=null,At=0;var p=r.return;try{if(qx(n,p,r,o,lt)){Ft=1,Rh(n,ri(o,n.current)),et=null;return}}catch(g){if(p!==null)throw et=p,g;Ft=1,Rh(n,ri(o,n.current)),et=null;return}r.flags&32768?(R||c===1?n=!0:Zl||(lt&536870912)!==0?n=!1:(Hs=n=!0,(c===2||c===3||c===6)&&(c=tr.current,c!==null&&c.tag===13&&(c.flags|=16384))),bv(r,n)):jh(r)}function jh(n){var r=n;do{if((r.flags&32768)!==0){bv(r,Hs);return}n=r.return;var o=$x(r.alternate,r,qs);if(o!==null){et=o;return}if(r=r.sibling,r!==null){et=r;return}et=r=n}while(r!==null);Ft===0&&(Ft=5)}function bv(n,r){do{var o=Qx(n.alternate,n);if(o!==null){o.flags&=32767,et=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){et=n;return}et=n=o}while(n!==null);Ft=6,et=null}function Ev(n,r,o,c,p,g,S,N,H,Q){var oe=I.T,pe=ye.p;try{ye.p=2,I.T=null,n1(n,r,o,c,pe,p,g,S,N,H,Q)}finally{I.T=oe,ye.p=pe}}function n1(n,r,o,c,p,g,S,N){do Wl();while(el!==null);if((jt&6)!==0)throw Error(s(327));var H=n.finishedWork;if(c=n.finishedLanes,H===null)return null;if(n.finishedWork=null,n.finishedLanes=0,H===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var Q=H.lanes|H.childLanes;if(Q|=zu,Tl(n,c,Q,g,S,N),n===Rt&&(et=Rt=null,lt=0),(H.subtreeFlags&10256)===0&&(H.flags&10256)===0||Mh||(Mh=!0,Im=Q,Nm=o,a1(Fi,function(){return Wl(),null})),o=(H.flags&15990)!==0,(H.subtreeFlags&15990)!==0||o?(o=I.T,I.T=null,g=ye.p,ye.p=2,S=jt,jt|=4,Gx(n,H),tv(H,n),Pl(Km,n.containerInfo),Wh=!!Zm,Km=Zm=null,n.current=H,Yy(n,H.alternate,H),aa(),jt=S,ye.p=g,I.T=o):n.current=H,Mh?(Mh=!1,el=n,ic=c):wv(n,Q),Q=n.pendingLanes,Q===0&&(Ga=null),la(H.stateNode),es(n),r!==null)for(p=n.onRecoverableError,H=0;H<r.length;H++)Q=r[H],p(Q.value,{componentStack:Q.stack});return(ic&3)!==0&&Wl(),Q=n.pendingLanes,(c&4194218)!==0&&(Q&42)!==0?n===Pm?rc++:(rc=0,Pm=n):rc=0,sc(0),null}function wv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Bu(r)))}function Wl(){if(el!==null){var n=el,r=Im;Im=0;var o=Xn(ic),c=I.T,p=ye.p;try{if(ye.p=32>o?32:o,I.T=null,el===null)var g=!1;else{o=Nm,Nm=null;var S=el,N=ic;if(el=null,ic=0,(jt&6)!==0)throw Error(s(331));var H=jt;if(jt|=4,av(S.current),iv(S,S.current,N,o),jt=H,sc(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(hr,S)}catch{}g=!0}return g}finally{ye.p=p,I.T=c,wv(n,r)}}return!1}function Tv(n,r,o){r=ri(o,r),r=Jf(n.stateNode,r,2),n=za(n,r,2),n!==null&&(Mt(n,2),es(n))}function xt(n,r,o){if(n.tag===3)Tv(n,n,o);else for(;r!==null;){if(r.tag===3){Tv(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ga===null||!Ga.has(c))){n=ri(o,n),o=Ay(2),c=za(r,o,2),c!==null&&(Ry(o,c,r,n),Mt(c,2),es(c));break}}r=r.return}}function Mm(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new Yx;var p=new Set;c.set(r,p)}else p=c.get(r),p===void 0&&(p=new Set,c.set(r,p));p.has(o)||(Sm=!0,p.add(o),n=i1.bind(null,n,r,o),r.then(n,n))}function i1(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Rt===n&&(lt&o)===o&&(Ft===4||Ft===3&&(lt&62914560)===lt&&300>Vn()-Cm?(jt&2)===0&&$l(n,0):Am|=o,Kl===lt&&(Kl=0)),es(n)}function xv(n,r){r===0&&(r=Mr()),n=yi(n,r),n!==null&&(Mt(n,r),es(n))}function r1(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),xv(n,o)}function s1(n,r){var o=0;switch(n.tag){case 13:var c=n.stateNode,p=n.memoizedState;p!==null&&(o=p.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),xv(n,o)}function a1(n,r){return Or(n,r)}var zh=null,Yl=null,Vm=!1,Uh=!1,jm=!1,tl=0;function es(n){n!==Yl&&n.next===null&&(Yl===null?zh=Yl=n:Yl=Yl.next=n),Uh=!0,Vm||(Vm=!0,l1(o1))}function sc(n,r){if(!jm&&Uh){jm=!0;do for(var o=!1,c=zh;c!==null;){if(n!==0){var p=c.pendingLanes;if(p===0)var g=0;else{var S=c.suspendedLanes,N=c.pingedLanes;g=(1<<31-Wt(42|n)+1)-1,g&=p&~(S&~N),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(o=!0,Rv(c,g))}else g=lt,g=hi(c,c===Rt?g:0),(g&3)===0||Lr(c,g)||(o=!0,Rv(c,g));c=c.next}while(o);jm=!1}}function o1(){Uh=Vm=!1;var n=0;tl!==0&&(g1()&&(n=tl),tl=0);for(var r=Vn(),o=null,c=zh;c!==null;){var p=c.next,g=Sv(c,r);g===0?(c.next=null,o===null?zh=p:o.next=p,p===null&&(Yl=o)):(o=c,(n!==0||(g&3)!==0)&&(Uh=!0)),c=p}sc(n)}function Sv(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,p=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var S=31-Wt(g),N=1<<S,H=p[S];H===-1?((N&o)===0||(N&c)!==0)&&(p[S]=ua(N,r)):H<=r&&(n.expiredLanes|=N),g&=~N}if(r=Rt,o=lt,o=hi(n,n===r?o:0),c=n.callbackNode,o===0||n===r&&Ct===2||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Dr(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Lr(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&Dr(c),Xn(o)){case 2:case 8:o=Qt;break;case 32:o=Fi;break;case 268435456:o=oa;break;default:o=Fi}return c=Av.bind(null,n),o=Or(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&Dr(c),n.callbackPriority=2,n.callbackNode=null,2}function Av(n,r){var o=n.callbackNode;if(Wl()&&n.callbackNode!==o)return null;var c=lt;return c=hi(n,n===Rt?c:0),c===0?null:(fv(n,c,r),Sv(n,Vn()),n.callbackNode!=null&&n.callbackNode===o?Av.bind(null,n):null)}function Rv(n,r){if(Wl())return null;fv(n,r,!0)}function l1(n){y1(function(){(jt&6)!==0?Or(Lt,n):n()})}function zm(){return tl===0&&(tl=To()),tl}function Cv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:pi(""+n)}function Iv(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function u1(n,r,o,c,p){if(r==="submit"&&o&&o.stateNode===p){var g=Cv((p[Ut]||null).action),S=c.submitter;S&&(r=(r=S[Ut]||null)?Cv(r.formAction):S.getAttribute("formAction"),r!==null&&(g=r,S=null));var N=new vs("action","action",null,c,p);n.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(tl!==0){var H=S?Iv(p,S):new FormData(p);$f(o,{pending:!0,data:H,method:p.method,action:g},null,H)}}else typeof g=="function"&&(N.preventDefault(),H=S?Iv(p,S):new FormData(p),$f(o,{pending:!0,data:H,method:p.method,action:g},g,H))},currentTarget:p}]})}}for(var Um=0;Um<lh.length;Um++){var Bm=lh[Um],c1=Bm.toLowerCase(),h1=Bm[0].toUpperCase()+Bm.slice(1);bn(c1,"on"+h1)}bn(Li,"onAnimationEnd"),bn(zo,"onAnimationIteration"),bn(sh,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(kl,"onTransitionRun"),bn(If,"onTransitionStart"),bn(ah,"onTransitionCancel"),bn(oh,"onTransitionEnd"),jn("onMouseEnter",["mouseout","mouseover"]),jn("onMouseLeave",["mouseout","mouseover"]),jn("onPointerEnter",["pointerout","pointerover"]),jn("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function Nv(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],p=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var S=c.length-1;0<=S;S--){var N=c[S],H=N.instance,Q=N.currentTarget;if(N=N.listener,H!==g&&p.isPropagationStopped())break e;g=N,p.currentTarget=Q;try{g(p)}catch(oe){Ah(oe)}p.currentTarget=null,g=H}else for(S=0;S<c.length;S++){if(N=c[S],H=N.instance,Q=N.currentTarget,N=N.listener,H!==g&&p.isPropagationStopped())break e;g=N,p.currentTarget=Q;try{g(p)}catch(oe){Ah(oe)}p.currentTarget=null,g=H}}}}function at(n,r){var o=r[Ur];o===void 0&&(o=r[Ur]=new Set);var c=n+"__bubble";o.has(c)||(Pv(r,n,2,!1),o.add(c))}function Hm(n,r,o){var c=0;r&&(c|=4),Pv(o,n,c,r)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function qm(n){if(!n[Bh]){n[Bh]=!0,So.forEach(function(o){o!=="selectionchange"&&(d1.has(o)||Hm(o,!1,n),Hm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Bh]||(r[Bh]=!0,Hm("selectionchange",!1,r))}}function Pv(n,r,o,c){switch(e0(r)){case 2:var p=j1;break;case 8:p=z1;break;default:p=np}o=p.bind(null,r,o,n),p=void 0,!Un||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),c?p!==void 0?n.addEventListener(r,o,{capture:!0,passive:p}):n.addEventListener(r,o,!0):p!==void 0?n.addEventListener(r,o,{passive:p}):n.addEventListener(r,o,!1)}function Fm(n,r,o,c,p){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var N=c.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(S===4)for(S=c.return;S!==null;){var H=S.tag;if((H===3||H===4)&&(H=S.stateNode.containerInfo,H===p||H.nodeType===8&&H.parentNode===p))return;S=S.return}for(;N!==null;){if(S=Ni(N),S===null)return;if(H=S.tag,H===5||H===6||H===26||H===27){c=g=S;continue e}N=N.parentNode}}c=c.return}pt(function(){var Q=g,oe=ys(o),pe=[];e:{var ne=Ia.get(n);if(ne!==void 0){var ae=vs,Ne=n;switch(n){case"keypress":if(vt(o)===0)break e;case"keydown":case"keyup":ae=Ea;break;case"focusin":Ne="focus",ae=ga;break;case"focusout":Ne="blur",ae=ga;break;case"beforeblur":case"afterblur":ae=ga;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Al;break;case Li:case zo:case sh:ae=ya;break;case oh:ae=Rl;break;case"scroll":case"scrollend":ae=xl;break;case"wheel":ae=ws;break;case"copy":case"cut":case"paste":ae=Kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=wa;break;case"toggle":case"beforetoggle":ae=Qi}var Ge=(r&4)!==0,Gt=!Ge&&(n==="scroll"||n==="scrollend"),X=Ge?ne!==null?ne+"Capture":null:ne;Ge=[];for(var $=Q,ee;$!==null;){var he=$;if(ee=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ee===null||X===null||(he=Zr($,X),he!=null&&Ge.push(oc($,he,ee))),Gt)break;$=$.return}0<Ge.length&&(ne=new ae(ne,Ne,null,o,oe),pe.push({event:ne,listeners:Ge}))}}if((r&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",ne&&o!==Cn&&(Ne=o.relatedTarget||o.fromElement)&&(Ni(Ne)||Ne[Ri]))break e;if((ae||ne)&&(ne=oe.window===oe?oe:(ne=oe.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(Ne=o.relatedTarget||o.toElement,ae=Q,Ne=Ne?Ni(Ne):null,Ne!==null&&(Gt=fe(Ne),Ge=Ne.tag,Ne!==Gt||Ge!==5&&Ge!==27&&Ge!==6)&&(Ne=null)):(ae=null,Ne=Q),ae!==Ne)){if(Ge=vn,he="onMouseLeave",X="onMouseEnter",$="mouse",(n==="pointerout"||n==="pointerover")&&(Ge=wa,he="onPointerLeave",X="onPointerEnter",$="pointer"),Gt=ae==null?ne:Hr(ae),ee=Ne==null?ne:Hr(Ne),ne=new Ge(he,$+"leave",ae,o,oe),ne.target=Gt,ne.relatedTarget=ee,he=null,Ni(oe)===Q&&(Ge=new Ge(X,$+"enter",Ne,o,oe),Ge.target=ee,Ge.relatedTarget=Gt,he=Ge),Gt=he,ae&&Ne)t:{for(Ge=ae,X=Ne,$=0,ee=Ge;ee;ee=Xl(ee))$++;for(ee=0,he=X;he;he=Xl(he))ee++;for(;0<$-ee;)Ge=Xl(Ge),$--;for(;0<ee-$;)X=Xl(X),ee--;for(;$--;){if(Ge===X||X!==null&&Ge===X.alternate)break t;Ge=Xl(Ge),X=Xl(X)}Ge=null}else Ge=null;ae!==null&&kv(pe,ne,ae,Ge,!1),Ne!==null&&Gt!==null&&kv(pe,Gt,Ne,Ge,!0)}}e:{if(ne=Q?Hr(Q):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var Ce=xa;else if(St(ne))if(ku)Ce=Cf;else{Ce=Rf;var Je=Du}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?Q&&_s(Q.elementType)&&(Ce=xa):Ce=xr;if(Ce&&(Ce=Ce(n,Q))){wr(pe,Ce,o,oe);break e}Je&&Je(n,ne,Q),n==="focusout"&&Q&&ne.type==="number"&&Q.memoizedProps.value!=null&&fi(ne,"number",ne.value)}switch(Je=Q?Hr(Q):window,n){case"focusin":(St(Je)||Je.contentEditable==="true")&&(Sr=Je,Vo=Q,Ca=null);break;case"focusout":Ca=Vo=Sr=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,jo(pe,o,oe);break;case"selectionchange":if(Ra)break;case"keydown":case"keyup":jo(pe,o,oe)}var ke;if(qn)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else tt?re(n,o)&&(Ue="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ue="onCompositionStart");Ue&&(x&&o.locale!=="ko"&&(tt||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&tt&&(ke=yr()):(gi=oe,Bn="value"in gi?gi.value:gi.textContent,tt=!0)),Je=Hh(Q,Ue),0<Je.length&&(Ue=new Hn(Ue,n,null,o,oe),pe.push({event:Ue,listeners:Je}),ke?Ue.data=ke:(ke=be(o),ke!==null&&(Ue.data=ke)))),(ke=E?Ht(n,o):nt(n,o))&&(Ue=Hh(Q,"onBeforeInput"),0<Ue.length&&(Je=new Hn("onBeforeInput","beforeinput",null,o,oe),pe.push({event:Je,listeners:Ue}),Je.data=ke)),u1(pe,n,Q,o,oe)}Nv(pe,r)})}function oc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Hh(n,r){for(var o=r+"Capture",c=[];n!==null;){var p=n,g=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Zr(n,o),p!=null&&c.unshift(oc(n,p,g)),p=Zr(n,r),p!=null&&c.push(oc(n,p,g))),n=n.return}return c}function Xl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function kv(n,r,o,c,p){for(var g=r._reactName,S=[];o!==null&&o!==c;){var N=o,H=N.alternate,Q=N.stateNode;if(N=N.tag,H!==null&&H===c)break;N!==5&&N!==26&&N!==27||Q===null||(H=Q,p?(Q=Zr(o,g),Q!=null&&S.unshift(oc(o,Q,H))):p||(Q=Zr(o,g),Q!=null&&S.push(oc(o,Q,H)))),o=o.return}S.length!==0&&n.push({event:r,listeners:S})}var f1=/\r\n?/g,m1=/\u0000|\uFFFD/g;function Ov(n){return(typeof n=="string"?n:""+n).replace(f1,`
`).replace(m1,"")}function Dv(n,r){return r=Ov(r),Ov(n)===r}function qh(){}function Et(n,r,o,c,p,g){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||_n(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&_n(n,""+c);break;case"className":dt(n,"class",c);break;case"tabIndex":dt(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(n,o,c);break;case"style":fa(n,c,g);break;case"data":if(r!=="object"){dt(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=pi(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&Et(n,r,"name",p.name,p,null),Et(n,r,"formEncType",p.formEncType,p,null),Et(n,r,"formMethod",p.formMethod,p,null),Et(n,r,"formTarget",p.formTarget,p,null)):(Et(n,r,"encType",p.encType,p,null),Et(n,r,"method",p.method,p,null),Et(n,r,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=pi(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=qh);break;case"onScroll":c!=null&&at("scroll",n);break;case"onScrollEnd":c!=null&&at("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=pi(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":at("beforetoggle",n),at("toggle",n),$e(n,"popover",c);break;case"xlinkActuate":Rn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Rn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Rn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Rn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Rn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Rn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Rn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Rn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Rn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$e(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ma.get(o)||o,$e(n,o,c))}}function Gm(n,r,o,c,p,g){switch(o){case"style":fa(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?_n(n,c):(typeof c=="number"||typeof c=="bigint")&&_n(n,""+c);break;case"onScroll":c!=null&&at("scroll",n);break;case"onScrollEnd":c!=null&&at("scrollend",n);break;case"onClick":c!=null&&(n.onclick=qh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ca.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),r=o.slice(2,p?o.length-7:void 0),g=n[Ut]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(r,g,p),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,p);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):$e(n,o,c)}}}function Pn(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",n),at("load",n);var c=!1,p=!1,g;for(g in o)if(o.hasOwnProperty(g)){var S=o[g];if(S!=null)switch(g){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Et(n,r,g,S,o,null)}}p&&Et(n,r,"srcSet",o.srcSet,o,null),c&&Et(n,r,"src",o.src,o,null);return;case"input":at("invalid",n);var N=g=S=p=null,H=null,Q=null;for(c in o)if(o.hasOwnProperty(c)){var oe=o[c];if(oe!=null)switch(c){case"name":p=oe;break;case"type":S=oe;break;case"checked":H=oe;break;case"defaultChecked":Q=oe;break;case"value":g=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,r));break;default:Et(n,r,c,oe,o,null)}}Ki(n,g,N,H,Q,S,p,!1),Be(n);return;case"select":at("invalid",n),c=S=g=null;for(p in o)if(o.hasOwnProperty(p)&&(N=o[p],N!=null))switch(p){case"value":g=N;break;case"defaultValue":S=N;break;case"multiple":c=N;default:Et(n,r,p,N,o,null)}r=g,o=S,n.multiple=!!c,r!=null?De(n,!!c,r,!1):o!=null&&De(n,!!c,o,!0);return;case"textarea":at("invalid",n),g=p=c=null;for(S in o)if(o.hasOwnProperty(S)&&(N=o[S],N!=null))switch(S){case"value":c=N;break;case"defaultValue":p=N;break;case"children":g=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:Et(n,r,S,N,o,null)}mi(n,c,p,g),Be(n);return;case"option":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Et(n,r,H,c,o,null)}return;case"dialog":at("cancel",n),at("close",n);break;case"iframe":case"object":at("load",n);break;case"video":case"audio":for(c=0;c<ac.length;c++)at(ac[c],n);break;case"image":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"embed":case"source":case"link":at("error",n),at("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(c=o[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Et(n,r,Q,c,o,null)}return;default:if(_s(r)){for(oe in o)o.hasOwnProperty(oe)&&(c=o[oe],c!==void 0&&Gm(n,r,oe,c,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(c=o[N],c!=null&&Et(n,r,N,c,o,null))}function p1(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,N=null,H=null,Q=null,oe=null;for(ae in o){var pe=o[ae];if(o.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":H=pe;default:c.hasOwnProperty(ae)||Et(n,r,ae,null,c,pe)}}for(var ne in c){var ae=c[ne];if(pe=o[ne],c.hasOwnProperty(ne)&&(ae!=null||pe!=null))switch(ne){case"type":g=ae;break;case"name":p=ae;break;case"checked":Q=ae;break;case"defaultChecked":oe=ae;break;case"value":S=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:ae!==pe&&Et(n,r,ne,ae,c,pe)}}Gr(n,S,N,H,Q,oe,g,p);return;case"select":ae=S=N=ne=null;for(g in o)if(H=o[g],o.hasOwnProperty(g)&&H!=null)switch(g){case"value":break;case"multiple":ae=H;default:c.hasOwnProperty(g)||Et(n,r,g,null,c,H)}for(p in c)if(g=c[p],H=o[p],c.hasOwnProperty(p)&&(g!=null||H!=null))switch(p){case"value":ne=g;break;case"defaultValue":N=g;break;case"multiple":S=g;default:g!==H&&Et(n,r,p,g,c,H)}r=N,o=S,c=ae,ne!=null?De(n,!!o,ne,!1):!!c!=!!o&&(r!=null?De(n,!!o,r,!0):De(n,!!o,o?[]:"",!1));return;case"textarea":ae=ne=null;for(N in o)if(p=o[N],o.hasOwnProperty(N)&&p!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Et(n,r,N,null,c,p)}for(S in c)if(p=c[S],g=o[S],c.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":ne=p;break;case"defaultValue":ae=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&Et(n,r,S,p,c,g)}ei(n,ne,ae);return;case"option":for(var Ne in o)if(ne=o[Ne],o.hasOwnProperty(Ne)&&ne!=null&&!c.hasOwnProperty(Ne))switch(Ne){case"selected":n.selected=!1;break;default:Et(n,r,Ne,null,c,ne)}for(H in c)if(ne=c[H],ae=o[H],c.hasOwnProperty(H)&&ne!==ae&&(ne!=null||ae!=null))switch(H){case"selected":n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Et(n,r,H,ne,c,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in o)ne=o[Ge],o.hasOwnProperty(Ge)&&ne!=null&&!c.hasOwnProperty(Ge)&&Et(n,r,Ge,null,c,ne);for(Q in c)if(ne=c[Q],ae=o[Q],c.hasOwnProperty(Q)&&ne!==ae&&(ne!=null||ae!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:Et(n,r,Q,ne,c,ae)}return;default:if(_s(r)){for(var Gt in o)ne=o[Gt],o.hasOwnProperty(Gt)&&ne!==void 0&&!c.hasOwnProperty(Gt)&&Gm(n,r,Gt,void 0,c,ne);for(oe in c)ne=c[oe],ae=o[oe],!c.hasOwnProperty(oe)||ne===ae||ne===void 0&&ae===void 0||Gm(n,r,oe,ne,c,ae);return}}for(var X in o)ne=o[X],o.hasOwnProperty(X)&&ne!=null&&!c.hasOwnProperty(X)&&Et(n,r,X,null,c,ne);for(pe in c)ne=c[pe],ae=o[pe],!c.hasOwnProperty(pe)||ne===ae||ne==null&&ae==null||Et(n,r,pe,ne,c,ae)}var Zm=null,Km=null;function Fh(n){return n.nodeType===9?n:n.ownerDocument}function Lv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function $m(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Qm=null;function g1(){var n=window.event;return n&&n.type==="popstate"?n===Qm?!1:(Qm=n,!0):(Qm=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,_1=typeof clearTimeout=="function"?clearTimeout:void 0,jv=typeof Promise=="function"?Promise:void 0,y1=typeof queueMicrotask=="function"?queueMicrotask:typeof jv<"u"?function(n){return jv.resolve(null).then(n).catch(v1)}:Vv;function v1(n){setTimeout(function(){throw n})}function Wm(n,r){var o=r,c=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(c===0){n.removeChild(p),pc(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=p}while(o);pc(r)}function Ym(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ym(o),ps(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function b1(n,r,o,c){for(;n.nodeType===1;){var p=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Br])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==p.rel||n.getAttribute("href")!==(p.href==null?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Rr(n.nextSibling),n===null)break}return null}function E1(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Rr(n.nextSibling),n===null))return null;return n}function Rr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}function zv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function Uv(n,r,o){switch(r=Fh(o),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}var ar=new Map,Bv=new Set;function Gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var Gs=ye.d;ye.d={f:w1,r:T1,D:x1,C:S1,L:A1,m:R1,X:I1,S:C1,M:N1};function w1(){var n=Gs.f(),r=Vh();return n||r}function T1(n){var r=Zi(n);r!==null&&r.tag===5&&r.type==="form"?my(r):Gs.r(n)}var Jl=typeof document>"u"?null:document;function Hv(n,r,o){var c=Jl;if(c&&typeof r=="string"&&r){var p=st(r);p='link[rel="'+n+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Bv.has(p)||(Bv.add(p),n={rel:n,crossOrigin:o,href:r},c.querySelector(p)===null&&(r=c.createElement("link"),Pn(r,"link",n),Pt(r),c.head.appendChild(r)))}}function x1(n){Gs.D(n),Hv("dns-prefetch",n,null)}function S1(n,r){Gs.C(n,r),Hv("preconnect",n,r)}function A1(n,r,o){Gs.L(n,r,o);var c=Jl;if(c&&n&&r){var p='link[rel="preload"][as="'+st(r)+'"]';r==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+st(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+st(o.imageSizes)+'"]')):p+='[href="'+st(n)+'"]';var g=p;switch(r){case"style":g=eu(n);break;case"script":g=tu(n)}ar.has(g)||(n=z({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),ar.set(g,n),c.querySelector(p)!==null||r==="style"&&c.querySelector(lc(g))||r==="script"&&c.querySelector(uc(g))||(r=c.createElement("link"),Pn(r,"link",n),Pt(r),c.head.appendChild(r)))}}function R1(n,r){Gs.m(n,r);var o=Jl;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",p='link[rel="modulepreload"][as="'+st(c)+'"][href="'+st(n)+'"]',g=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=tu(n)}if(!ar.has(g)&&(n=z({rel:"modulepreload",href:n},r),ar.set(g,n),o.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(uc(g)))return}c=o.createElement("link"),Pn(c,"link",n),Pt(c),o.head.appendChild(c)}}}function C1(n,r,o){Gs.S(n,r,o);var c=Jl;if(c&&n){var p=Pi(c).hoistableStyles,g=eu(n);r=r||"default";var S=p.get(g);if(!S){var N={loading:0,preload:null};if(S=c.querySelector(lc(g)))N.loading=5;else{n=z({rel:"stylesheet",href:n,"data-precedence":r},o),(o=ar.get(g))&&Xm(n,o);var H=S=c.createElement("link");Pt(H),Pn(H,"link",n),H._p=new Promise(function(Q,oe){H.onload=Q,H.onerror=oe}),H.addEventListener("load",function(){N.loading|=1}),H.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Zh(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:N},p.set(g,S)}}}function I1(n,r){Gs.X(n,r);var o=Jl;if(o&&n){var c=Pi(o).hoistableScripts,p=tu(n),g=c.get(p);g||(g=o.querySelector(uc(p)),g||(n=z({src:n,async:!0},r),(r=ar.get(p))&&Jm(n,r),g=o.createElement("script"),Pt(g),Pn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function N1(n,r){Gs.M(n,r);var o=Jl;if(o&&n){var c=Pi(o).hoistableScripts,p=tu(n),g=c.get(p);g||(g=o.querySelector(uc(p)),g||(n=z({src:n,async:!0,type:"module"},r),(r=ar.get(p))&&Jm(n,r),g=o.createElement("script"),Pt(g),Pn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function qv(n,r,o,c){var p=(p=Mn.current)?Gh(p):null;if(!p)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=eu(o.href),o=Pi(p).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=eu(o.href);var g=Pi(p).hoistableStyles,S=g.get(n);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,S),(g=p.querySelector(lc(n)))&&!g._p&&(S.instance=g,S.state.loading=5),ar.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ar.set(n,o),g||P1(p,n,o,S.state))),r&&c===null)throw Error(s(528,""));return S}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=tu(o),o=Pi(p).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function eu(n){return'href="'+st(n)+'"'}function lc(n){return'link[rel="stylesheet"]['+n+"]"}function Fv(n){return z({},n,{"data-precedence":n.precedence,precedence:null})}function P1(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Pn(r,"link",o),Pt(r),n.head.appendChild(r))}function tu(n){return'[src="'+st(n)+'"]'}function uc(n){return"script[async]"+n}function Gv(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+st(o.href)+'"]');if(c)return r.instance=c,Pt(c),c;var p=z({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Pt(c),Pn(c,"style",p),Zh(c,o.precedence,n),r.instance=c;case"stylesheet":p=eu(o.href);var g=n.querySelector(lc(p));if(g)return r.state.loading|=4,r.instance=g,Pt(g),g;c=Fv(o),(p=ar.get(p))&&Xm(c,p),g=(n.ownerDocument||n).createElement("link"),Pt(g);var S=g;return S._p=new Promise(function(N,H){S.onload=N,S.onerror=H}),Pn(g,"link",c),r.state.loading|=4,Zh(g,o.precedence,n),r.instance=g;case"script":return g=tu(o.src),(p=n.querySelector(uc(g)))?(r.instance=p,Pt(p),p):(c=o,(p=ar.get(g))&&(c=z({},o),Jm(c,p)),n=n.ownerDocument||n,p=n.createElement("script"),Pt(p),Pn(p,"link",c),n.head.appendChild(p),r.instance=p);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Zh(c,o.precedence,n));return r.instance}function Zh(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,g=p,S=0;S<c.length;S++){var N=c[S];if(N.dataset.precedence===r)g=N;else if(g!==p)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Xm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Jm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Kh=null;function Zv(n,r,o){if(Kh===null){var c=new Map,p=Kh=new Map;p.set(o,c)}else p=Kh,c=p.get(o),c||(c=new Map,p.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),p=0;p<o.length;p++){var g=o[p];if(!(g[Br]||g[Yt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(r)||"";S=n+S;var N=c.get(S);N?N.push(g):c.set(S,[g])}}return c}function Kv(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function k1(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function $v(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var cc=null;function O1(){}function D1(n,r,o){if(cc===null)throw Error(s(475));var c=cc;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=eu(o.href),g=n.querySelector(lc(p));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=$h.bind(c),n.then(c,c)),r.state.loading|=4,r.instance=g,Pt(g);return}g=n.ownerDocument||n,o=Fv(o),(p=ar.get(p))&&Xm(o,p),g=g.createElement("link"),Pt(g);var S=g;S._p=new Promise(function(N,H){S.onload=N,S.onerror=H}),Pn(g,"link",o),r.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=$h.bind(c),n.addEventListener("load",r),n.addEventListener("error",r))}}function L1(){if(cc===null)throw Error(s(475));var n=cc;return n.stylesheets&&n.count===0&&ep(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&ep(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function $h(){if(this.count--,this.count===0){if(this.stylesheets)ep(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Qh=null;function ep(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Qh=new Map,r.forEach(M1,n),Qh=null,$h.call(n))}function M1(n,r){if(!(r.state.loading&4)){var o=Qh.get(n);if(o)var c=o.get(null);else{o=new Map,Qh.set(n,o);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),c=S)}c&&o.set(null,c)}p=r.instance,S=p.getAttribute("data-precedence"),g=o.get(S)||c,g===c&&o.set(null,p),o.set(S,p),this.count++,c=$h.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),g?g.parentNode.insertBefore(p,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),r.state.loading|=4}}var hc={$$typeof:D,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function V1(n,r,o,c,p,g,S,N){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.hiddenUpdates=Vr(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Qv(n,r,o,c,p,g,S,N,H,Q,oe,pe){return n=new V1(n,r,o,S,N,H,Q,pe),r=1,g===!0&&(r|=24),g=rr(3,null,null,r),n.current=g,g.stateNode=n,r=kf(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:r},dm(g),n}function Wv(n){return n?(n=Xi,n):Xi}function Yv(n,r,o,c,p,g){p=Wv(p),c.context===null?c.context=p:c.pendingContext=p,c=ja(r),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=za(n,c,r),o!==null&&(oi(o,n,r),$u(o,n,r))}function Xv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function tp(n,r){Xv(n,r),(n=n.alternate)&&Xv(n,r)}function Jv(n){if(n.tag===13){var r=yi(n,67108864);r!==null&&oi(r,n,67108864),tp(n,67108864)}}var Wh=!0;function j1(n,r,o,c){var p=I.T;I.T=null;var g=ye.p;try{ye.p=2,np(n,r,o,c)}finally{ye.p=g,I.T=p}}function z1(n,r,o,c){var p=I.T;I.T=null;var g=ye.p;try{ye.p=8,np(n,r,o,c)}finally{ye.p=g,I.T=p}}function np(n,r,o,c){if(Wh){var p=ip(c);if(p===null)Fm(n,r,c,Yh,o),t0(n,c);else if(B1(p,n,r,o,c))c.stopPropagation();else if(t0(n,c),r&4&&-1<U1.indexOf(n)){for(;p!==null;){var g=Zi(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Si(g.pendingLanes);if(S!==0){var N=g;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var H=1<<31-Wt(S);N.entanglements[1]|=H,S&=~H}es(g),(jt&6)===0&&(Dh=Vn()+500,sc(0))}}break;case 13:N=yi(g,2),N!==null&&oi(N,g,2),Vh(),tp(g,2)}if(g=ip(c),g===null&&Fm(n,r,c,Yh,o),g===p)break;p=g}p!==null&&c.stopPropagation()}else Fm(n,r,c,null,o)}}function ip(n){return n=ys(n),rp(n)}var Yh=null;function rp(n){if(Yh=null,n=Ni(n),n!==null){var r=fe(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=Ye(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Yh=n,null}function e0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vl()){case Lt:return 2;case Qt:return 8;case Fi:case bl:return 32;case oa:return 268435456;default:return 32}default:return 32}}var sp=!1,Za=null,Ka=null,$a=null,dc=new Map,fc=new Map,Qa=[],U1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t0(n,r){switch(n){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":dc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(r.pointerId)}}function mc(n,r,o,c,p,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},r!==null&&(r=Zi(r),r!==null&&Jv(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),n)}function B1(n,r,o,c,p){switch(r){case"focusin":return Za=mc(Za,n,r,o,c,p),!0;case"dragenter":return Ka=mc(Ka,n,r,o,c,p),!0;case"mouseover":return $a=mc($a,n,r,o,c,p),!0;case"pointerover":var g=p.pointerId;return dc.set(g,mc(dc.get(g)||null,n,r,o,c,p)),!0;case"gotpointercapture":return g=p.pointerId,fc.set(g,mc(fc.get(g)||null,n,r,o,c,p)),!0}return!1}function n0(n){var r=Ni(n.target);if(r!==null){var o=fe(r);if(o!==null){if(r=o.tag,r===13){if(r=Ye(o),r!==null){n.blockedOn=r,fr(n.priority,function(){if(o.tag===13){var c=zi(),p=yi(o,c);p!==null&&oi(p,o,c),tp(o,c)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=ip(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Cn=c,o.target.dispatchEvent(c),Cn=null}else return r=Zi(o),r!==null&&Jv(r),n.blockedOn=o,!1;r.shift()}return!0}function i0(n,r,o){Xh(n)&&o.delete(r)}function H1(){sp=!1,Za!==null&&Xh(Za)&&(Za=null),Ka!==null&&Xh(Ka)&&(Ka=null),$a!==null&&Xh($a)&&($a=null),dc.forEach(i0),fc.forEach(i0)}function Jh(n,r){n.blockedOn===r&&(n.blockedOn=null,sp||(sp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,H1)))}var ed=null;function r0(n){ed!==n&&(ed=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ed===n&&(ed=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],p=n[r+2];if(typeof c!="function"){if(rp(c||o)===null)continue;break}var g=Zi(o);g!==null&&(n.splice(r,3),r-=3,$f(g,{pending:!0,data:p,method:o.method,action:c},c,p))}}))}function pc(n){function r(H){return Jh(H,n)}Za!==null&&Jh(Za,n),Ka!==null&&Jh(Ka,n),$a!==null&&Jh($a,n),dc.forEach(r),fc.forEach(r);for(var o=0;o<Qa.length;o++){var c=Qa[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Qa.length&&(o=Qa[0],o.blockedOn===null);)n0(o),o.blockedOn===null&&Qa.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var p=o[c],g=o[c+1],S=p[Ut]||null;if(typeof g=="function")S||r0(o);else if(S){var N=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[Ut]||null)N=S.formAction;else if(rp(p)!==null)continue}else N=S.action;typeof N=="function"?o[c+1]=N:(o.splice(c,3),c-=3),r0(o)}}}function ap(n){this._internalRoot=n}td.prototype.render=ap.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,c=zi();Yv(o,c,n,r,null,null)},td.prototype.unmount=ap.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;n.tag===0&&Wl(),Yv(n.current,2,null,n,null,null),Vh(),r[Ri]=null}};function td(n){this._internalRoot=n}td.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ie();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Qa.length&&r!==0&&r<Qa[o].priority;o++);Qa.splice(o,0,n),o===0&&n0(n)}};var s0=e.version;if(s0!=="19.0.0")throw Error(s(527,s0,"19.0.0"));ye.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=le(r),n=n!==null?we(n):null,n=n===null?null:n.stateNode,n};var q1={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:Ni,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{hr=nd.inject(q1),nn=nd}catch{}}return _c.createRoot=function(n,r){if(!l(n))throw Error(s(299));var o=!1,c="",p=wy,g=Ty,S=xy,N=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(N=r.unstable_transitionCallbacks)),r=Qv(n,1,!1,null,null,o,c,p,g,S,N,null),n[Ri]=r.current,qm(n.nodeType===8?n.parentNode:n),new ap(r)},_c.hydrateRoot=function(n,r,o){if(!l(n))throw Error(s(299));var c=!1,p="",g=wy,S=Ty,N=xy,H=null,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(H=o.unstable_transitionCallbacks),o.formState!==void 0&&(Q=o.formState)),r=Qv(n,1,!0,r,o??null,c,p,g,S,N,H,Q),r.context=Wv(null),o=r.current,c=zi(),p=ja(c),p.callback=null,za(o,p,c),r.current.lanes=c,Mt(r,c),es(r),n[Ri]=r.current,qm(n),new td(r)},_c.version="19.0.0",_c}var p0;function X1(){if(p0)return lp.exports;p0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lp.exports=Y1(),lp.exports}var J1=X1(),U=_g();const Sd=gg(U);var yc={},g0;function eS(){if(g0)return yc;g0=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.parse=f,yc.serialize=b;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,h=(()=>{const k=function(){};return k.prototype=Object.create(null),k})();function f(k,D){const G=new h,W=k.length;if(W<2)return G;const K=(D==null?void 0:D.decode)||A;let te=0;do{const se=k.indexOf("=",te);if(se===-1)break;const Z=k.indexOf(";",te),ue=Z===-1?W:Z;if(se>ue){te=k.lastIndexOf(";",se-1)+1;continue}const _e=_(k,te,se),Se=y(k,se,_e),V=k.slice(_e,Se);if(G[V]===void 0){let P=_(k,se+1,ue),I=y(k,ue,P);const z=K(k.slice(P,I));G[V]=z}te=ue+1}while(te<W);return G}function _(k,D,G){do{const W=k.charCodeAt(D);if(W!==32&&W!==9)return D}while(++D<G);return G}function y(k,D,G){for(;D>G;){const W=k.charCodeAt(--D);if(W!==32&&W!==9)return D+1}return G}function b(k,D,G){const W=(G==null?void 0:G.encode)||encodeURIComponent;if(!i.test(k))throw new TypeError(`argument name is invalid: ${k}`);const K=W(D);if(!e.test(K))throw new TypeError(`argument val is invalid: ${D}`);let te=k+"="+K;if(!G)return te;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);te+="; Max-Age="+G.maxAge}if(G.domain){if(!t.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);te+="; Domain="+G.domain}if(G.path){if(!s.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);te+="; Path="+G.path}if(G.expires){if(!C(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);te+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(te+="; HttpOnly"),G.secure&&(te+="; Secure"),G.partitioned&&(te+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":te+="; Priority=Low";break;case"medium":te+="; Priority=Medium";break;case"high":te+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":te+="; SameSite=Strict";break;case"lax":te+="; SameSite=Lax";break;case"none":te+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return te}function A(k){if(k.indexOf("%")===-1)return k;try{return decodeURIComponent(k)}catch{return k}}function C(k){return l.call(k)==="[object Date]"}return yc}eS();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _0="popstate";function tS(i={}){function e(s,l){let{pathname:h,search:f,hash:_}=s.location;return Dp("",{pathname:h,search:f,hash:_},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){return typeof l=="string"?l:Dc(l)}return iS(e,t,null,i)}function Dt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Cr(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nS(){return Math.random().toString(36).substring(2,10)}function y0(i,e){return{usr:i.state,key:i.key,idx:e}}function Dp(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Eu(e):e,state:t,key:e&&e.key||s||nS()}}function Dc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Eu(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function iS(i,e,t,s={}){let{window:l=document.defaultView,v5Compat:h=!1}=s,f=l.history,_="POP",y=null,b=A();b==null&&(b=0,f.replaceState({...f.state,idx:b},""));function A(){return(f.state||{idx:null}).idx}function C(){_="POP";let K=A(),te=K==null?null:K-b;b=K,y&&y({action:_,location:W.location,delta:te})}function k(K,te){_="PUSH";let se=Dp(W.location,K,te);b=A()+1;let Z=y0(se,b),ue=W.createHref(se);try{f.pushState(Z,"",ue)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;l.location.assign(ue)}h&&y&&y({action:_,location:W.location,delta:1})}function D(K,te){_="REPLACE";let se=Dp(W.location,K,te);b=A();let Z=y0(se,b),ue=W.createHref(se);f.replaceState(Z,"",ue),h&&y&&y({action:_,location:W.location,delta:0})}function G(K){let te=l.location.origin!=="null"?l.location.origin:l.location.href,se=typeof K=="string"?K:Dc(K);return se=se.replace(/ $/,"%20"),Dt(te,`No window.location.(origin|href) available to create URL for href: ${se}`),new URL(se,te)}let W={get action(){return _},get location(){return i(l,f)},listen(K){if(y)throw new Error("A history only accepts one active listener");return l.addEventListener(_0,C),y=K,()=>{l.removeEventListener(_0,C),y=null}},createHref(K){return e(l,K)},createURL:G,encodeLocation(K){let te=G(K);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:k,replace:D,go(K){return f.go(K)}};return W}function oE(i,e,t="/"){return rS(i,e,t,!1)}function rS(i,e,t,s){let l=typeof e=="string"?Eu(e):e,h=uo(l.pathname||"/",t);if(h==null)return null;let f=lE(i);sS(f);let _=null;for(let y=0;_==null&&y<f.length;++y){let b=gS(h);_=mS(f[y],b,s)}return _}function lE(i,e=[],t=[],s=""){let l=(h,f,_)=>{let y={relativePath:_===void 0?h.path||"":_,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};y.relativePath.startsWith("/")&&(Dt(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length));let b=Ws([s,y.relativePath]),A=t.concat(y);h.children&&h.children.length>0&&(Dt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),lE(h.children,e,A,b)),!(h.path==null&&!h.index)&&e.push({path:b,score:dS(b,h.index),routesMeta:A})};return i.forEach((h,f)=>{var _;if(h.path===""||!((_=h.path)!=null&&_.includes("?")))l(h,f);else for(let y of uE(h.path))l(h,f,y)}),e}function uE(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,l=t.endsWith("?"),h=t.replace(/\?$/,"");if(s.length===0)return l?[h,""]:[h];let f=uE(s.join("/")),_=[];return _.push(...f.map(y=>y===""?h:[h,y].join("/"))),l&&_.push(...f),_.map(y=>i.startsWith("/")&&y===""?"/":y)}function sS(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:fS(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var aS=/^:[\w-]+$/,oS=3,lS=2,uS=1,cS=10,hS=-2,v0=i=>i==="*";function dS(i,e){let t=i.split("/"),s=t.length;return t.some(v0)&&(s+=hS),e&&(s+=lS),t.filter(l=>!v0(l)).reduce((l,h)=>l+(aS.test(h)?oS:h===""?uS:cS),s)}function fS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,l)=>s===e[l])?i[i.length-1]-e[e.length-1]:0}function mS(i,e,t=!1){let{routesMeta:s}=i,l={},h="/",f=[];for(let _=0;_<s.length;++_){let y=s[_],b=_===s.length-1,A=h==="/"?e:e.slice(h.length)||"/",C=Ad({path:y.relativePath,caseSensitive:y.caseSensitive,end:b},A),k=y.route;if(!C&&b&&t&&!s[s.length-1].route.index&&(C=Ad({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},A)),!C)return null;Object.assign(l,C.params),f.push({params:l,pathname:Ws([h,C.pathname]),pathnameBase:bS(Ws([h,C.pathnameBase])),route:k}),C.pathnameBase!=="/"&&(h=Ws([h,C.pathnameBase]))}return f}function Ad(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=pS(i.path,i.caseSensitive,i.end),l=e.match(t);if(!l)return null;let h=l[0],f=h.replace(/(.)\/+$/,"$1"),_=l.slice(1);return{params:s.reduce((b,{paramName:A,isOptional:C},k)=>{if(A==="*"){let G=_[k]||"";f=h.slice(0,h.length-G.length).replace(/(.)\/+$/,"$1")}const D=_[k];return C&&!D?b[A]=void 0:b[A]=(D||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:f,pattern:i}}function pS(i,e=!1,t=!0){Cr(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,_,y)=>(s.push({paramName:_,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),s]}function gS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cr(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function uo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function _S(i,e="/"){let{pathname:t,search:s="",hash:l=""}=typeof i=="string"?Eu(i):i;return{pathname:t?t.startsWith("/")?t:yS(t,e):e,search:ES(s),hash:wS(l)}}function yS(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function fp(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vS(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yg(i){let e=vS(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function vg(i,e,t,s=!1){let l;typeof i=="string"?l=Eu(i):(l={...i},Dt(!l.pathname||!l.pathname.includes("?"),fp("?","pathname","search",l)),Dt(!l.pathname||!l.pathname.includes("#"),fp("#","pathname","hash",l)),Dt(!l.search||!l.search.includes("#"),fp("#","search","hash",l)));let h=i===""||l.pathname==="",f=h?"/":l.pathname,_;if(f==null)_=t;else{let C=e.length-1;if(!s&&f.startsWith("..")){let k=f.split("/");for(;k[0]==="..";)k.shift(),C-=1;l.pathname=k.join("/")}_=C>=0?e[C]:"/"}let y=_S(l,_),b=f&&f!=="/"&&f.endsWith("/"),A=(h||f===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(b||A)&&(y.pathname+="/"),y}var Ws=i=>i.join("/").replace(/\/\/+/g,"/"),bS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),ES=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,wS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function TS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var cE=["POST","PUT","PATCH","DELETE"];new Set(cE);var xS=["GET",...cE];new Set(xS);var wu=U.createContext(null);wu.displayName="DataRouter";var $d=U.createContext(null);$d.displayName="DataRouterState";var hE=U.createContext({isTransitioning:!1});hE.displayName="ViewTransition";var SS=U.createContext(new Map);SS.displayName="Fetchers";var AS=U.createContext(null);AS.displayName="Await";var Ir=U.createContext(null);Ir.displayName="Navigation";var Gc=U.createContext(null);Gc.displayName="Location";var Nr=U.createContext({outlet:null,matches:[],isDataRoute:!1});Nr.displayName="Route";var bg=U.createContext(null);bg.displayName="RouteError";function RS(i,{relative:e}={}){Dt(Tu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=U.useContext(Ir),{hash:l,pathname:h,search:f}=Zc(i,{relative:e}),_=h;return t!=="/"&&(_=h==="/"?t:Ws([t,h])),s.createHref({pathname:_,search:f,hash:l})}function Tu(){return U.useContext(Gc)!=null}function cs(){return Dt(Tu(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Gc).location}var dE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fE(i){U.useContext(Ir).static||U.useLayoutEffect(i)}function ml(){let{isDataRoute:i}=U.useContext(Nr);return i?HS():CS()}function CS(){Dt(Tu(),"useNavigate() may be used only in the context of a <Router> component.");let i=U.useContext(wu),{basename:e,navigator:t}=U.useContext(Ir),{matches:s}=U.useContext(Nr),{pathname:l}=cs(),h=JSON.stringify(yg(s)),f=U.useRef(!1);return fE(()=>{f.current=!0}),U.useCallback((y,b={})=>{if(Cr(f.current,dE),!f.current)return;if(typeof y=="number"){t.go(y);return}let A=vg(y,JSON.parse(h),l,b.relative==="path");i==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:Ws([e,A.pathname])),(b.replace?t.replace:t.push)(A,b.state,b)},[e,t,h,l,i])}var IS=U.createContext(null);function NS(i){let e=U.useContext(Nr).outlet;return e&&U.createElement(IS.Provider,{value:i},e)}function Zc(i,{relative:e}={}){let{matches:t}=U.useContext(Nr),{pathname:s}=cs(),l=JSON.stringify(yg(t));return U.useMemo(()=>vg(i,JSON.parse(l),s,e==="path"),[i,l,s,e])}function PS(i,e){return mE(i,e)}function mE(i,e,t,s){var se;Dt(Tu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:h}=U.useContext(Ir),{matches:f}=U.useContext(Nr),_=f[f.length-1],y=_?_.params:{},b=_?_.pathname:"/",A=_?_.pathnameBase:"/",C=_&&_.route;{let Z=C&&C.path||"";pE(b,!C||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let k=cs(),D;if(e){let Z=typeof e=="string"?Eu(e):e;Dt(A==="/"||((se=Z.pathname)==null?void 0:se.startsWith(A)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),D=Z}else D=k;let G=D.pathname||"/",W=G;if(A!=="/"){let Z=A.replace(/^\//,"").split("/");W="/"+G.replace(/^\//,"").split("/").slice(Z.length).join("/")}let K=!h&&t&&t.matches&&t.matches.length>0?t.matches:oE(i,{pathname:W});Cr(C||K!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),Cr(K==null||K[K.length-1].route.element!==void 0||K[K.length-1].route.Component!==void 0||K[K.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=MS(K&&K.map(Z=>Object.assign({},Z,{params:Object.assign({},y,Z.params),pathname:Ws([A,l.encodeLocation?l.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?A:Ws([A,l.encodeLocation?l.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),f,t,s);return e&&te?U.createElement(Gc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},te):te}function kS(){let i=BS(),e=TS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=U.createElement(U.Fragment,null,U.createElement("p",null,"💿 Hey developer 👋"),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:h},"ErrorBoundary")," or"," ",U.createElement("code",{style:h},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:l},t):null,f)}var OS=U.createElement(kS,null),DS=class extends U.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?U.createElement(Nr.Provider,{value:this.props.routeContext},U.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LS({routeContext:i,match:e,children:t}){let s=U.useContext(wu);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Nr.Provider,{value:i},t)}function MS(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let l=i,h=t==null?void 0:t.errors;if(h!=null){let y=l.findIndex(b=>b.route.id&&(h==null?void 0:h[b.route.id])!==void 0);Dt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,_=-1;if(t)for(let y=0;y<l.length;y++){let b=l[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(_=y),b.route.id){let{loaderData:A,errors:C}=t,k=b.route.loader&&!A.hasOwnProperty(b.route.id)&&(!C||C[b.route.id]===void 0);if(b.route.lazy||k){f=!0,_>=0?l=l.slice(0,_+1):l=[l[0]];break}}}return l.reduceRight((y,b,A)=>{let C,k=!1,D=null,G=null;t&&(C=h&&b.route.id?h[b.route.id]:void 0,D=b.route.errorElement||OS,f&&(_<0&&A===0?(pE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,G=null):_===A&&(k=!0,G=b.route.hydrateFallbackElement||null)));let W=e.concat(l.slice(0,A+1)),K=()=>{let te;return C?te=D:k?te=G:b.route.Component?te=U.createElement(b.route.Component,null):b.route.element?te=b.route.element:te=y,U.createElement(LS,{match:b,routeContext:{outlet:y,matches:W,isDataRoute:t!=null},children:te})};return t&&(b.route.ErrorBoundary||b.route.errorElement||A===0)?U.createElement(DS,{location:t.location,revalidation:t.revalidation,component:D,error:C,children:K(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):K()},null)}function Eg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VS(i){let e=U.useContext(wu);return Dt(e,Eg(i)),e}function jS(i){let e=U.useContext($d);return Dt(e,Eg(i)),e}function zS(i){let e=U.useContext(Nr);return Dt(e,Eg(i)),e}function wg(i){let e=zS(i),t=e.matches[e.matches.length-1];return Dt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function US(){return wg("useRouteId")}function BS(){var s;let i=U.useContext(bg),e=jS("useRouteError"),t=wg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function HS(){let{router:i}=VS("useNavigate"),e=wg("useNavigate"),t=U.useRef(!1);return fE(()=>{t.current=!0}),U.useCallback(async(l,h={})=>{Cr(t.current,dE),t.current&&(typeof l=="number"?i.navigate(l):await i.navigate(l,{fromRouteId:e,...h}))},[i,e])}var b0={};function pE(i,e,t){!e&&!b0[i]&&(b0[i]=!0,Cr(!1,t))}U.memo(qS);function qS({routes:i,future:e,state:t}){return mE(i,void 0,t,e)}function lu({to:i,replace:e,state:t,relative:s}){Dt(Tu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=U.useContext(Ir);Cr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=U.useContext(Nr),{pathname:f}=cs(),_=ml(),y=vg(i,yg(h),f,s==="path"),b=JSON.stringify(y);return U.useEffect(()=>{_(JSON.parse(b),{replace:e,state:t,relative:s})},[_,b,s,e,t]),null}function gE(i){return NS(i.context)}function kn(i){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FS({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:l,static:h=!1}){Dt(!Tu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),_=U.useMemo(()=>({basename:f,navigator:l,static:h,future:{}}),[f,l,h]);typeof t=="string"&&(t=Eu(t));let{pathname:y="/",search:b="",hash:A="",state:C=null,key:k="default"}=t,D=U.useMemo(()=>{let G=uo(y,f);return G==null?null:{location:{pathname:G,search:b,hash:A,state:C,key:k},navigationType:s}},[f,y,b,A,C,k,s]);return Cr(D!=null,`<Router basename="${f}"> is not able to match the URL "${y}${b}${A}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:U.createElement(Ir.Provider,{value:_},U.createElement(Gc.Provider,{children:e,value:D}))}function GS({children:i,location:e}){return PS(Lp(i),e)}function Lp(i,e=[]){let t=[];return U.Children.forEach(i,(s,l)=>{if(!U.isValidElement(s))return;let h=[...e,l];if(s.type===U.Fragment){t.push.apply(t,Lp(s.props.children,h));return}Dt(s.type===kn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Lp(s.props.children,h)),t.push(f)}),t}var fd="get",md="application/x-www-form-urlencoded";function Qd(i){return i!=null&&typeof i.tagName=="string"}function ZS(i){return Qd(i)&&i.tagName.toLowerCase()==="button"}function KS(i){return Qd(i)&&i.tagName.toLowerCase()==="form"}function $S(i){return Qd(i)&&i.tagName.toLowerCase()==="input"}function QS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function WS(i,e){return i.button===0&&(!e||e==="_self")&&!QS(i)}var id=null;function YS(){if(id===null)try{new FormData(document.createElement("form"),0),id=!1}catch{id=!0}return id}var XS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mp(i){return i!=null&&!XS.has(i)?(Cr(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):i}function JS(i,e){let t,s,l,h,f;if(KS(i)){let _=i.getAttribute("action");s=_?uo(_,e):null,t=i.getAttribute("method")||fd,l=mp(i.getAttribute("enctype"))||md,h=new FormData(i)}else if(ZS(i)||$S(i)&&(i.type==="submit"||i.type==="image")){let _=i.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=i.getAttribute("formaction")||_.getAttribute("action");if(s=y?uo(y,e):null,t=i.getAttribute("formmethod")||_.getAttribute("method")||fd,l=mp(i.getAttribute("formenctype"))||mp(_.getAttribute("enctype"))||md,h=new FormData(_,i),!YS()){let{name:b,type:A,value:C}=i;if(A==="image"){let k=b?`${b}.`:"";h.append(`${k}x`,"0"),h.append(`${k}y`,"0")}else b&&h.append(b,C)}}else{if(Qd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fd,s=null,l=md,f=i}return h&&l==="text/plain"&&(f=h,h=void 0),{action:s,method:t.toLowerCase(),encType:l,formData:h,body:f}}function Tg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function eA(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tA(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function nA(i,e,t){let s=await Promise.all(i.map(async l=>{let h=e.routes[l.route.id];if(h){let f=await eA(h,t);return f.links?f.links():[]}return[]}));return aA(s.flat(1).filter(tA).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function E0(i,e,t,s,l,h){let f=(y,b)=>t[b]?y.route.id!==t[b].route.id:!0,_=(y,b)=>{var A;return t[b].pathname!==y.pathname||((A=t[b].route.path)==null?void 0:A.endsWith("*"))&&t[b].params["*"]!==y.params["*"]};return h==="assets"?e.filter((y,b)=>f(y,b)||_(y,b)):h==="data"?e.filter((y,b)=>{var C;let A=s.routes[y.route.id];if(!A||!A.hasLoader)return!1;if(f(y,b)||_(y,b))return!0;if(y.route.shouldRevalidate){let k=y.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((C=t[0])==null?void 0:C.params)||{},nextUrl:new URL(i,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function iA(i,e,{includeHydrateFallback:t}={}){return rA(i.map(s=>{let l=e.routes[s.route.id];if(!l)return[];let h=[l.module];return l.clientActionModule&&(h=h.concat(l.clientActionModule)),l.clientLoaderModule&&(h=h.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(h=h.concat(l.hydrateFallbackModule)),l.imports&&(h=h.concat(l.imports)),h}).flat(1))}function rA(i){return[...new Set(i)]}function sA(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function aA(i,e){let t=new Set;return new Set(e),i.reduce((s,l)=>{let h=JSON.stringify(sA(l));return t.has(h)||(t.add(h),s.push({key:h,link:l})),s},[])}function oA(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function lA(){let i=U.useContext(wu);return Tg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function uA(){let i=U.useContext($d);return Tg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var xg=U.createContext(void 0);xg.displayName="FrameworkContext";function _E(){let i=U.useContext(xg);return Tg(i,"You must render this element inside a <HydratedRouter> element"),i}function cA(i,e){let t=U.useContext(xg),[s,l]=U.useState(!1),[h,f]=U.useState(!1),{onFocus:_,onBlur:y,onMouseEnter:b,onMouseLeave:A,onTouchStart:C}=e,k=U.useRef(null);U.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let W=te=>{te.forEach(se=>{f(se.isIntersecting)})},K=new IntersectionObserver(W,{threshold:.5});return k.current&&K.observe(k.current),()=>{K.disconnect()}}},[i]),U.useEffect(()=>{if(s){let W=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(W)}}},[s]);let D=()=>{l(!0)},G=()=>{l(!1),f(!1)};return t?i!=="intent"?[h,k,{}]:[h,k,{onFocus:vc(_,D),onBlur:vc(y,G),onMouseEnter:vc(b,D),onMouseLeave:vc(A,G),onTouchStart:vc(C,D)}]:[!1,k,{}]}function vc(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function hA({page:i,...e}){let{router:t}=lA(),s=U.useMemo(()=>oE(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?U.createElement(fA,{page:i,matches:s,...e}):null}function dA(i){let{manifest:e,routeModules:t}=_E(),[s,l]=U.useState([]);return U.useEffect(()=>{let h=!1;return nA(i,e,t).then(f=>{h||l(f)}),()=>{h=!0}},[i,e,t]),s}function fA({page:i,matches:e,...t}){let s=cs(),{manifest:l,routeModules:h}=_E(),{loaderData:f,matches:_}=uA(),y=U.useMemo(()=>E0(i,e,_,l,s,"data"),[i,e,_,l,s]),b=U.useMemo(()=>E0(i,e,_,l,s,"assets"),[i,e,_,l,s]),A=U.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let D=new Set,G=!1;if(e.forEach(K=>{var se;let te=l.routes[K.route.id];!te||!te.hasLoader||(!y.some(Z=>Z.route.id===K.route.id)&&K.route.id in f&&((se=h[K.route.id])!=null&&se.shouldRevalidate)||te.hasClientLoader?G=!0:D.add(K.route.id))}),D.size===0)return[];let W=oA(i);return G&&D.size>0&&W.searchParams.set("_routes",e.filter(K=>D.has(K.route.id)).map(K=>K.route.id).join(",")),[W.pathname+W.search]},[f,s,l,y,e,i,h]),C=U.useMemo(()=>iA(b,l),[b,l]),k=dA(b);return U.createElement(U.Fragment,null,A.map(D=>U.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),C.map(D=>U.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),k.map(({key:D,link:G})=>U.createElement("link",{key:D,...G})))}function mA(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var yE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yE&&(window.__reactRouterVersion="7.2.0")}catch{}function pA({basename:i,children:e,window:t}){let s=U.useRef();s.current==null&&(s.current=tS({window:t,v5Compat:!0}));let l=s.current,[h,f]=U.useState({action:l.action,location:l.location}),_=U.useCallback(y=>{U.startTransition(()=>f(y))},[f]);return U.useLayoutEffect(()=>l.listen(_),[l,_]),U.createElement(FS,{basename:i,children:e,location:h.location,navigationType:h.action,navigator:l})}var vE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fn=U.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:l,reloadDocument:h,replace:f,state:_,target:y,to:b,preventScrollReset:A,viewTransition:C,...k},D){let{basename:G}=U.useContext(Ir),W=typeof b=="string"&&vE.test(b),K,te=!1;if(typeof b=="string"&&W&&(K=b,yE))try{let I=new URL(window.location.href),z=b.startsWith("//")?new URL(I.protocol+b):new URL(b),M=uo(z.pathname,G);z.origin===I.origin&&M!=null?b=M+z.search+z.hash:te=!0}catch{Cr(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=RS(b,{relative:l}),[Z,ue,_e]=cA(s,k),Se=vA(b,{replace:f,state:_,target:y,preventScrollReset:A,relative:l,viewTransition:C});function V(I){e&&e(I),I.defaultPrevented||Se(I)}let P=U.createElement("a",{...k,..._e,href:K||se,onClick:te||h?e:V,ref:mA(D,ue),target:y,"data-discover":!W&&t==="render"?"true":void 0});return Z&&!W?U.createElement(U.Fragment,null,P,U.createElement(hA,{page:se})):P});fn.displayName="Link";var gA=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:l=!1,style:h,to:f,viewTransition:_,children:y,...b},A){let C=Zc(f,{relative:b.relative}),k=cs(),D=U.useContext($d),{navigator:G,basename:W}=U.useContext(Ir),K=D!=null&&xA(C)&&_===!0,te=G.encodeLocation?G.encodeLocation(C).pathname:C.pathname,se=k.pathname,Z=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(se=se.toLowerCase(),Z=Z?Z.toLowerCase():null,te=te.toLowerCase()),Z&&W&&(Z=uo(Z,W)||Z);const ue=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let _e=se===te||!l&&se.startsWith(te)&&se.charAt(ue)==="/",Se=Z!=null&&(Z===te||!l&&Z.startsWith(te)&&Z.charAt(te.length)==="/"),V={isActive:_e,isPending:Se,isTransitioning:K},P=_e?e:void 0,I;typeof s=="function"?I=s(V):I=[s,_e?"active":null,Se?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let z=typeof h=="function"?h(V):h;return U.createElement(fn,{...b,"aria-current":P,className:I,ref:A,style:z,to:f,viewTransition:_},typeof y=="function"?y(V):y)});gA.displayName="NavLink";var _A=U.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:l,state:h,method:f=fd,action:_,onSubmit:y,relative:b,preventScrollReset:A,viewTransition:C,...k},D)=>{let G=wA(),W=TA(_,{relative:b}),K=f.toLowerCase()==="get"?"get":"post",te=typeof _=="string"&&vE.test(_),se=Z=>{if(y&&y(Z),Z.defaultPrevented)return;Z.preventDefault();let ue=Z.nativeEvent.submitter,_e=(ue==null?void 0:ue.getAttribute("formmethod"))||f;G(ue||Z.currentTarget,{fetcherKey:e,method:_e,navigate:t,replace:l,state:h,relative:b,preventScrollReset:A,viewTransition:C})};return U.createElement("form",{ref:D,method:K,action:W,onSubmit:s?y:se,...k,"data-discover":!te&&i==="render"?"true":void 0})});_A.displayName="Form";function yA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bE(i){let e=U.useContext(wu);return Dt(e,yA(i)),e}function vA(i,{target:e,replace:t,state:s,preventScrollReset:l,relative:h,viewTransition:f}={}){let _=ml(),y=cs(),b=Zc(i,{relative:h});return U.useCallback(A=>{if(WS(A,e)){A.preventDefault();let C=t!==void 0?t:Dc(y)===Dc(b);_(i,{replace:C,state:s,preventScrollReset:l,relative:h,viewTransition:f})}},[y,_,b,t,s,e,i,l,h,f])}var bA=0,EA=()=>`__${String(++bA)}__`;function wA(){let{router:i}=bE("useSubmit"),{basename:e}=U.useContext(Ir),t=US();return U.useCallback(async(s,l={})=>{let{action:h,method:f,encType:_,formData:y,body:b}=JS(s,e);if(l.navigate===!1){let A=l.fetcherKey||EA();await i.fetch(A,t,l.action||h,{preventScrollReset:l.preventScrollReset,formData:y,body:b,formMethod:l.method||f,formEncType:l.encType||_,flushSync:l.flushSync})}else await i.navigate(l.action||h,{preventScrollReset:l.preventScrollReset,formData:y,body:b,formMethod:l.method||f,formEncType:l.encType||_,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[i,e,t])}function TA(i,{relative:e}={}){let{basename:t}=U.useContext(Ir),s=U.useContext(Nr);Dt(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),h={...Zc(i||".",{relative:e})},f=cs();if(i==null){h.search=f.search;let _=new URLSearchParams(h.search),y=_.getAll("index");if(y.some(A=>A==="")){_.delete("index"),y.filter(C=>C).forEach(C=>_.append("index",C));let A=_.toString();h.search=A?`?${A}`:""}}return(!i||i===".")&&l.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(h.pathname=h.pathname==="/"?t:Ws([t,h.pathname])),Dc(h)}function xA(i,e={}){let t=U.useContext(hE);Dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=bE("useViewTransitionState"),l=Zc(i,{relative:e.relative});if(!t.isTransitioning)return!1;let h=uo(t.currentLocation.pathname,s)||t.currentLocation.pathname,f=uo(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Ad(l.pathname,f)!=null||Ad(l.pathname,h)!=null}new TextEncoder;var SA=aE();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EE=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=U.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:h,iconNode:f,..._},y)=>U.createElement("svg",{ref:y,...RA,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:EE("lucide",l),..._},[...f.map(([b,A])=>U.createElement(b,A)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=(i,e)=>{const t=U.forwardRef(({className:s,...l},h)=>U.createElement(CA,{ref:h,iconNode:e,className:EE(`lucide-${AA(i)}`,s),...l}));return t.displayName=`${i}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wE=ht("ArrowLeft",IA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],w0=ht("Bell",NA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],kA=ht("Bus",PA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],DA=ht("Camera",OA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],MA=ht("ChevronDown",LA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rd=ht("CircleHelp",VA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],TE=ht("CirclePlus",jA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],nl=ht("Clock",zA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],pp=ht("CreditCard",UA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Mp=ht("EyeOff",BA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vp=ht("Eye",HA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],T0=ht("House",qA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gp=ht("LoaderCircle",FA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jp=ht("Lock",GA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],KA=ht("LogIn",ZA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],zp=ht("LogOut",$A);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Up=ht("Mail",QA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zs=ht("MapPin",WA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],Ya=ht("MapPinned",YA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],x0=ht("Map",XA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],eR=ht("Menu",JA);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],_p=ht("MessageSquare",tR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],xE=ht("PenLine",nR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],rR=ht("Route",iR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],aR=ht("Send",sR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S0=ht("Settings",oR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SE=ht("ShieldCheck",lR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cR=ht("SquarePen",uR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],AE=ht("Trash2",hR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],fR=ht("UserCheck",dR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bp=ht("User",mR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],RE=ht("Users",pR);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hp=ht("X",gR),_R=()=>{};var A0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let l=i.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},yR=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const l=i[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=i[t++];e[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=i[t++],f=i[t++],_=i[t++],y=((l&7)<<18|(h&63)<<12|(f&63)<<6|_&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const h=i[t++],f=i[t++];e[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|f&63)}}return e.join("")},IE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<i.length;l+=3){const h=i[l],f=l+1<i.length,_=f?i[l+1]:0,y=l+2<i.length,b=y?i[l+2]:0,A=h>>2,C=(h&3)<<4|_>>4;let k=(_&15)<<2|b>>6,D=b&63;y||(D=64,f||(k=64)),s.push(t[A],t[C],t[k],t[D])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(CE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):yR(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<i.length;){const h=t[i.charAt(l++)],_=l<i.length?t[i.charAt(l)]:0;++l;const b=l<i.length?t[i.charAt(l)]:64;++l;const C=l<i.length?t[i.charAt(l)]:64;if(++l,h==null||_==null||b==null||C==null)throw new vR;const k=h<<2|_>>4;if(s.push(k),b!==64){const D=_<<4&240|b>>2;if(s.push(D),C!==64){const G=b<<6&192|C;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class vR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bR=function(i){const e=CE(i);return IE.encodeByteArray(e,!0)},Rd=function(i){return bR(i).replace(/\./g,"")},NE=function(i){try{return IE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=()=>ER().__FIREBASE_DEFAULTS__,TR=()=>{if(typeof process>"u"||typeof A0>"u")return;const i=A0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},xR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&NE(i[1]);return e&&JSON.parse(e)},Wd=()=>{try{return _R()||wR()||TR()||xR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},PE=i=>{var e,t;return(t=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},kE=i=>{const e=PE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},OE=()=>{var i;return(i=Wd())===null||i===void 0?void 0:i.config},DE=i=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",l=i.iat||0,h=i.sub||i.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Rd(JSON.stringify(t)),Rd(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function RR(){var i;const e=(i=Wd())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IR(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function NR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PR(){const i=Wn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function kR(){return!RR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OR(){try{return typeof indexedDB=="object"}catch{return!1}}function DR(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var h;e(((h=l.error)===null||h===void 0?void 0:h.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="FirebaseError";class hs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=LR,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kc.prototype.create)}}class Kc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,h=this.errors[e],f=h?MR(h,s):"Error",_=`${this.serviceName}: ${f} (${l}).`;return new hs(l,_,s)}}function MR(i,e){return i.replace(VR,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const VR=/\{\$([^}]+)}/g;function jR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ol(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const h=i[l],f=e[l];if(R0(h)&&R0(f)){if(!ol(h,f))return!1}else if(h!==f)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function R0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ec(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,h]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(h)}}),e}function wc(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function zR(i,e){const t=new UR(i,e);return t.subscribe.bind(t)}class UR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");BR(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=yp),l.error===void 0&&(l.error=yp),l.complete===void 0&&(l.complete=yp);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BR(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function yp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(i){return i&&i._delegate?i._delegate:i}class co{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new SR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(h){if(l)return null;throw h}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FR(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[h,f]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(h);s===_&&f.resolve(l)}return l}onInit(e,t){var s;const l=this.normalizeInstanceIdentifier(t),h=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;h.add(e),this.onInitCallbacks.set(l,h);const f=this.instances.get(l);return f&&e(f,l),()=>{h.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qR(i){return i===il?void 0:i}function FR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(it||(it={}));const ZR={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},KR=it.INFO,$R={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},QR=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),l=$R[e];if(l)console[l](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=KR,this._logHandler=QR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const WR=(i,e)=>e.some(t=>i instanceof t);let C0,I0;function YR(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XR(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,qp=new WeakMap,VE=new WeakMap,vp=new WeakMap,Ag=new WeakMap;function JR(i){const e=new Promise((t,s)=>{const l=()=>{i.removeEventListener("success",h),i.removeEventListener("error",f)},h=()=>{t(so(i.result)),l()},f=()=>{s(i.error),l()};i.addEventListener("success",h),i.addEventListener("error",f)});return e.then(t=>{t instanceof IDBCursor&&ME.set(t,i)}).catch(()=>{}),Ag.set(e,i),e}function eC(i){if(qp.has(i))return;const e=new Promise((t,s)=>{const l=()=>{i.removeEventListener("complete",h),i.removeEventListener("error",f),i.removeEventListener("abort",f)},h=()=>{t(),l()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",h),i.addEventListener("error",f),i.addEventListener("abort",f)});qp.set(i,e)}let Fp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return qp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||VE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return so(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function tC(i){Fp=i(Fp)}function nC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(bp(this),e,...t);return VE.set(s,e.sort?e.sort():[e]),so(s)}:XR().includes(i)?function(...e){return i.apply(bp(this),e),so(ME.get(this))}:function(...e){return so(i.apply(bp(this),e))}}function iC(i){return typeof i=="function"?nC(i):(i instanceof IDBTransaction&&eC(i),WR(i,YR())?new Proxy(i,Fp):i)}function so(i){if(i instanceof IDBRequest)return JR(i);if(vp.has(i))return vp.get(i);const e=iC(i);return e!==i&&(vp.set(i,e),Ag.set(e,i)),e}const bp=i=>Ag.get(i);function rC(i,e,{blocked:t,upgrade:s,blocking:l,terminated:h}={}){const f=indexedDB.open(i,e),_=so(f);return s&&f.addEventListener("upgradeneeded",y=>{s(so(f.result),y.oldVersion,y.newVersion,so(f.transaction),y)}),t&&f.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),_.then(y=>{h&&y.addEventListener("close",()=>h()),l&&y.addEventListener("versionchange",b=>l(b.oldVersion,b.newVersion,b))}).catch(()=>{}),_}const sC=["get","getKey","getAll","getAllKeys","count"],aC=["put","add","delete","clear"],Ep=new Map;function N0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=aC.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||sC.includes(t)))return;const h=async function(f,..._){const y=this.transaction(f,l?"readwrite":"readonly");let b=y.store;return s&&(b=b.index(_.shift())),(await Promise.all([b[t](..._),l&&y.done]))[0]};return Ep.set(e,h),h}tC(i=>({...i,get:(e,t,s)=>N0(e,t)||i.get(e,t,s),has:(e,t)=>!!N0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lC(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function lC(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gp="@firebase/app",P0="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Sg("@firebase/app"),uC="@firebase/app-compat",cC="@firebase/analytics-compat",hC="@firebase/analytics",dC="@firebase/app-check-compat",fC="@firebase/app-check",mC="@firebase/auth",pC="@firebase/auth-compat",gC="@firebase/database",_C="@firebase/data-connect",yC="@firebase/database-compat",vC="@firebase/functions",bC="@firebase/functions-compat",EC="@firebase/installations",wC="@firebase/installations-compat",TC="@firebase/messaging",xC="@firebase/messaging-compat",SC="@firebase/performance",AC="@firebase/performance-compat",RC="@firebase/remote-config",CC="@firebase/remote-config-compat",IC="@firebase/storage",NC="@firebase/storage-compat",PC="@firebase/firestore",kC="@firebase/vertexai",OC="@firebase/firestore-compat",DC="firebase",LC="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="[DEFAULT]",MC={[Gp]:"fire-core",[uC]:"fire-core-compat",[hC]:"fire-analytics",[cC]:"fire-analytics-compat",[fC]:"fire-app-check",[dC]:"fire-app-check-compat",[mC]:"fire-auth",[pC]:"fire-auth-compat",[gC]:"fire-rtdb",[_C]:"fire-data-connect",[yC]:"fire-rtdb-compat",[vC]:"fire-fn",[bC]:"fire-fn-compat",[EC]:"fire-iid",[wC]:"fire-iid-compat",[TC]:"fire-fcm",[xC]:"fire-fcm-compat",[SC]:"fire-perf",[AC]:"fire-perf-compat",[RC]:"fire-rc",[CC]:"fire-rc-compat",[IC]:"fire-gcs",[NC]:"fire-gcs-compat",[PC]:"fire-fst",[OC]:"fire-fst-compat",[kC]:"fire-vertex","fire-js":"fire-js",[DC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,VC=new Map,Kp=new Map;function k0(i,e){try{i.container.addComponent(e)}catch(t){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ll(i){const e=i.name;if(Kp.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;Kp.set(e,i);for(const t of Cd.values())k0(t,i);for(const t of VC.values())k0(t,i);return!0}function Yd(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ui(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new Kc("app","Firebase",jC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=LC;function jE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Zp,automaticDataCollectionEnabled:!1},e),l=s.name;if(typeof l!="string"||!l)throw ao.create("bad-app-name",{appName:String(l)});if(t||(t=OE()),!t)throw ao.create("no-options");const h=Cd.get(l);if(h){if(ol(t,h.options)&&ol(s,h.config))return h;throw ao.create("duplicate-app",{appName:l})}const f=new GR(l);for(const y of Kp.values())f.addComponent(y);const _=new zC(t,s,f);return Cd.set(l,_),_}function Rg(i=Zp){const e=Cd.get(i);if(!e&&i===Zp&&OE())return jE();if(!e)throw ao.create("no-app",{appName:i});return e}function is(i,e,t){var s;let l=(s=MC[i])!==null&&s!==void 0?s:i;t&&(l+=`-${t}`);const h=l.match(/\s|\//),f=e.match(/\s|\//);if(h||f){const _=[`Unable to register library "${l}" with version "${e}":`];h&&_.push(`library name "${l}" contains illegal characters (whitespace or "/")`),h&&f&&_.push("and"),f&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(_.join(" "));return}ll(new co(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="firebase-heartbeat-database",BC=1,Lc="firebase-heartbeat-store";let wp=null;function zE(){return wp||(wp=rC(UC,BC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Lc)}catch(t){console.warn(t)}}}}).catch(i=>{throw ao.create("idb-open",{originalErrorMessage:i.message})})),wp}async function HC(i){try{const t=(await zE()).transaction(Lc),s=await t.objectStore(Lc).get(UE(i));return await t.done,s}catch(e){if(e instanceof hs)Js.warn(e.message);else{const t=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Js.warn(t.message)}}}async function O0(i,e){try{const s=(await zE()).transaction(Lc,"readwrite");await s.objectStore(Lc).put(e,UE(i)),await s.done}catch(t){if(t instanceof hs)Js.warn(t.message);else{const s=ao.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Js.warn(s.message)}}}function UE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=1024,FC=30;class GC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=D0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(f=>f.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:l}),this._heartbeatsCache.heartbeats.length>FC){const f=$C(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Js.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D0(),{heartbeatsToSend:s,unsentEntries:l}=ZC(this._heartbeatsCache.heartbeats),h=Rd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(t){return Js.warn(t),""}}}function D0(){return new Date().toISOString().substring(0,10)}function ZC(i,e=qC){const t=[];let s=i.slice();for(const l of i){const h=t.find(f=>f.agent===l.agent);if(h){if(h.dates.push(l.date),L0(t)>e){h.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),L0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class KC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OR()?DR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const l=await this.read();return O0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const l=await this.read();return O0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function L0(i){return Rd(JSON.stringify({version:2,heartbeats:i})).length}function $C(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(i){ll(new co("platform-logger",e=>new oC(e),"PRIVATE")),ll(new co("heartbeat",e=>new GC(e),"PRIVATE")),is(Gp,P0,i),is(Gp,P0,"esm2017"),is("fire-js","")}QC("");function Cg(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(i);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(i,s[l])&&(t[s[l]]=i[s[l]]);return t}function BE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WC=BE,HE=new Kc("auth","Firebase",BE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Sg("@firebase/auth");function YC(i,...e){Id.logLevel<=it.WARN&&Id.warn(`Auth (${pl}): ${i}`,...e)}function pd(i,...e){Id.logLevel<=it.ERROR&&Id.error(`Auth (${pl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(i,...e){throw Ig(i,...e)}function rs(i,...e){return Ig(i,...e)}function qE(i,e,t){const s=Object.assign(Object.assign({},WC()),{[e]:t});return new Kc("auth","Firebase",s).create(e,{appName:i.name})}function Ys(i){return qE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return HE.create(i,...e)}function Le(i,e,...t){if(!i)throw Ig(e,...t)}function Ks(i){const e="INTERNAL ASSERTION FAILED: "+i;throw pd(e),new Error(e)}function ea(i,e){i||Ks(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function XC(){return M0()==="http:"||M0()==="https:"}function M0(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XC()||IR()||"connection"in navigator)?navigator.onLine:!0}function e2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ea(t>e,"Short delay should be less than long delay!"),this.isMobile=AR()||NR()}get(){return JC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(i,e){ea(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Qc(3e4,6e4);function ds(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Pr(i,e,t,s,l={}){return GE(i,l,async()=>{let h={},f={};s&&(e==="GET"?f=s:h={body:JSON.stringify(s)});const _=$c(Object.assign({key:i.config.apiKey},f)).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const b=Object.assign({method:e,headers:y},h);return CR()||(b.referrerPolicy="no-referrer"),FE.fetch()(ZE(i,i.config.apiHost,t,_),b)})}async function GE(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},t2),e);try{const l=new r2(i),h=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const f=await h.json();if("needConfirmation"in f)throw sd(i,"account-exists-with-different-credential",f);if(h.ok&&!("errorMessage"in f))return f;{const _=h.ok?f.errorMessage:f.error.message,[y,b]=_.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw sd(i,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw sd(i,"email-already-in-use",f);if(y==="USER_DISABLED")throw sd(i,"user-disabled",f);const A=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw qE(i,A,b);lr(i,A)}}catch(l){if(l instanceof hs)throw l;lr(i,"network-request-failed",{message:String(l)})}}async function Wc(i,e,t,s,l={}){const h=await Pr(i,e,t,s,l);return"mfaPendingCredential"in h&&lr(i,"multi-factor-auth-required",{_serverResponse:h}),h}function ZE(i,e,t,s){const l=`${e}${t}?${s}`;return i.config.emulator?Ng(i.config,l):`${i.config.apiScheme}://${l}`}function i2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class r2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(rs(this.auth,"network-request-failed")),n2.get())})}}function sd(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=rs(i,e,s);return l.customData._tokenResponse=t,l}function V0(i){return i!==void 0&&i.enterprise!==void 0}class s2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return i2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function a2(i,e){return Pr(i,"GET","/v2/recaptchaConfig",ds(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(i,e){return Pr(i,"POST","/v1/accounts:delete",e)}async function KE(i,e){return Pr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l2(i,e=!1){const t=It(i),s=await t.getIdToken(e),l=Pg(s);Le(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,f=h==null?void 0:h.sign_in_provider;return{claims:l,token:s,authTime:Cc(Tp(l.auth_time)),issuedAtTime:Cc(Tp(l.iat)),expirationTime:Cc(Tp(l.exp)),signInProvider:f||null,signInSecondFactor:(h==null?void 0:h.sign_in_second_factor)||null}}function Tp(i){return Number(i)*1e3}function Pg(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return pd("JWT malformed, contained fewer than 3 sections"),null;try{const l=NE(t);return l?JSON.parse(l):(pd("Failed to decode base64 JWT payload"),null)}catch(l){return pd("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function j0(i){const e=Pg(i);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof hs&&u2(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function u2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(i){var e;const t=i.auth,s=await i.getIdToken(),l=await fu(i,KE(t,{idToken:s}));Le(l==null?void 0:l.users.length,t,"internal-error");const h=l.users[0];i._notifyReloadListener(h);const f=!((e=h.providerUserInfo)===null||e===void 0)&&e.length?$E(h.providerUserInfo):[],_=d2(i.providerData,f),y=i.isAnonymous,b=!(i.email&&h.passwordHash)&&!(_!=null&&_.length),A=y?b:!1,C={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:_,metadata:new Qp(h.createdAt,h.lastLoginAt),isAnonymous:A};Object.assign(i,C)}async function h2(i){const e=It(i);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d2(i,e){return[...i.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function $E(i){return i.map(e=>{var{providerId:t}=e,s=Cg(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(i,e){const t=await GE(i,{},async()=>{const s=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:h}=i.config,f=ZE(i,l,"/v1/token",`key=${h}`),_=await i._getAdditionalHeaders();return _["Content-Type"]="application/x-www-form-urlencoded",FE.fetch()(f,{method:"POST",headers:_,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function m2(i,e){return Pr(i,"POST","/v2/accounts:revokeToken",ds(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=j0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:h}=await f2(e,t);this.updateTokensAndExpiration(s,l,Number(h))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:h}=t,f=new uu;return s&&(Le(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(Le(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),h&&(Le(typeof h=="number","internal-error",{appName:e}),f.expirationTime=h),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uu,this.toJSON())}_performRefresh(){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(i,e){Le(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class $s{constructor(e){var{uid:t,auth:s,stsTokenManager:l}=e,h=Cg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new Qp(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const t=await fu(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return l2(this,e)}reload(){return h2(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $s(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Nd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ui(this.auth.app))return Promise.reject(Ys(this.auth));const e=await this.getIdToken();return await fu(this,o2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,l,h,f,_,y,b,A;const C=(s=t.displayName)!==null&&s!==void 0?s:void 0,k=(l=t.email)!==null&&l!==void 0?l:void 0,D=(h=t.phoneNumber)!==null&&h!==void 0?h:void 0,G=(f=t.photoURL)!==null&&f!==void 0?f:void 0,W=(_=t.tenantId)!==null&&_!==void 0?_:void 0,K=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,te=(b=t.createdAt)!==null&&b!==void 0?b:void 0,se=(A=t.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:Z,emailVerified:ue,isAnonymous:_e,providerData:Se,stsTokenManager:V}=t;Le(Z&&V,e,"internal-error");const P=uu.fromJSON(this.name,V);Le(typeof Z=="string",e,"internal-error"),Xa(C,e.name),Xa(k,e.name),Le(typeof ue=="boolean",e,"internal-error"),Le(typeof _e=="boolean",e,"internal-error"),Xa(D,e.name),Xa(G,e.name),Xa(W,e.name),Xa(K,e.name),Xa(te,e.name),Xa(se,e.name);const I=new $s({uid:Z,auth:e,email:k,emailVerified:ue,displayName:C,isAnonymous:_e,photoURL:G,phoneNumber:D,tenantId:W,stsTokenManager:P,createdAt:te,lastLoginAt:se});return Se&&Array.isArray(Se)&&(I.providerData=Se.map(z=>Object.assign({},z))),K&&(I._redirectEventId=K),I}static async _fromIdTokenResponse(e,t,s=!1){const l=new uu;l.updateFromServerResponse(t);const h=new $s({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Nd(h),h}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Le(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?$E(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(h!=null&&h.length),_=new uu;_.updateFromIdToken(s);const y=new $s({uid:l.localId,auth:e,stsTokenManager:_,isAnonymous:f}),b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Qp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(h!=null&&h.length)};return Object.assign(y,b),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Map;function Qs(i){ea(i instanceof Function,"Expected a class definition");let e=z0.get(i);return e?(ea(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,z0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QE.type="NONE";const U0=QE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(i,e,t){return`firebase:${i}:${e}:${t}`}class cu{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:h}=this.auth;this.fullUserKey=gd(this.userKey,l.apiKey,h),this.fullPersistenceKey=gd("persistence",l.apiKey,h),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$s._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new cu(Qs(U0),e,s);const l=(await Promise.all(t.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let h=l[0]||Qs(U0);const f=gd(s,e.config.apiKey,e.name);let _=null;for(const b of t)try{const A=await b._get(f);if(A){const C=$s._fromJSON(e,A);b!==h&&(_=C),h=b;break}}catch{}const y=l.filter(b=>b._shouldAllowMigration);return!h._shouldAllowMigration||!y.length?new cu(h,e,s):(h=y[0],_&&await h._set(f,_.toJSON()),await Promise.all(t.map(async b=>{if(b!==h)try{await b._remove(f)}catch{}})),new cu(h,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tw(e))return"Blackberry";if(nw(e))return"Webos";if(YE(e))return"Safari";if((e.includes("chrome/")||XE(e))&&!e.includes("edge/"))return"Chrome";if(ew(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function WE(i=Wn()){return/firefox\//i.test(i)}function YE(i=Wn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XE(i=Wn()){return/crios\//i.test(i)}function JE(i=Wn()){return/iemobile/i.test(i)}function ew(i=Wn()){return/android/i.test(i)}function tw(i=Wn()){return/blackberry/i.test(i)}function nw(i=Wn()){return/webos/i.test(i)}function kg(i=Wn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function p2(i=Wn()){var e;return kg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g2(){return PR()&&document.documentMode===10}function iw(i=Wn()){return kg(i)||ew(i)||nw(i)||tw(i)||/windows phone/i.test(i)||JE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(i,e=[]){let t;switch(i){case"Browser":t=B0(Wn());break;case"Worker":t=`${B0(Wn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=h=>new Promise((f,_)=>{try{const y=e(h);f(y)}catch(y){_(y)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(i,e={}){return Pr(i,"GET","/v2/passwordPolicy",ds(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=6;class b2{constructor(e){var t,s,l,h;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=f.minPasswordLength)!==null&&t!==void 0?t:v2,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(h=e.forceUpgradeOnSignin)!==null&&h!==void 0?h:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,l,h,f,_;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(s=y.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),y.isValid&&(y.isValid=(l=y.containsLowercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(h=y.containsUppercaseLetter)!==null&&h!==void 0?h:!0),y.isValid&&(y.isValid=(f=y.containsNumericCharacter)!==null&&f!==void 0?f:!0),y.isValid&&(y.isValid=(_=y.containsNonAlphanumericCharacter)!==null&&_!==void 0?_:!0),y}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H0(this),this.idTokenSubscription=new H0(this),this.beforeStateQueue=new _2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qs(t)),this._initializationPromise=this.queue(async()=>{var s,l;if(!this._deleted&&(this.persistenceManager=await cu.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await KE(this,{idToken:e}),s=await $s._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ui(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(_,_))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,_=l==null?void 0:l._redirectEventId,y=await this.tryRedirectSignIn(e);(!f||f===_)&&(y!=null&&y.user)&&(l=y.user,h=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(l)}catch(f){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ui(this.app))return Promise.reject(Ys(this));const t=e?It(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ui(this.app)?Promise.reject(Ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ui(this.app)?Promise.reject(Ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y2(this),t=new b2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await m2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qs(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await cu.create(this,[Qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const h=typeof t=="function"?t:t.next.bind(t);let f=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(_,this,"internal-error"),_.then(()=>{f||h(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,s,l);return()=>{f=!0,y()}}else{const y=e.addObserver(t);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(t["X-Firebase-AppCheck"]=l),t}async _getAppCheckToken(){var e;if(Ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&YC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ra(i){return It(i)}class H0{constructor(e){this.auth=e,this.observer=null,this.addObserver=zR(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w2(i){Xd=i}function sw(i){return Xd.loadJS(i)}function T2(){return Xd.recaptchaEnterpriseScript}function x2(){return Xd.gapiScript}function S2(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class A2{constructor(){this.enterprise=new R2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class R2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const C2="recaptcha-enterprise",aw="NO_RECAPTCHA";class I2{constructor(e){this.type=C2,this.auth=ra(e)}async verify(e="verify",t=!1){async function s(h){if(!t){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(f,_)=>{a2(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const b=new s2(y);return h.tenantId==null?h._agentRecaptchaConfig=b:h._tenantRecaptchaConfigs[h.tenantId]=b,f(b.siteKey)}}).catch(y=>{_(y)})})}function l(h,f,_){const y=window.grecaptcha;V0(y)?y.enterprise.ready(()=>{y.enterprise.execute(h,{action:e}).then(b=>{f(b)}).catch(()=>{f(aw)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new A2().execute("siteKey",{action:"verify"}):new Promise((h,f)=>{s(this.auth).then(_=>{if(!t&&V0(window.grecaptcha))l(_,h,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=T2();y.length!==0&&(y+=_),sw(y).then(()=>{l(_,h,f)}).catch(b=>{f(b)})}}).catch(_=>{f(_)})})}}async function q0(i,e,t,s=!1,l=!1){const h=new I2(i);let f;if(l)f=aw;else try{f=await h.verify(t)}catch{f=await h.verify(t,!0)}const _=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _){const y=_.phoneEnrollmentInfo.phoneNumber,b=_.phoneEnrollmentInfo.recaptchaToken;Object.assign(_,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _){const y=_.phoneSignInInfo.recaptchaToken;Object.assign(_,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _}return s?Object.assign(_,{captchaResp:f}):Object.assign(_,{captchaResponse:f}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function Pd(i,e,t,s,l){var h;if(!((h=i._getRecaptchaConfig())===null||h===void 0)&&h.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await q0(i,e,t,t==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await q0(i,e,t,t==="getOobCode");return s(i,_)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(i,e){const t=Yd(i,"auth");if(t.isInitialized()){const l=t.getImmediate(),h=t.getOptions();if(ol(h,e??{}))return l;lr(l,"already-initialized")}return t.initialize({options:e})}function P2(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Qs);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function k2(i,e,t){const s=ra(i);Le(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,h=ow(e),{host:f,port:_}=O2(e),y=_===null?"":`:${_}`,b={url:`${h}//${f}${y}/`},A=Object.freeze({host:f,port:_,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Le(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Le(ol(b,s.config.emulator)&&ol(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,D2()}function ow(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function O2(i){const e=ow(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const h=l[1];return{host:h,port:F0(s.substr(h.length+1))}}else{const[h,f]=s.split(":");return{host:h,port:F0(f)}}}function F0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function D2(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ks("not implemented")}_getIdTokenResponse(e){return Ks("not implemented")}_linkToIdToken(e,t){return Ks("not implemented")}_getReauthenticationResolver(e){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(i,e){return Pr(i,"POST","/v1/accounts:resetPassword",ds(i,e))}async function L2(i,e){return Pr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(i,e){return Wc(i,"POST","/v1/accounts:signInWithPassword",ds(i,e))}async function V2(i,e){return Pr(i,"POST","/v1/accounts:sendOobCode",ds(i,e))}async function j2(i,e){return V2(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(i,e){return Wc(i,"POST","/v1/accounts:signInWithEmailLink",ds(i,e))}async function U2(i,e){return Wc(i,"POST","/v1/accounts:signInWithEmailLink",ds(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Og{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new Mc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Mc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pd(e,t,"signInWithPassword",M2);case"emailLink":return z2(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pd(e,s,"signUpPassword",L2);case"emailLink":return U2(e,{idToken:t,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(i,e){return Wc(i,"POST","/v1/accounts:signInWithIdp",ds(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="http://localhost";class ul extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ul(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=t,h=Cg(t,["providerId","signInMethod"]);if(!s||!l)return null;const f=new ul(s,l);return f.idToken=h.idToken||void 0,f.accessToken=h.accessToken||void 0,f.secret=h.secret,f.nonce=h.nonce,f.pendingToken=h.pendingToken||null,f}_getIdTokenResponse(e){const t=this.buildRequest();return hu(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,hu(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hu(e,t)}buildRequest(){const e={requestUri:B2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function q2(i){const e=Ec(wc(i)).link,t=e?Ec(wc(e)).deep_link_id:null,s=Ec(wc(i)).deep_link_id;return(s?Ec(wc(s)).link:null)||s||t||e||i}class Dg{constructor(e){var t,s,l,h,f,_;const y=Ec(wc(e)),b=(t=y.apiKey)!==null&&t!==void 0?t:null,A=(s=y.oobCode)!==null&&s!==void 0?s:null,C=H2((l=y.mode)!==null&&l!==void 0?l:null);Le(b&&A&&C,"argument-error"),this.apiKey=b,this.operation=C,this.code=A,this.continueUrl=(h=y.continueUrl)!==null&&h!==void 0?h:null,this.languageCode=(f=y.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(_=y.tenantId)!==null&&_!==void 0?_:null}static parseLink(e){const t=q2(e);try{return new Dg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.providerId=xu.PROVIDER_ID}static credential(e,t){return Mc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Dg.parseLink(t);return Le(s,"argument-error"),Mc._fromEmailAndCode(e,s.code,s.tenantId)}}xu.PROVIDER_ID="password";xu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends uw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Yc{constructor(){super("facebook.com")}static credential(e){return ul._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ja.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Yc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ul._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return eo.credential(t,s)}catch{return null}}}eo.GOOGLE_SIGN_IN_METHOD="google.com";eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Yc{constructor(){super("github.com")}static credential(e){return ul._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Yc{constructor(){super("twitter.com")}static credential(e,t){return ul._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return no.credential(t,s)}catch{return null}}}no.TWITTER_SIGN_IN_METHOD="twitter.com";no.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(i,e){return Wc(i,"POST","/v1/accounts:signUp",ds(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const h=await $s._fromIdTokenResponse(e,s,l),f=G0(s);return new cl({user:h,providerId:f,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=G0(s);return new cl({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function G0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends hs{constructor(e,t,s,l){var h;super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:(h=e.tenantId)!==null&&h!==void 0?h:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new kd(e,t,s,l)}}function cw(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(i,h,e,s):h})}async function G2(i,e,t=!1){const s=await fu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return cl._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(i,e,t=!1){const{auth:s}=i;if(Ui(s.app))return Promise.reject(Ys(s));const l="reauthenticate";try{const h=await fu(i,cw(s,l,e,i),t);Le(h.idToken,s,"internal-error");const f=Pg(h.idToken);Le(f,s,"internal-error");const{sub:_}=f;return Le(i.uid===_,s,"user-mismatch"),cl._forOperation(i,l,h)}catch(h){throw(h==null?void 0:h.code)==="auth/user-not-found"&&lr(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(i,e,t=!1){if(Ui(i.app))return Promise.reject(Ys(i));const s="signIn",l=await cw(i,s,e),h=await cl._fromIdTokenResponse(i,s,l);return t||await i._updateCurrentUser(h.user),h}async function K2(i,e){return hw(ra(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Mg._fromServerResponse(e,t):"totpInfo"in t?Vg._fromServerResponse(e,t):lr(e,"internal-error")}}class Mg extends Lg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Mg(t)}}class Vg extends Lg{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Vg(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jg(i){const e=ra(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $2(i,e,t){const s=ra(i);await Pd(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",j2)}async function Q2(i,e,t){await lw(It(i),{oobCode:e,newPassword:t}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jg(i),s})}async function W2(i,e){const t=It(i),s=await lw(t,{oobCode:e}),l=s.requestType;switch(Le(l,t,"internal-error"),l){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(s.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(s.mfaInfo,t,"internal-error");default:Le(s.email,t,"internal-error")}let h=null;return s.mfaInfo&&(h=Lg._fromServerResponse(ra(t),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:h},operation:l}}async function Y2(i,e){const{data:t}=await W2(It(i),e);return t.email}async function X2(i,e,t){if(Ui(i.app))return Promise.reject(Ys(i));const s=ra(i),f=await Pd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",F2).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&jg(i),y}),_=await cl._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(_.user),_}function J2(i,e,t){return Ui(i.app)?Promise.reject(Ys(i)):K2(It(i),xu.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jg(i),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(i,e){return Pr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=It(i),h={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},f=await fu(s,eI(s.auth,h));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const _=s.providerData.find(({providerId:y})=>y==="password");_&&(_.displayName=s.displayName,_.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function nI(i,e,t,s){return It(i).onIdTokenChanged(e,t,s)}function iI(i,e,t){return It(i).beforeAuthStateChanged(e,t)}function rI(i,e,t,s){return It(i).onAuthStateChanged(e,t,s)}function sI(i){return It(i).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=1e3,oI=10;class fw extends dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((f,_,y)=>{this.notifyListeners(f,y)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!t&&this.localCache[s]===f||this.notifyListeners(s,f)},h=this.storage.getItem(s);g2()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,oI):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},aI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fw.type="LOCAL";const lI=fw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mw.type="SESSION";const pw=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new Jd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:h}=t.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const _=Array.from(f).map(async b=>b(t.origin,h)),y=await uI(_);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,f;return new Promise((_,y)=>{const b=zg("",20);l.port1.start();const A=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(C){const k=C;if(k.data.eventId===b)switch(k.data.status){case"ack":clearTimeout(A),h=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),_(k.data.response);break;default:clearTimeout(A),clearTimeout(h),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:b,data:t},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return window}function hI(i){ss().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return typeof ss().WorkerGlobalScope<"u"&&typeof ss().importScripts=="function"}async function dI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fI(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function mI(){return gw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",pI=1,Dd="firebaseLocalStorage",yw="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ef(i,e){return i.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function gI(){const i=indexedDB.deleteDatabase(_w);return new Xc(i).toPromise()}function Wp(){const i=indexedDB.open(_w,pI);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Dd,{keyPath:yw})}catch(l){t(l)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Dd)?e(s):(s.close(),await gI(),e(await Wp()))})})}async function Z0(i,e,t){const s=ef(i,!0).put({[yw]:e,value:t});return new Xc(s).toPromise()}async function _I(i,e){const t=ef(i,!1).get(e),s=await new Xc(t).toPromise();return s===void 0?null:s.value}function K0(i,e){const t=ef(i,!0).delete(e);return new Xc(t).toPromise()}const yI=800,vI=3;class vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>vI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jd._getInstance(mI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await dI(),!this.activeServiceWorker)return;this.sender=new cI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wp();return await Z0(e,Od,"1"),await K0(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Z0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>_I(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>K0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const h=ef(l,!1).getAll();return new Xc(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:h}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vw.type="LOCAL";const bI=vw;new Qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(i,e){return e?Qs(e):(Le(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wI(i){return hw(i.auth,new Ug(i),i.bypassAuthState)}function TI(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),Z2(t,new Ug(i),i.bypassAuthState)}async function xI(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),G2(t,new Ug(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t,s,l,h=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:h,error:f,type:_}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:t,sessionId:s,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(y))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wI;case"linkViaPopup":case"linkViaRedirect":return xI;case"reauthViaPopup":case"reauthViaRedirect":return TI;default:lr(this.auth,"internal-error")}}resolve(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=new Qc(2e3,1e4);class au extends bw{constructor(e,t,s,l,h){super(e,t,l,h),this.provider=s,this.authWindow=null,this.pollId=null,au.currentPopupAction&&au.currentPopupAction.cancel(),au.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ea(this.filter.length===1,"Popup operations only handle one event");const e=zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,au.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SI.get())};e()}}au.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="pendingRedirect",_d=new Map;class RI extends bw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const s=await CI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CI(i,e){const t=PI(e),s=NI(i);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function II(i,e){_d.set(i._key(),e)}function NI(i){return Qs(i._redirectPersistence)}function PI(i){return gd(AI,i.config.apiKey,i.name)}async function kI(i,e,t=!1){if(Ui(i.app))return Promise.reject(Ys(i));const s=ra(i),l=EI(s,e),f=await new RI(s,l,t).execute();return f&&!t&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=10*60*1e3;class DI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Ew(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(rs(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OI&&this.cachedEventUids.clear(),this.cachedEventUids.has($0(e))}saveEventToCache(e){this.cachedEventUids.add($0(e)),this.lastProcessedEventTime=Date.now()}}function $0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Ew({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ew(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(i,e={}){return Pr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jI=/^https?/;async function zI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await MI(i);for(const t of e)try{if(UI(t))return}catch{}lr(i,"unauthorized-domain")}function UI(i){const e=$p(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&f.hostname===s}if(!jI.test(t))return!1;if(VI.test(i))return s===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new Qc(3e4,6e4);function Q0(){const i=ss().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function HI(i){return new Promise((e,t)=>{var s,l,h;function f(){Q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q0(),t(rs(i,"network-request-failed"))},timeout:BI.get()})}if(!((l=(s=ss().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((h=ss().gapi)===null||h===void 0)&&h.load)f();else{const _=S2("iframefcb");return ss()[_]=()=>{gapi.load?f():t(rs(i,"network-request-failed"))},sw(`${x2()}?onload=${_}`).catch(y=>t(y))}}).catch(e=>{throw yd=null,e})}let yd=null;function qI(i){return yd=yd||HI(i),yd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Qc(5e3,15e3),GI="__/auth/iframe",ZI="emulator/auth/iframe",KI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$I=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QI(i){const e=i.config;Le(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Ng(e,ZI):`https://${i.config.authDomain}/${GI}`,s={apiKey:e.apiKey,appName:i.name,v:pl},l=$I.get(i.config.apiHost);l&&(s.eid=l);const h=i._getFrameworks();return h.length&&(s.fw=h.join(",")),`${t}?${$c(s).slice(1)}`}async function WI(i){const e=await qI(i),t=ss().gapi;return Le(t,i,"internal-error"),e.open({where:document.body,url:QI(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KI,dontclear:!0},s=>new Promise(async(l,h)=>{await s.restyle({setHideOnLeave:!1});const f=rs(i,"network-request-failed"),_=ss().setTimeout(()=>{h(f)},FI.get());function y(){ss().clearTimeout(_),l(s)}s.ping(y).then(y,()=>{h(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XI=500,JI=600,eN="_blank",tN="http://localhost";class W0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nN(i,e,t,s=XI,l=JI){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let _="";const y=Object.assign(Object.assign({},YI),{width:s.toString(),height:l.toString(),top:h,left:f}),b=Wn().toLowerCase();t&&(_=XE(b)?eN:t),WE(b)&&(e=e||tN,y.scrollbars="yes");const A=Object.entries(y).reduce((k,[D,G])=>`${k}${D}=${G},`,"");if(p2(b)&&_!=="_self")return iN(e||"",_),new W0(null);const C=window.open(e||"",_,A);Le(C,i,"popup-blocked");try{C.focus()}catch{}return new W0(C)}function iN(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="__/auth/handler",sN="emulator/auth/handler",aN=encodeURIComponent("fac");async function Y0(i,e,t,s,l,h){Le(i.config.authDomain,i,"auth-domain-config-required"),Le(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:pl,eventId:l};if(e instanceof uw){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",jR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,C]of Object.entries({}))f[A]=C}if(e instanceof Yc){const A=e.getScopes().filter(C=>C!=="");A.length>0&&(f.scopes=A.join(","))}i.tenantId&&(f.tid=i.tenantId);const _=f;for(const A of Object.keys(_))_[A]===void 0&&delete _[A];const y=await i._getAppCheckToken(),b=y?`#${aN}=${encodeURIComponent(y)}`:"";return`${oN(i)}?${$c(_).slice(1)}${b}`}function oN({config:i}){return i.emulator?Ng(i,sN):`https://${i.authDomain}/${rN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="webStorageSupport";class lN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pw,this._completeRedirectFn=kI,this._overrideRedirectResult=II}async _openPopup(e,t,s,l){var h;ea((h=this.eventManagers[e._key()])===null||h===void 0?void 0:h.manager,"_initialize() not called before _openPopup()");const f=await Y0(e,t,s,$p(),l);return nN(e,f,zg())}async _openRedirect(e,t,s,l){await this._originValidation(e);const h=await Y0(e,t,s,$p(),l);return hI(h),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:h}=this.eventManagers[t];return l?Promise.resolve(l):(ea(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await WI(e),s=new DI(e);return t.register("authEvent",l=>(Le(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xp,{type:xp},l=>{var h;const f=(h=l==null?void 0:l[0])===null||h===void 0?void 0:h[xp];f!==void 0&&t(!!f),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iw()||YE()||kg()}}const uN=lN;var X0="@firebase/auth",J0="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dN(i){ll(new co("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:f,authDomain:_}=s.options;Le(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:_,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rw(i)},b=new E2(s,l,h,y);return P2(b,t),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ll(new co("auth-internal",e=>{const t=ra(e.getProvider("auth").getImmediate());return(s=>new cN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(X0,J0,hN(i)),is(X0,J0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=5*60,mN=DE("authIdTokenMaxAge")||fN;let eb=null;const pN=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>mN)return;const l=t==null?void 0:t.token;eb!==l&&(eb=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function gN(i=Rg()){const e=Yd(i,"auth");if(e.isInitialized())return e.getImmediate();const t=N2(i,{popupRedirectResolver:uN,persistence:[bI,lI,pw]}),s=DE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const f=pN(h.toString());iI(t,f,()=>f(t.currentUser)),nI(t,_=>f(_))}}const l=PE("auth");return l&&k2(t,`http://${l}`),t}function _N(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}w2({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=l=>{const h=rs("internal-error");h.customData=l,t(h)},s.type="text/javascript",s.charset="UTF-8",_N().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dN("Browser");var yN="firebase",vN="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(yN,vN,"app");var tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,ww;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,P){function I(){}I.prototype=P.prototype,V.D=P.prototype,V.prototype=new I,V.prototype.constructor=V,V.C=function(z,M,F){for(var j=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)j[Oe-2]=arguments[Oe];return P.prototype[M].apply(z,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,P,I){I||(I=0);var z=Array(16);if(typeof P=="string")for(var M=0;16>M;++M)z[M]=P.charCodeAt(I++)|P.charCodeAt(I++)<<8|P.charCodeAt(I++)<<16|P.charCodeAt(I++)<<24;else for(M=0;16>M;++M)z[M]=P[I++]|P[I++]<<8|P[I++]<<16|P[I++]<<24;P=V.g[0],I=V.g[1],M=V.g[2];var F=V.g[3],j=P+(F^I&(M^F))+z[0]+3614090360&4294967295;P=I+(j<<7&4294967295|j>>>25),j=F+(M^P&(I^M))+z[1]+3905402710&4294967295,F=P+(j<<12&4294967295|j>>>20),j=M+(I^F&(P^I))+z[2]+606105819&4294967295,M=F+(j<<17&4294967295|j>>>15),j=I+(P^M&(F^P))+z[3]+3250441966&4294967295,I=M+(j<<22&4294967295|j>>>10),j=P+(F^I&(M^F))+z[4]+4118548399&4294967295,P=I+(j<<7&4294967295|j>>>25),j=F+(M^P&(I^M))+z[5]+1200080426&4294967295,F=P+(j<<12&4294967295|j>>>20),j=M+(I^F&(P^I))+z[6]+2821735955&4294967295,M=F+(j<<17&4294967295|j>>>15),j=I+(P^M&(F^P))+z[7]+4249261313&4294967295,I=M+(j<<22&4294967295|j>>>10),j=P+(F^I&(M^F))+z[8]+1770035416&4294967295,P=I+(j<<7&4294967295|j>>>25),j=F+(M^P&(I^M))+z[9]+2336552879&4294967295,F=P+(j<<12&4294967295|j>>>20),j=M+(I^F&(P^I))+z[10]+4294925233&4294967295,M=F+(j<<17&4294967295|j>>>15),j=I+(P^M&(F^P))+z[11]+2304563134&4294967295,I=M+(j<<22&4294967295|j>>>10),j=P+(F^I&(M^F))+z[12]+1804603682&4294967295,P=I+(j<<7&4294967295|j>>>25),j=F+(M^P&(I^M))+z[13]+4254626195&4294967295,F=P+(j<<12&4294967295|j>>>20),j=M+(I^F&(P^I))+z[14]+2792965006&4294967295,M=F+(j<<17&4294967295|j>>>15),j=I+(P^M&(F^P))+z[15]+1236535329&4294967295,I=M+(j<<22&4294967295|j>>>10),j=P+(M^F&(I^M))+z[1]+4129170786&4294967295,P=I+(j<<5&4294967295|j>>>27),j=F+(I^M&(P^I))+z[6]+3225465664&4294967295,F=P+(j<<9&4294967295|j>>>23),j=M+(P^I&(F^P))+z[11]+643717713&4294967295,M=F+(j<<14&4294967295|j>>>18),j=I+(F^P&(M^F))+z[0]+3921069994&4294967295,I=M+(j<<20&4294967295|j>>>12),j=P+(M^F&(I^M))+z[5]+3593408605&4294967295,P=I+(j<<5&4294967295|j>>>27),j=F+(I^M&(P^I))+z[10]+38016083&4294967295,F=P+(j<<9&4294967295|j>>>23),j=M+(P^I&(F^P))+z[15]+3634488961&4294967295,M=F+(j<<14&4294967295|j>>>18),j=I+(F^P&(M^F))+z[4]+3889429448&4294967295,I=M+(j<<20&4294967295|j>>>12),j=P+(M^F&(I^M))+z[9]+568446438&4294967295,P=I+(j<<5&4294967295|j>>>27),j=F+(I^M&(P^I))+z[14]+3275163606&4294967295,F=P+(j<<9&4294967295|j>>>23),j=M+(P^I&(F^P))+z[3]+4107603335&4294967295,M=F+(j<<14&4294967295|j>>>18),j=I+(F^P&(M^F))+z[8]+1163531501&4294967295,I=M+(j<<20&4294967295|j>>>12),j=P+(M^F&(I^M))+z[13]+2850285829&4294967295,P=I+(j<<5&4294967295|j>>>27),j=F+(I^M&(P^I))+z[2]+4243563512&4294967295,F=P+(j<<9&4294967295|j>>>23),j=M+(P^I&(F^P))+z[7]+1735328473&4294967295,M=F+(j<<14&4294967295|j>>>18),j=I+(F^P&(M^F))+z[12]+2368359562&4294967295,I=M+(j<<20&4294967295|j>>>12),j=P+(I^M^F)+z[5]+4294588738&4294967295,P=I+(j<<4&4294967295|j>>>28),j=F+(P^I^M)+z[8]+2272392833&4294967295,F=P+(j<<11&4294967295|j>>>21),j=M+(F^P^I)+z[11]+1839030562&4294967295,M=F+(j<<16&4294967295|j>>>16),j=I+(M^F^P)+z[14]+4259657740&4294967295,I=M+(j<<23&4294967295|j>>>9),j=P+(I^M^F)+z[1]+2763975236&4294967295,P=I+(j<<4&4294967295|j>>>28),j=F+(P^I^M)+z[4]+1272893353&4294967295,F=P+(j<<11&4294967295|j>>>21),j=M+(F^P^I)+z[7]+4139469664&4294967295,M=F+(j<<16&4294967295|j>>>16),j=I+(M^F^P)+z[10]+3200236656&4294967295,I=M+(j<<23&4294967295|j>>>9),j=P+(I^M^F)+z[13]+681279174&4294967295,P=I+(j<<4&4294967295|j>>>28),j=F+(P^I^M)+z[0]+3936430074&4294967295,F=P+(j<<11&4294967295|j>>>21),j=M+(F^P^I)+z[3]+3572445317&4294967295,M=F+(j<<16&4294967295|j>>>16),j=I+(M^F^P)+z[6]+76029189&4294967295,I=M+(j<<23&4294967295|j>>>9),j=P+(I^M^F)+z[9]+3654602809&4294967295,P=I+(j<<4&4294967295|j>>>28),j=F+(P^I^M)+z[12]+3873151461&4294967295,F=P+(j<<11&4294967295|j>>>21),j=M+(F^P^I)+z[15]+530742520&4294967295,M=F+(j<<16&4294967295|j>>>16),j=I+(M^F^P)+z[2]+3299628645&4294967295,I=M+(j<<23&4294967295|j>>>9),j=P+(M^(I|~F))+z[0]+4096336452&4294967295,P=I+(j<<6&4294967295|j>>>26),j=F+(I^(P|~M))+z[7]+1126891415&4294967295,F=P+(j<<10&4294967295|j>>>22),j=M+(P^(F|~I))+z[14]+2878612391&4294967295,M=F+(j<<15&4294967295|j>>>17),j=I+(F^(M|~P))+z[5]+4237533241&4294967295,I=M+(j<<21&4294967295|j>>>11),j=P+(M^(I|~F))+z[12]+1700485571&4294967295,P=I+(j<<6&4294967295|j>>>26),j=F+(I^(P|~M))+z[3]+2399980690&4294967295,F=P+(j<<10&4294967295|j>>>22),j=M+(P^(F|~I))+z[10]+4293915773&4294967295,M=F+(j<<15&4294967295|j>>>17),j=I+(F^(M|~P))+z[1]+2240044497&4294967295,I=M+(j<<21&4294967295|j>>>11),j=P+(M^(I|~F))+z[8]+1873313359&4294967295,P=I+(j<<6&4294967295|j>>>26),j=F+(I^(P|~M))+z[15]+4264355552&4294967295,F=P+(j<<10&4294967295|j>>>22),j=M+(P^(F|~I))+z[6]+2734768916&4294967295,M=F+(j<<15&4294967295|j>>>17),j=I+(F^(M|~P))+z[13]+1309151649&4294967295,I=M+(j<<21&4294967295|j>>>11),j=P+(M^(I|~F))+z[4]+4149444226&4294967295,P=I+(j<<6&4294967295|j>>>26),j=F+(I^(P|~M))+z[11]+3174756917&4294967295,F=P+(j<<10&4294967295|j>>>22),j=M+(P^(F|~I))+z[2]+718787259&4294967295,M=F+(j<<15&4294967295|j>>>17),j=I+(F^(M|~P))+z[9]+3951481745&4294967295,V.g[0]=V.g[0]+P&4294967295,V.g[1]=V.g[1]+(M+(j<<21&4294967295|j>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+F&4294967295}s.prototype.u=function(V,P){P===void 0&&(P=V.length);for(var I=P-this.blockSize,z=this.B,M=this.h,F=0;F<P;){if(M==0)for(;F<=I;)l(this,V,F),F+=this.blockSize;if(typeof V=="string"){for(;F<P;)if(z[M++]=V.charCodeAt(F++),M==this.blockSize){l(this,z),M=0;break}}else for(;F<P;)if(z[M++]=V[F++],M==this.blockSize){l(this,z),M=0;break}}this.h=M,this.o+=P},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var P=1;P<V.length-8;++P)V[P]=0;var I=8*this.o;for(P=V.length-8;P<V.length;++P)V[P]=I&255,I/=256;for(this.u(V),V=Array(16),P=I=0;4>P;++P)for(var z=0;32>z;z+=8)V[I++]=this.g[P]>>>z&255;return V};function h(V,P){var I=_;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=P(V)}function f(V,P){this.h=P;for(var I=[],z=!0,M=V.length-1;0<=M;M--){var F=V[M]|0;z&&F==P||(I[M]=F,z=!1)}this.g=I}var _={};function y(V){return-128<=V&&128>V?h(V,function(P){return new f([P|0],0>P?-1:0)}):new f([V|0],0>V?-1:0)}function b(V){if(isNaN(V)||!isFinite(V))return C;if(0>V)return K(b(-V));for(var P=[],I=1,z=0;V>=I;z++)P[z]=V/I|0,I*=4294967296;return new f(P,0)}function A(V,P){if(V.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(V.charAt(0)=="-")return K(A(V.substring(1),P));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=b(Math.pow(P,8)),z=C,M=0;M<V.length;M+=8){var F=Math.min(8,V.length-M),j=parseInt(V.substring(M,M+F),P);8>F?(F=b(Math.pow(P,F)),z=z.j(F).add(b(j))):(z=z.j(I),z=z.add(b(j)))}return z}var C=y(0),k=y(1),D=y(16777216);i=f.prototype,i.m=function(){if(W(this))return-K(this).m();for(var V=0,P=1,I=0;I<this.g.length;I++){var z=this.i(I);V+=(0<=z?z:4294967296+z)*P,P*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(G(this))return"0";if(W(this))return"-"+K(this).toString(V);for(var P=b(Math.pow(V,6)),I=this,z="";;){var M=ue(I,P).g;I=te(I,M.j(P));var F=((0<I.g.length?I.g[0]:I.h)>>>0).toString(V);if(I=M,G(I))return F+z;for(;6>F.length;)F="0"+F;z=F+z}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function G(V){if(V.h!=0)return!1;for(var P=0;P<V.g.length;P++)if(V.g[P]!=0)return!1;return!0}function W(V){return V.h==-1}i.l=function(V){return V=te(this,V),W(V)?-1:G(V)?0:1};function K(V){for(var P=V.g.length,I=[],z=0;z<P;z++)I[z]=~V.g[z];return new f(I,~V.h).add(k)}i.abs=function(){return W(this)?K(this):this},i.add=function(V){for(var P=Math.max(this.g.length,V.g.length),I=[],z=0,M=0;M<=P;M++){var F=z+(this.i(M)&65535)+(V.i(M)&65535),j=(F>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);z=j>>>16,F&=65535,j&=65535,I[M]=j<<16|F}return new f(I,I[I.length-1]&-2147483648?-1:0)};function te(V,P){return V.add(K(P))}i.j=function(V){if(G(this)||G(V))return C;if(W(this))return W(V)?K(this).j(K(V)):K(K(this).j(V));if(W(V))return K(this.j(K(V)));if(0>this.l(D)&&0>V.l(D))return b(this.m()*V.m());for(var P=this.g.length+V.g.length,I=[],z=0;z<2*P;z++)I[z]=0;for(z=0;z<this.g.length;z++)for(var M=0;M<V.g.length;M++){var F=this.i(z)>>>16,j=this.i(z)&65535,Oe=V.i(M)>>>16,Me=V.i(M)&65535;I[2*z+2*M]+=j*Me,se(I,2*z+2*M),I[2*z+2*M+1]+=F*Me,se(I,2*z+2*M+1),I[2*z+2*M+1]+=j*Oe,se(I,2*z+2*M+1),I[2*z+2*M+2]+=F*Oe,se(I,2*z+2*M+2)}for(z=0;z<P;z++)I[z]=I[2*z+1]<<16|I[2*z];for(z=P;z<2*P;z++)I[z]=0;return new f(I,0)};function se(V,P){for(;(V[P]&65535)!=V[P];)V[P+1]+=V[P]>>>16,V[P]&=65535,P++}function Z(V,P){this.g=V,this.h=P}function ue(V,P){if(G(P))throw Error("division by zero");if(G(V))return new Z(C,C);if(W(V))return P=ue(K(V),P),new Z(K(P.g),K(P.h));if(W(P))return P=ue(V,K(P)),new Z(K(P.g),P.h);if(30<V.g.length){if(W(V)||W(P))throw Error("slowDivide_ only works with positive integers.");for(var I=k,z=P;0>=z.l(V);)I=_e(I),z=_e(z);var M=Se(I,1),F=Se(z,1);for(z=Se(z,2),I=Se(I,2);!G(z);){var j=F.add(z);0>=j.l(V)&&(M=M.add(I),F=j),z=Se(z,1),I=Se(I,1)}return P=te(V,M.j(P)),new Z(M,P)}for(M=C;0<=V.l(P);){for(I=Math.max(1,Math.floor(V.m()/P.m())),z=Math.ceil(Math.log(I)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),F=b(I),j=F.j(P);W(j)||0<j.l(V);)I-=z,F=b(I),j=F.j(P);G(F)&&(F=k),M=M.add(F),V=te(V,j)}return new Z(M,V)}i.A=function(V){return ue(this,V).h},i.and=function(V){for(var P=Math.max(this.g.length,V.g.length),I=[],z=0;z<P;z++)I[z]=this.i(z)&V.i(z);return new f(I,this.h&V.h)},i.or=function(V){for(var P=Math.max(this.g.length,V.g.length),I=[],z=0;z<P;z++)I[z]=this.i(z)|V.i(z);return new f(I,this.h|V.h)},i.xor=function(V){for(var P=Math.max(this.g.length,V.g.length),I=[],z=0;z<P;z++)I[z]=this.i(z)^V.i(z);return new f(I,this.h^V.h)};function _e(V){for(var P=V.g.length+1,I=[],z=0;z<P;z++)I[z]=V.i(z)<<1|V.i(z-1)>>>31;return new f(I,V.h)}function Se(V,P){var I=P>>5;P%=32;for(var z=V.g.length-I,M=[],F=0;F<z;F++)M[F]=0<P?V.i(F+I)>>>P|V.i(F+I+1)<<32-P:V.i(F+I);return new f(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ww=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=A,oo=f}).apply(typeof tb<"u"?tb:typeof self<"u"?self:typeof window<"u"?window:{});var ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tw,Tc,xw,vd,Yp,Sw,Aw,Rw;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,E,x){return d==Array.prototype||d==Object.prototype||(d[E]=x.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ad=="object"&&ad];for(var E=0;E<d.length;++E){var x=d[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function l(d,E){if(E)e:{var x=s;d=d.split(".");for(var O=0;O<d.length-1;O++){var J=d[O];if(!(J in x))break e;x=x[J]}d=d[d.length-1],O=x[d],E=E(O),E!=O&&E!=null&&e(x,d,{configurable:!0,writable:!0,value:E})}}function h(d,E){d instanceof String&&(d+="");var x=0,O=!1,J={next:function(){if(!O&&x<d.length){var re=x++;return{value:E(re,d[re]),done:!1}}return O=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}l("Array.prototype.values",function(d){return d||function(){return h(this,function(E,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},_=this||self;function y(d){var E=typeof d;return E=E!="object"?E:d?Array.isArray(d)?"array":E:"null",E=="array"||E=="object"&&typeof d.length=="number"}function b(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function A(d,E,x){return d.call.apply(d.bind,arguments)}function C(d,E,x){if(!d)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,O),d.apply(E,J)}}return function(){return d.apply(E,arguments)}}function k(d,E,x){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:C,k.apply(null,arguments)}function D(d,E){var x=Array.prototype.slice.call(arguments,1);return function(){var O=x.slice();return O.push.apply(O,arguments),d.apply(this,O)}}function G(d,E){function x(){}x.prototype=E.prototype,d.aa=E.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(O,J,re){for(var be=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)be[tt-2]=arguments[tt];return E.prototype[J].apply(O,be)}}function W(d){const E=d.length;if(0<E){const x=Array(E);for(let O=0;O<E;O++)x[O]=d[O];return x}return[]}function K(d,E){for(let x=1;x<arguments.length;x++){const O=arguments[x];if(y(O)){const J=d.length||0,re=O.length||0;d.length=J+re;for(let be=0;be<re;be++)d[J+be]=O[be]}else d.push(O)}}class te{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function se(d){return/^[\s\xa0]*$/.test(d)}function Z(){var d=_.navigator;return d&&(d=d.userAgent)?d:""}function ue(d){return ue[" "](d),d}ue[" "]=function(){};var _e=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Se(d,E,x){for(const O in d)E.call(x,d[O],O,d)}function V(d,E){for(const x in d)E.call(void 0,d[x],x,d)}function P(d){const E={};for(const x in d)E[x]=d[x];return E}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(d,E){let x,O;for(let J=1;J<arguments.length;J++){O=arguments[J];for(x in O)d[x]=O[x];for(let re=0;re<I.length;re++)x=I[re],Object.prototype.hasOwnProperty.call(O,x)&&(d[x]=O[x])}}function M(d){var E=1;d=d.split(":");const x=[];for(;0<E&&d.length;)x.push(d.shift()),E--;return d.length&&x.push(d.join(":")),x}function F(d){_.setTimeout(()=>{throw d},0)}function j(){var d=Ye;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class Oe{constructor(){this.h=this.g=null}add(E,x){const O=Me.get();O.set(E,x),this.h?this.h.next=O:this.g=O,this.h=O}}var Me=new te(()=>new me,d=>d.reset());class me{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,fe=!1,Ye=new Oe,B=()=>{const d=_.Promise.resolve(void 0);Ee=()=>{d.then(le)}};var le=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(x){F(x)}var E=Me;E.j(d),100>E.h&&(E.h++,d.next=E.g,E.g=d)}fe=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};_.addEventListener("test",x,E),_.removeEventListener("test",x,E)}catch{}return d}();function Ae(d,E){if(ve.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,O=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget){if(_e){e:{try{ue(E.nodeName);var J=!0;break e}catch{}J=!1}J||(E=null)}}else x=="mouseover"?E=d.fromElement:x=="mouseout"&&(E=d.toElement);this.relatedTarget=E,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Te[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}G(Ae,ve);var Te={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Nt(d,E,x,O,J){this.listener=d,this.proxy=null,this.src=E,this.type=x,this.capture=!!O,this.ha=J,this.key=++Ke,this.da=this.fa=!1}function ct(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function un(d){this.src=d,this.g={},this.h=0}un.prototype.add=function(d,E,x,O,J){var re=d.toString();d=this.g[re],d||(d=this.g[re]=[],this.h++);var be=Mn(d,E,O,J);return-1<be?(E=d[be],x||(E.fa=!1)):(E=new Nt(E,this.src,re,!!O,J),E.fa=x,d.push(E)),E};function Yn(d,E){var x=E.type;if(x in d.g){var O=d.g[x],J=Array.prototype.indexOf.call(O,E,void 0),re;(re=0<=J)&&Array.prototype.splice.call(O,J,1),re&&(ct(E),d.g[x].length==0&&(delete d.g[x],d.h--))}}function Mn(d,E,x,O){for(var J=0;J<d.length;++J){var re=d[J];if(!re.da&&re.listener==E&&re.capture==!!x&&re.ha==O)return J}return-1}var kr="closure_lm_"+(1e6*Math.random()|0),ur={};function qi(d,E,x,O,J){if(Array.isArray(E)){for(var re=0;re<E.length;re++)qi(d,E[re],x,O,J);return null}return x=vl(x),d&&d[gt]?d.K(E,x,b(O)?!!O.capture:!1,J):fs(d,E,x,!1,O,J)}function fs(d,E,x,O,J,re){if(!E)throw Error("Invalid event type");var be=b(J)?!!J.capture:!!J,tt=aa(d);if(tt||(d[kr]=tt=new un(d)),x=tt.add(E,x,O,be,re),x.proxy)return x;if(O=cr(),x.proxy=O,O.src=d,O.listener=x,d.addEventListener)ye||(J=be),J===void 0&&(J=!1),d.addEventListener(E.toString(),O,J);else if(d.attachEvent)d.attachEvent(Dr(E.toString()),O);else if(d.addListener&&d.removeListener)d.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return x}function cr(){function d(x){return E.call(d.src,d.listener,x)}const E=yl;return d}function sa(d,E,x,O,J){if(Array.isArray(E))for(var re=0;re<E.length;re++)sa(d,E[re],x,O,J);else O=b(O)?!!O.capture:!!O,x=vl(x),d&&d[gt]?(d=d.i,E=String(E).toString(),E in d.g&&(re=d.g[E],x=Mn(re,x,O,J),-1<x&&(ct(re[x]),Array.prototype.splice.call(re,x,1),re.length==0&&(delete d.g[E],d.h--)))):d&&(d=aa(d))&&(E=d.g[E.toString()],d=-1,E&&(d=Mn(E,x,O,J)),(x=-1<d?E[d]:null)&&Or(x))}function Or(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[gt])Yn(E.i,d);else{var x=d.type,O=d.proxy;E.removeEventListener?E.removeEventListener(x,O,d.capture):E.detachEvent?E.detachEvent(Dr(x),O):E.addListener&&E.removeListener&&E.removeListener(O),(x=aa(E))?(Yn(x,d),x.h==0&&(x.src=null,E[kr]=null)):ct(d)}}}function Dr(d){return d in ur?ur[d]:ur[d]="on"+d}function yl(d,E){if(d.da)d=!0;else{E=new Ae(E,this);var x=d.listener,O=d.ha||d.src;d.fa&&Or(d),d=x.call(O,E)}return d}function aa(d){return d=d[kr],d instanceof un?d:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function vl(d){return typeof d=="function"?d:(d[Vn]||(d[Vn]=function(E){return d.handleEvent(E)}),d[Vn])}function Lt(){we.call(this),this.i=new un(this),this.M=this,this.F=null}G(Lt,we),Lt.prototype[gt]=!0,Lt.prototype.removeEventListener=function(d,E,x,O){sa(this,d,E,x,O)};function Qt(d,E){var x,O=d.F;if(O)for(x=[];O;O=O.F)x.push(O);if(d=d.M,O=E.type||E,typeof E=="string")E=new ve(E,d);else if(E instanceof ve)E.target=E.target||d;else{var J=E;E=new ve(O,d),z(E,J)}if(J=!0,x)for(var re=x.length-1;0<=re;re--){var be=E.g=x[re];J=Fi(be,O,!0,E)&&J}if(be=E.g=d,J=Fi(be,O,!0,E)&&J,J=Fi(be,O,!1,E)&&J,x)for(re=0;re<x.length;re++)be=E.g=x[re],J=Fi(be,O,!1,E)&&J}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var d=this.i,E;for(E in d.g){for(var x=d.g[E],O=0;O<x.length;O++)ct(x[O]);delete d.g[E],d.h--}}this.F=null},Lt.prototype.K=function(d,E,x,O){return this.i.add(String(d),E,!1,x,O)},Lt.prototype.L=function(d,E,x,O){return this.i.add(String(d),E,!0,x,O)};function Fi(d,E,x,O){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();for(var J=!0,re=0;re<E.length;++re){var be=E[re];if(be&&!be.da&&be.capture==x){var tt=be.listener,Ht=be.ha||be.src;be.fa&&Yn(d.i,be),J=tt.call(Ht,O)!==!1&&J}}return J&&!O.defaultPrevented}function bl(d,E,x){if(typeof d=="function")x&&(d=k(d,x));else if(d&&typeof d.handleEvent=="function")d=k(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:_.setTimeout(d,E||0)}function oa(d){d.g=bl(()=>{d.g=null,d.i&&(d.i=!1,oa(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class El extends we{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:oa(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(d){we.call(this),this.h=d,this.g={}}G(ms,we);var hr=[];function nn(d){Se(d.g,function(E,x){this.g.hasOwnProperty(x)&&Or(E)},d),d.g={}}ms.prototype.N=function(){ms.aa.N.call(this),nn(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var la=_.JSON.stringify,Gi=_.JSON.parse,Wt=class{stringify(d){return _.JSON.stringify(d,void 0)}parse(d){return _.JSON.parse(d,void 0)}};function Eo(){}Eo.prototype.h=null;function wl(d){return d.h||(d.h=d.i())}function wo(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){ve.call(this,"d")}G(dr,ve);function Si(){ve.call(this,"c")}G(Si,ve);var hi={},Lr=null;function ua(){return Lr=Lr||new Lt}hi.La="serverreachability";function To(d){ve.call(this,hi.La,d)}G(To,ve);function Mr(d){const E=ua();Qt(E,new To(E))}hi.STAT_EVENT="statevent";function Vr(d,E){ve.call(this,hi.STAT_EVENT,d),this.stat=E}G(Vr,ve);function Mt(d){const E=ua();Qt(E,new Vr(E,d))}hi.Ma="timingevent";function Tl(d,E){ve.call(this,hi.Ma,d),this.size=E}G(Tl,ve);function jr(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){d()},E)}function zr(){this.g=!0}zr.prototype.xa=function(){this.g=!1};function Xn(d,E,x,O,J,re){d.info(function(){if(d.g)if(re)for(var be="",tt=re.split("&"),Ht=0;Ht<tt.length;Ht++){var nt=tt[Ht].split("=");if(1<nt.length){var _t=nt[0];nt=nt[1];var St=_t.split("_");be=2<=St.length&&St[1]=="type"?be+(_t+"="+nt+"&"):be+(_t+"=redacted&")}}else be=null;else be=re;return"XMLHTTP REQ ("+O+") [attempt "+J+"]: "+E+`
`+x+`
`+be})}function Ie(d,E,x,O,J,re,be){d.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+J+"]: "+E+`
`+x+`
`+re+" "+be})}function fr(d,E,x,O){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+Yt(d,x)+(O?" "+O:"")})}function Ai(d,E){d.info(function(){return"TIMEOUT: "+E})}zr.prototype.info=function(){};function Yt(d,E){if(!d.g)return E;if(!E)return null;try{var x=JSON.parse(E);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var O=x[d];if(!(2>O.length)){var J=O[1];if(Array.isArray(J)&&!(1>J.length)){var re=J[0];if(re!="noop"&&re!="stop"&&re!="close")for(var be=1;be<J.length;be++)J[be]=""}}}}return la(x)}catch{return E}}var Ut={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ur;function Ci(){}G(Ci,Eo),Ci.prototype.g=function(){return new XMLHttpRequest},Ci.prototype.i=function(){return{}},Ur=new Ci;function Ii(d,E,x,O){this.j=d,this.i=E,this.l=x,this.R=O||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xo}function xo(){this.i=null,this.g="",this.h=!1}var Br={},ps={};function Ni(d,E,x){d.L=1,d.v=ei(st(E)),d.m=x,d.P=!0,Zi(d,null)}function Zi(d,E){d.F=Date.now(),Pt(d),d.A=st(d.v);var x=d.A,O=d.R;Array.isArray(O)||(O=[String(O)]),gr(x.i,"t",O),d.C=0,x=d.j.J,d.h=new xo,d.g=Rl(d.j,x?E:null,!d.m),0<d.O&&(d.M=new El(k(d.Y,d,d.g),d.O)),E=d.U,x=d.g,O=d.ca;var J="readystatechange";Array.isArray(J)||(J&&(hr[0]=J.toString()),J=hr);for(var re=0;re<J.length;re++){var be=qi(x,J[re],O||E.handleEvent,!1,E.h||E);if(!be)break;E.g[be.key]=be}E=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,E)):(d.u="GET",d.g.ea(d.A,d.u,null,E)),Mr(),Xn(d.i,d.u,d.A,d.l,d.R,d.m)}Ii.prototype.ca=function(d){d=d.target;const E=this.M;E&&vn(d)==3?E.j():this.Y(d)},Ii.prototype.Y=function(d){try{if(d==this.g)e:{const St=vn(this.g);var E=this.g.Ba();const wr=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||Io(this.g)))){this.J||St!=4||E==7||(E==8||0>=wr?Mr(3):Mr(2)),ca(this);var x=this.g.Z();this.X=x;t:if(Hr(this)){var O=Io(this.g);d="";var J=O.length,re=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),Jn(this);var be="";break t}this.h.i=new _.TextDecoder}for(E=0;E<J;E++)this.h.h=!0,d+=this.h.i.decode(O[E],{stream:!(re&&E==J-1)});O.length=0,this.h.g+=d,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=x==200,Ie(this.i,this.u,this.A,this.l,this.R,St,x),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Ht=this.g;if((tt=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(tt)){var nt=tt;break t}}nt=null}if(x=nt)fr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,An(this,x);else{this.o=!1,this.s=3,Mt(12),jn(this),Jn(this);break e}}if(this.P){x=!0;let Tt;for(;!this.J&&this.C<be.length;)if(Tt=Pi(this,be),Tt==ps){St==4&&(this.s=4,Mt(14),x=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Br){this.s=4,Mt(15),fr(this.i,this.l,be,"[Invalid Chunk]"),x=!1;break}else fr(this.i,this.l,Tt,null),An(this,Tt);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||be.length!=0||this.h.h||(this.s=1,Mt(16),x=!1),this.o=this.o&&x,!x)fr(this.i,this.l,be,"[Invalid Chunked Response]"),jn(this),Jn(this);else if(0<be.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),$r(_t),_t.M=!0,Mt(11))}}else fr(this.i,this.l,be,null),An(this,be);St==4&&jn(this),this.o&&!this.J&&(St==4?Po(this.j,this):(this.o=!1,Pt(this)))}else Nu(this.g),x==400&&0<be.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),jn(this),Jn(this)}}}catch{}finally{}};function Hr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Pi(d,E){var x=d.C,O=E.indexOf(`
`,x);return O==-1?ps:(x=Number(E.substring(x,O)),isNaN(x)?Br:(O+=1,O+x>E.length?ps:(E=E.slice(O,O+x),d.C=O+x,E)))}Ii.prototype.cancel=function(){this.J=!0,jn(this)};function Pt(d){d.S=Date.now()+d.I,So(d,d.I)}function So(d,E){if(d.B!=null)throw Error("WatchDog timer not null");d.B=jr(k(d.ba,d),E)}function ca(d){d.B&&(_.clearTimeout(d.B),d.B=null)}Ii.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ai(this.i,this.A),this.L!=2&&(Mr(),Mt(17)),jn(this),this.s=2,Jn(this)):So(this,this.S-d)};function Jn(d){d.j.G==0||d.J||Po(d.j,d)}function jn(d){ca(d);var E=d.M;E&&typeof E.ma=="function"&&E.ma(),d.M=null,nn(d.U),d.g&&(E=d.g,d.g=null,E.abort(),E.ma())}function An(d,E){try{var x=d.j;if(x.G!=0&&(x.g==d||$e(x.h,d))){if(!d.K&&$e(x.h,d)&&x.G==3){try{var O=x.Da.g.parse(E)}catch{O=null}if(Array.isArray(O)&&O.length==3){var J=O;if(J[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)Ea(x),ya(x);else break e;va(x),Mt(18)}}else x.za=J[1],0<x.za-x.T&&37500>J[2]&&x.F&&x.v==0&&!x.C&&(x.C=jr(k(x.Za,x),6e3));if(1>=qr(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Er(x,11)}else if((d.K||x.g==d)&&Ea(x),!se(E))for(J=x.Da.g.parse(E),E=0;E<J.length;E++){let nt=J[E];if(x.T=nt[0],nt=nt[1],x.G==2)if(nt[0]=="c"){x.K=nt[1],x.ia=nt[2];const _t=nt[3];_t!=null&&(x.la=_t,x.j.info("VER="+x.la));const St=nt[4];St!=null&&(x.Aa=St,x.j.info("SVER="+x.Aa));const wr=nt[5];wr!=null&&typeof wr=="number"&&0<wr&&(O=1.5*wr,x.L=O,x.j.info("backChannelRequestTimeoutMs_="+O)),O=x;const Tt=d.g;if(Tt){const Wi=Tt.g?Tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wi){var re=O.h;re.g||Wi.indexOf("spdy")==-1&&Wi.indexOf("quic")==-1&&Wi.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(dt(re,re.h),re.h=null))}if(O.D){const Yi=Tt.g?Tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Yi&&(O.ya=Yi,De(O.I,O.D,Yi))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),O=x;var be=d;if(O.qa=Ta(O,O.J?O.ia:null,O.W),be.K){Rn(O.h,be);var tt=be,Ht=O.L;Ht&&(tt.I=Ht),tt.B&&(ca(tt),Pt(tt)),O.g=be}else Di(O);0<x.i.length&&Kr(x)}else nt[0]!="stop"&&nt[0]!="close"||Er(x,7);else x.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Er(x,7):_a(x):nt[0]!="noop"&&x.l&&x.l.ta(nt),x.v=0)}}Mr(4)}catch{}}var gs=class{constructor(d,E){this.g=d,this.map=E}};function ha(d){this.l=d||10,_.PerformanceNavigationTiming?(d=_.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function da(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function qr(d){return d.h?1:d.g?d.g.size:0}function $e(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function dt(d,E){d.g?d.g.add(E):d.h=E}function Rn(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}ha.prototype.cancel=function(){if(this.i=Bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bt(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const x of d.g.values())E=E.concat(x.D);return E}return W(d.i)}function mr(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(y(d)){for(var E=[],x=d.length,O=0;O<x;O++)E.push(d[O]);return E}E=[],x=0;for(O in d)E[x++]=d[O];return E}function Ao(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(y(d)||typeof d=="string"){var E=[];d=d.length;for(var x=0;x<d;x++)E.push(x);return E}E=[],x=0;for(const O in d)E[x++]=O;return E}}}function Be(d,E){if(d.forEach&&typeof d.forEach=="function")d.forEach(E,void 0);else if(y(d)||typeof d=="string")Array.prototype.forEach.call(d,E,void 0);else for(var x=Ao(d),O=mr(d),J=O.length,re=0;re<J;re++)E.call(void 0,O[re],x&&x[re],d)}var wt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fr(d,E){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var O=d[x].indexOf("="),J=null;if(0<=O){var re=d[x].substring(0,O);J=d[x].substring(O+1)}else re=d[x];E(re,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function di(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof di){this.h=d.h,Gr(this,d.j),this.o=d.o,this.g=d.g,Ki(this,d.s),this.l=d.l;var E=d.i,x=new pi;x.i=E.i,E.g&&(x.g=new Map(E.g),x.h=E.h),fi(this,x),this.m=d.m}else d&&(E=String(d).match(wt))?(this.h=!1,Gr(this,E[1]||"",!0),this.o=mi(E[2]||""),this.g=mi(E[3]||"",!0),Ki(this,E[4]),this.l=mi(E[5]||"",!0),fi(this,E[6]||"",!0),this.m=mi(E[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}di.prototype.toString=function(){var d=[],E=this.j;E&&d.push(_n(E,pr,!0),":");var x=this.g;return(x||E=="file")&&(d.push("//"),(E=this.o)&&d.push(_n(E,pr,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(_n(x,x.charAt(0)=="/"?_s:fa,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",_n(x,Co)),d.join("")};function st(d){return new di(d)}function Gr(d,E,x){d.j=x?mi(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function Ki(d,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);d.s=E}else d.s=null}function fi(d,E,x){E instanceof pi?(d.i=E,zn(d.i,d.h)):(x||(E=_n(E,ma)),d.i=new pi(E,d.h))}function De(d,E,x){d.i.set(E,x)}function ei(d){return De(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function mi(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function _n(d,E,x){return typeof d=="string"?(d=encodeURI(d).replace(E,Ro),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ro(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pr=/[#\/\?@]/g,fa=/[#\?:]/g,_s=/[#\?]/g,ma=/[#\?@]/g,Co=/#/g;function pi(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function Cn(d){d.g||(d.g=new Map,d.h=0,d.i&&Fr(d.i,function(E,x){d.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}i=pi.prototype,i.add=function(d,E){Cn(this),this.i=null,d=Ve(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(E),this.h+=1,this};function ys(d,E){Cn(d),E=Ve(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function ki(d,E){return Cn(d),E=Ve(d,E),d.g.has(E)}i.forEach=function(d,E){Cn(this),this.g.forEach(function(x,O){x.forEach(function(J){d.call(E,J,O,this)},this)},this)},i.na=function(){Cn(this);const d=Array.from(this.g.values()),E=Array.from(this.g.keys()),x=[];for(let O=0;O<E.length;O++){const J=d[O];for(let re=0;re<J.length;re++)x.push(E[O])}return x},i.V=function(d){Cn(this);let E=[];if(typeof d=="string")ki(this,d)&&(E=E.concat(this.g.get(Ve(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)E=E.concat(d[x])}return E},i.set=function(d,E){return Cn(this),this.i=null,d=Ve(this,d),ki(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},i.get=function(d,E){return d?(d=this.V(d),0<d.length?String(d[0]):E):E};function gr(d,E,x){ys(d,E),0<x.length&&(d.i=null,d.g.set(Ve(d,E),W(x)),d.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(var x=0;x<E.length;x++){var O=E[x];const re=encodeURIComponent(String(O)),be=this.V(O);for(O=0;O<be.length;O++){var J=re;be[O]!==""&&(J+="="+encodeURIComponent(String(be[O]))),d.push(J)}}return this.i=d.join("&")};function Ve(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function zn(d,E){E&&!d.j&&(Cn(d),d.i=null,d.g.forEach(function(x,O){var J=O.toLowerCase();O!=J&&(ys(this,O),gr(this,J,x))},d)),d.j=E}function pt(d,E){const x=new zr;if(_.Image){const O=new Image;O.onload=D(Un,x,"TestLoadImage: loaded",!0,E,O),O.onerror=D(Un,x,"TestLoadImage: error",!1,E,O),O.onabort=D(Un,x,"TestLoadImage: abort",!1,E,O),O.ontimeout=D(Un,x,"TestLoadImage: timeout",!1,E,O),_.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=d}else E(!1)}function Zr(d,E){const x=new zr,O=new AbortController,J=setTimeout(()=>{O.abort(),Un(x,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:O.signal}).then(re=>{clearTimeout(J),re.ok?Un(x,"TestPingServer: ok",!0,E):Un(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),Un(x,"TestPingServer: error",!1,E)})}function Un(d,E,x,O,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),O(x)}catch{}}function _r(){this.g=new Wt}function gi(d,E,x){const O=x||"";try{Be(d,function(J,re){let be=J;b(J)&&(be=la(J)),E.push(O+re+"="+encodeURIComponent(be))})}catch(J){throw E.push(O+"type="+encodeURIComponent("_badmap")),J}}function Bn(d){this.l=d.Ub||null,this.j=d.eb||!1}G(Bn,Eo),Bn.prototype.g=function(){return new Oi(this.l,this.j)},Bn.prototype.i=function(d){return function(){return d}}({});function Oi(d,E){Lt.call(this),this.D=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Oi,Lt),i=Oi.prototype,i.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=E,this.readyState=1,yn(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(E.body=d),(this.D||_).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vt(this)),this.readyState=0},i.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,yn(this)),this.g&&(this.readyState=3,yn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yr(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function yr(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}i.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?vt(this):yn(this),this.readyState==3&&yr(this)}},i.Ra=function(d){this.g&&(this.response=this.responseText=d,vt(this))},i.Qa=function(d){this.g&&(this.response=d,vt(this))},i.ga=function(){this.g&&vt(this)};function vt(d){d.readyState=4,d.l=null,d.j=null,d.v=null,yn(d)}i.setRequestHeader=function(d,E){this.u.append(d,E)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=E.next();return d.join(`\r
`)};function yn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function pa(d){let E="";return Se(d,function(x,O){E+=O,E+=":",E+=x,E+=`\r
`}),E}function Xt(d,E,x){e:{for(O in x){var O=!1;break e}O=!0}O||(x=pa(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):De(d,E,x))}function ft(d){Lt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(ft,Lt);var vs=/^https?$/i,vr=["POST","PUT"];i=ft.prototype,i.Ha=function(d){this.J=d},i.ea=function(d,E,x,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ur.g(),this.v=this.o?wl(this.o):wl(Ur),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch(re){xl(this,re);return}if(d=x||"",x=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var J in O)x.set(J,O[J]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const re of O.keys())x.set(re,O.get(re));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(x.keys()).find(re=>re.toLowerCase()=="content-type"),J=_.FormData&&d instanceof _.FormData,!(0<=Array.prototype.indexOf.call(vr,E,void 0))||O||J||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,be]of x)this.g.setRequestHeader(re,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cn(this),this.u=!0,this.g.send(d),this.u=!1}catch(re){xl(this,re)}};function xl(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.m=5,bs(d),$i(d)}function bs(d){d.A||(d.A=!0,Qt(d,"complete"),Qt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Qt(this,"complete"),Qt(this,"abort"),$i(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),ft.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Qe(this):this.bb())},i.bb=function(){Qe(this)};function Qe(d){if(d.h&&typeof f<"u"&&(!d.v[1]||vn(d)!=4||d.Z()!=2)){if(d.u&&vn(d)==4)bl(d.Ea,0,d);else if(Qt(d,"readystatechange"),vn(d)==4){d.h=!1;try{const be=d.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var O;if(O=be===0){var J=String(d.D).match(wt)[1]||null;!J&&_.self&&_.self.location&&(J=_.self.location.protocol.slice(0,-1)),O=!vs.test(J?J.toLowerCase():"")}x=O}if(x)Qt(d,"complete"),Qt(d,"success");else{d.m=6;try{var re=2<vn(d)?d.g.statusText:""}catch{re=""}d.l=re+" ["+d.Z()+"]",bs(d)}}finally{$i(d)}}}}function $i(d,E){if(d.g){cn(d);const x=d.g,O=d.v[0]?()=>{}:null;d.g=null,d.v=null,E||Qt(d,"ready");try{x.onreadystatechange=O}catch{}}}function cn(d){d.I&&(_.clearTimeout(d.I),d.I=null)}i.isActive=function(){return!!this.g};function vn(d){return d.g?d.g.readyState:0}i.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),Gi(E)}};function Io(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Nu(d){const E={};d=(d.g&&2<=vn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<d.length;O++){if(se(d[O]))continue;var x=M(d[O]);const J=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const re=E[J]||[];E[J]=re,re.push(x)}V(E,function(O){return O.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(d,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||E}function ga(d){this.Aa=0,this.i=[],this.j=new zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,d),this.cb=br("retryDelaySeedMs",1e4,d),this.Wa=br("forwardChannelMaxRetries",2,d),this.wa=br("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new ha(d&&d.concurrentRequestLimit),this.Da=new _r,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ga.prototype,i.la=8,i.G=1,i.connect=function(d,E,x,O){Mt(0),this.W=d,this.H=E||{},x&&O!==void 0&&(this.H.OSID=x,this.H.OAID=O),this.F=this.X,this.I=Ta(this,null,this.W),Kr(this)};function _a(d){if(Sl(d),d.G==3){var E=d.U++,x=st(d.I);if(De(x,"SID",d.K),De(x,"RID",E),De(x,"TYPE","terminate"),Es(d,x),E=new Ii(d,d.j,E),E.L=2,E.v=ei(st(x)),x=!1,_.navigator&&_.navigator.sendBeacon)try{x=_.navigator.sendBeacon(E.v.toString(),"")}catch{}!x&&_.Image&&(new Image().src=E.v,x=!0),x||(E.g=Rl(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Pt(E)}Al(d)}function ya(d){d.g&&($r(d),d.g.cancel(),d.g=null)}function Sl(d){ya(d),d.u&&(_.clearTimeout(d.u),d.u=null),Ea(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&_.clearTimeout(d.s),d.s=null)}function Kr(d){if(!da(d.h)&&!d.s){d.s=!0;var E=d.Ga;Ee||B(),fe||(Ee(),fe=!0),Ye.add(E,d),d.B=0}}function Pu(d,E){return qr(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=E.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=jr(k(d.Ga,d,E),wa(d,d.B)),d.B++,!0)}i.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const J=new Ii(this,this.j,d);let re=this.o;if(this.S&&(re?(re=P(re),z(re,this.S)):re=this.S),this.m!==null||this.O||(J.H=re,re=null),this.P)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var O=this.i[x];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(E+=O,4096<E){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=No(this,J,E),x=st(this.I),De(x,"RID",d),De(x,"CVER",22),this.D&&De(x,"X-HTTP-Session-Id",this.D),Es(this,x),re&&(this.O?E="headers="+encodeURIComponent(String(pa(re)))+"&"+E:this.m&&Xt(x,this.m,re)),dt(this.h,J),this.Ua&&De(x,"TYPE","init"),this.P?(De(x,"$req",E),De(x,"SID","null"),J.T=!0,Ni(J,x,null)):Ni(J,x,E),this.G=2}}else this.G==3&&(d?Hn(this,d):this.i.length==0||da(this.h)||Hn(this))};function Hn(d,E){var x;E?x=E.l:x=d.U++;const O=st(d.I);De(O,"SID",d.K),De(O,"RID",x),De(O,"AID",d.T),Es(d,O),d.m&&d.o&&Xt(O,d.m,d.o),x=new Ii(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),E&&(d.i=E.D.concat(d.i)),E=No(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),dt(d.h,x),Ni(x,O,E)}function Es(d,E){d.H&&Se(d.H,function(x,O){De(E,O,x)}),d.l&&Be({},function(x,O){De(E,O,x)})}function No(d,E,x){x=Math.min(d.i.length,x);var O=d.l?k(d.l.Na,d.l,d):null;e:{var J=d.i;let re=-1;for(;;){const be=["count="+x];re==-1?0<x?(re=J[0].g,be.push("ofs="+re)):re=0:be.push("ofs="+re);let tt=!0;for(let Ht=0;Ht<x;Ht++){let nt=J[Ht].g;const _t=J[Ht].map;if(nt-=re,0>nt)re=Math.max(0,J[Ht].g-100),tt=!1;else try{gi(_t,be,"req"+nt+"_")}catch{O&&O(_t)}}if(tt){O=be.join("&");break e}}}return d=d.i.splice(0,x),E.D=d,O}function Di(d){if(!d.g&&!d.u){d.Y=1;var E=d.Fa;Ee||B(),fe||(Ee(),fe=!0),Ye.add(E,d),d.v=0}}function va(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=jr(k(d.Fa,d),wa(d,d.v)),d.v++,!0)}i.Fa=function(){if(this.u=null,ba(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=jr(k(this.ab,this),d)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),ya(this),ba(this))};function $r(d){d.A!=null&&(_.clearTimeout(d.A),d.A=null)}function ba(d){d.g=new Ii(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var E=st(d.qa);De(E,"RID","rpc"),De(E,"SID",d.K),De(E,"AID",d.T),De(E,"CI",d.F?"0":"1"),!d.F&&d.ja&&De(E,"TO",d.ja),De(E,"TYPE","xmlhttp"),Es(d,E),d.m&&d.o&&Xt(E,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=ei(st(E)),x.m=null,x.P=!0,Zi(x,d)}i.Za=function(){this.C!=null&&(this.C=null,ya(this),va(this),Mt(19))};function Ea(d){d.C!=null&&(_.clearTimeout(d.C),d.C=null)}function Po(d,E){var x=null;if(d.g==E){Ea(d),$r(d),d.g=null;var O=2}else if($e(d.h,E))x=E.D,Rn(d.h,E),O=1;else return;if(d.G!=0){if(E.o)if(O==1){x=E.m?E.m.length:0,E=Date.now()-E.F;var J=d.B;O=ua(),Qt(O,new Tl(O,x)),Kr(d)}else Di(d);else if(J=E.s,J==3||J==0&&0<E.X||!(O==1&&Pu(d,E)||O==2&&va(d)))switch(x&&0<x.length&&(E=d.h,E.i=E.i.concat(x)),J){case 1:Er(d,5);break;case 4:Er(d,10);break;case 3:Er(d,6);break;default:Er(d,2)}}}function wa(d,E){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*E}function Er(d,E){if(d.j.info("Error code "+E),E==2){var x=k(d.fb,d),O=d.Xa;const J=!O;O=new di(O||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Gr(O,"https"),ei(O),J?pt(O.toString(),x):Zr(O.toString(),x)}else Mt(2);d.G=0,d.l&&d.l.sa(E),Al(d),Sl(d)}i.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Al(d){if(d.G=0,d.ka=[],d.l){const E=Bt(d.h);(E.length!=0||d.i.length!=0)&&(K(d.ka,E),K(d.ka,d.i),d.h.i.length=0,W(d.i),d.i.length=0),d.l.ra()}}function Ta(d,E,x){var O=x instanceof di?st(x):new di(x);if(O.g!="")E&&(O.g=E+"."+O.g),Ki(O,O.s);else{var J=_.location;O=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;var re=new di(null);O&&Gr(re,O),E&&(re.g=E),J&&Ki(re,J),x&&(re.l=x),O=re}return x=d.D,E=d.ya,x&&E&&De(O,x,E),De(O,"VER",d.la),Es(d,O),O}function Rl(d,E,x){if(E&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Ca&&!d.pa?new ft(new Bn({eb:x})):new ft(d.pa),E.Ha(d.J),E}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ko(){}i=ko.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ws(){}ws.prototype.g=function(d,E){return new rn(d,E)};function rn(d,E){Lt.call(this),this.g=new ga(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(d?d["X-WebChannel-Client-Profile"]=E.va:d={"X-WebChannel-Client-Profile":E.va}),this.g.S=d,(d=E&&E.Sb)&&!se(d)&&(this.g.m=d),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!se(E)&&(this.g.D=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new qn(this)}G(rn,Lt),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){_a(this.g)},rn.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=la(d),d=x);E.i.push(new gs(E.Ya++,d)),E.G==3&&Kr(E)},rn.prototype.N=function(){this.g.l=null,delete this.j,_a(this.g),delete this.g,rn.aa.N.call(this)};function Qi(d){dr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const x in E){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}G(Qi,dr);function Cl(){Si.call(this),this.status=1}G(Cl,Si);function qn(d){this.g=d}G(qn,ko),qn.prototype.ua=function(){Qt(this.g,"a")},qn.prototype.ta=function(d){Qt(this.g,new Qi(d))},qn.prototype.sa=function(d){Qt(this.g,new Cl)},qn.prototype.ra=function(){Qt(this.g,"b")},ws.prototype.createWebChannel=ws.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,Rw=function(){return new ws},Aw=function(){return ua()},Sw=hi,Yp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ut.NO_ERROR=0,Ut.TIMEOUT=8,Ut.HTTP_ERROR=6,vd=Ut,Ri.COMPLETE="complete",xw=Ri,wo.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Tc=wo,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,Tw=ft}).apply(typeof ad<"u"?ad:typeof self<"u"?self:typeof window<"u"?window:{});const nb="@firebase/firestore",ib="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Sg("@firebase/firestore");function nu(){return hl.logLevel}function Re(i,...e){if(hl.logLevel<=it.DEBUG){const t=e.map(Bg);hl.debug(`Firestore (${Su}): ${i}`,...t)}}function ta(i,...e){if(hl.logLevel<=it.ERROR){const t=e.map(Bg);hl.error(`Firestore (${Su}): ${i}`,...t)}}function mu(i,...e){if(hl.logLevel<=it.WARN){const t=e.map(Bg);hl.warn(`Firestore (${Su}): ${i}`,...t)}}function Bg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(i="Unexpected state"){const e=`FIRESTORE (${Su}) INTERNAL ASSERTION FAILED: `+i;throw ta(e),new Error(e)}function yt(i,e){i||He()}function Ze(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends hs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($n.UNAUTHENTICATED))}shutdown(){}}class EN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wN{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0);let s=this.i;const l=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let h=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Xs,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const y=h;e.enqueueRetryable(async()=>{await y.promise,await l(this.currentUser)})},_=y=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>_(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?_(y):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Xs)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(yt(typeof s.accessToken=="string"),new Cw(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string"),new $n(e)}}class TN{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class xN{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new TN(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SN{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ui(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0);const s=h=>{h.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const f=h.token!==this.R;return this.R=h.token,Re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const l=h=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?l(h):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new rb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt(typeof t.token=="string"),this.R=t.token,new rb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=AN(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<t&&(s+=e.charAt(l[h]%62))}return s}}function ot(i,e){return i<e?-1:i>e?1:0}function pu(i,e,t){return i.length===e.length&&i.every((s,l)=>t(s,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=-62135596800,ab=1e6;class pn{static now(){return pn.fromMillis(Date.now())}static fromDate(e){return pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*ab);return new pn(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sb)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ab}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-sb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new pn(0,0))}static max(){return new qe(new pn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="__name__";class ts{constructor(e,t,s){t===void 0?t=0:t>e.length&&He(),s===void 0?s=e.length-t:s>e.length-t&&He(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const h=ts.compareSegments(e.get(l),t.get(l));if(h!==0)return h}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=ts.isNumericId(e),l=ts.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?ts.extractNumericId(e).compare(ts.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class Ot extends ts{construct(e,t,s){return new Ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(l=>l.length>0))}return new Ot(t)}static emptyPath(){return new Ot([])}}const RN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends ts{construct(e,t,s){return new Dn(e,t,s)}static isValidIdentifier(e){return RN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ob}static keyField(){return new Dn([ob])}static fromServerFormat(e){const t=[];let s="",l=0;const h=()=>{if(s.length===0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;l<e.length;){const _=e[l];if(_==="\\"){if(l+1===e.length)throw new Pe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Pe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,l+=2}else _==="`"?(f=!f,l++):_!=="."||f?(s+=_,l++):(h(),l++)}if(h(),f)throw new Pe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Ot.fromString(e))}static fromName(e){return new ze(Ot.fromString(e).popFirst(5))}static empty(){return new ze(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=-1;function CN(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,l=qe.fromTimestamp(s===1e9?new pn(t+1,0):new pn(t,s));return new ho(l,ze.empty(),e)}function IN(i){return new ho(i.readTime,i.key,Vc)}class ho{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ho(qe.min(),ze.empty(),Vc)}static max(){return new ho(qe.max(),ze.empty(),Vc)}}function NN(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ze.comparator(i.documentKey,e.documentKey),t!==0?t:ot(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(i){if(i.code!==ge.FAILED_PRECONDITION||i.message!==PN)throw i;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,l)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,s)=>{t(e)})}static reject(e){return new de((t,s)=>{s(e)})}static waitFor(e){return new de((t,s)=>{let l=0,h=0,f=!1;e.forEach(_=>{++l,_.next(()=>{++h,f&&h===l&&t()},y=>s(y))}),f=!0,h===l&&t()})}static or(e){let t=de.resolve(!1);for(const s of e)t=t.next(l=>l?de.resolve(l):s());return t}static forEach(e,t){const s=[];return e.forEach((l,h)=>{s.push(t.call(this,l,h))}),this.waitFor(s)}static mapArray(e,t){return new de((s,l)=>{const h=e.length,f=new Array(h);let _=0;for(let y=0;y<h;y++){const b=y;t(e[b]).next(A=>{f[b]=A,++_,_===h&&s(f)},A=>l(A))}})}static doWhile(e,t){return new de((s,l)=>{const h=()=>{e()===!0?t().next(()=>{h()},l):s()};h()})}}function ON(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ru(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}tf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=-1;function nf(i){return i==null}function Ld(i){return i===0&&1/i==-1/0}function DN(i){return typeof i=="number"&&Number.isInteger(i)&&!Ld(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="";function LN(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=lb(e)),e=MN(i.get(t),e);return lb(e)}function MN(i,e){let t=e;const s=i.length;for(let l=0;l<s;l++){const h=i.charAt(l);switch(h){case"\0":t+="";break;case Nw:t+="";break;default:t+=h}}return t}function lb(i){return i+Nw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function vo(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Pw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new od(this.root,e,this.comparator,!1)}getReverseIterator(){return new od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new od(this.root,e,this.comparator,!0)}}class od{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&l&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,s,l,h){this.key=e,this.value=t,this.color=s??On.RED,this.left=l??On.EMPTY,this.right=h??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,h){return new On(e??this.key,t??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const h=s(e,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(e,t,s),null):h===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return On.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,t,s,l,h){return this}insert(e,t,s){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cb(this.data.getIterator())}getIteratorFrom(e){return new cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new gn(Dn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pu(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new kw("Invalid base64 string: "+h):h}}(e);return new Ln(t)}static fromUint8Array(e){const t=function(l){let h="";for(let f=0;f<l.length;++f)h+=String.fromCharCode(l[f]);return h}(e);return new Ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const VN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(i){if(yt(!!i),typeof i=="string"){let e=0;const t=VN.exec(i);if(yt(!!t),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tn(i.seconds),nanos:tn(i.nanos)}}function tn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function mo(i){return typeof i=="string"?Ln.fromBase64String(i):Ln.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="server_timestamp",Dw="__type__",Lw="__previous_value__",Mw="__local_write_time__";function qg(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Dw])===null||t===void 0?void 0:t.stringValue)===Ow}function rf(i){const e=i.mapValue.fields[Lw];return qg(e)?rf(e):e}function jc(i){const e=fo(i.mapValue.fields[Mw].timestampValue);return new pn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,t,s,l,h,f,_,y,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.longPollingOptions=y,this.useFetchStreams=b}}const Md="(default)";class zc{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="__type__",zN="__max__",ld={mapValue:{}},jw="__vector__",Vd="value";function po(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?qg(i)?4:BN(i)?9007199254740991:UN(i)?10:11:He()}function ls(i,e){if(i===e)return!0;const t=po(i);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return jc(i).isEqual(jc(e));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const f=fo(l.timestampValue),_=fo(h.timestampValue);return f.seconds===_.seconds&&f.nanos===_.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(l,h){return mo(l.bytesValue).isEqual(mo(h.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(l,h){return tn(l.geoPointValue.latitude)===tn(h.geoPointValue.latitude)&&tn(l.geoPointValue.longitude)===tn(h.geoPointValue.longitude)}(i,e);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return tn(l.integerValue)===tn(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const f=tn(l.doubleValue),_=tn(h.doubleValue);return f===_?Ld(f)===Ld(_):isNaN(f)&&isNaN(_)}return!1}(i,e);case 9:return pu(i.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return function(l,h){const f=l.mapValue.fields||{},_=h.mapValue.fields||{};if(ub(f)!==ub(_))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(_[y]===void 0||!ls(f[y],_[y])))return!1;return!0}(i,e);default:return He()}}function Uc(i,e){return(i.values||[]).find(t=>ls(t,e))!==void 0}function gu(i,e){if(i===e)return 0;const t=po(i),s=po(e);if(t!==s)return ot(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ot(i.booleanValue,e.booleanValue);case 2:return function(h,f){const _=tn(h.integerValue||h.doubleValue),y=tn(f.integerValue||f.doubleValue);return _<y?-1:_>y?1:_===y?0:isNaN(_)?isNaN(y)?0:-1:1}(i,e);case 3:return hb(i.timestampValue,e.timestampValue);case 4:return hb(jc(i),jc(e));case 5:return ot(i.stringValue,e.stringValue);case 6:return function(h,f){const _=mo(h),y=mo(f);return _.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(h,f){const _=h.split("/"),y=f.split("/");for(let b=0;b<_.length&&b<y.length;b++){const A=ot(_[b],y[b]);if(A!==0)return A}return ot(_.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,f){const _=ot(tn(h.latitude),tn(f.latitude));return _!==0?_:ot(tn(h.longitude),tn(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return db(i.arrayValue,e.arrayValue);case 10:return function(h,f){var _,y,b,A;const C=h.fields||{},k=f.fields||{},D=(_=C[Vd])===null||_===void 0?void 0:_.arrayValue,G=(y=k[Vd])===null||y===void 0?void 0:y.arrayValue,W=ot(((b=D==null?void 0:D.values)===null||b===void 0?void 0:b.length)||0,((A=G==null?void 0:G.values)===null||A===void 0?void 0:A.length)||0);return W!==0?W:db(D,G)}(i.mapValue,e.mapValue);case 11:return function(h,f){if(h===ld.mapValue&&f===ld.mapValue)return 0;if(h===ld.mapValue)return 1;if(f===ld.mapValue)return-1;const _=h.fields||{},y=Object.keys(_),b=f.fields||{},A=Object.keys(b);y.sort(),A.sort();for(let C=0;C<y.length&&C<A.length;++C){const k=ot(y[C],A[C]);if(k!==0)return k;const D=gu(_[y[C]],b[A[C]]);if(D!==0)return D}return ot(y.length,A.length)}(i.mapValue,e.mapValue);default:throw He()}}function hb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ot(i,e);const t=fo(i),s=fo(e),l=ot(t.seconds,s.seconds);return l!==0?l:ot(t.nanos,s.nanos)}function db(i,e){const t=i.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const h=gu(t[l],s[l]);if(h)return h}return ot(t.length,s.length)}function _u(i){return Xp(i)}function Xp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=fo(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return mo(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ze.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",l=!0;for(const h of t.values||[])l?l=!1:s+=",",s+=Xp(h);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let l="{",h=!0;for(const f of s)h?h=!1:l+=",",l+=`${f}:${Xp(t.fields[f])}`;return l+"}"}(i.mapValue):He()}function bd(i){switch(po(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(i);return e?16+bd(e):16;case 5:return 2*i.stringValue.length;case 6:return mo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,h)=>l+bd(h),0)}(i.arrayValue);case 10:case 11:return function(s){let l=0;return vo(s.fields,(h,f)=>{l+=h.length+bd(f)}),l}(i.mapValue);default:throw He()}}function Jp(i){return!!i&&"integerValue"in i}function Fg(i){return!!i&&"arrayValue"in i}function fb(i){return!!i&&"nullValue"in i}function mb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ed(i){return!!i&&"mapValue"in i}function UN(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vw])===null||t===void 0?void 0:t.stringValue)===jw}function Ic(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return vo(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ic(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(i.arrayValue.values[t]);return e}return Object.assign({},i)}function BN(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===zN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Dn.emptyPath(),s={},l=[];e.forEach((f,_)=>{if(!t.isImmediateParentOf(_)){const y=this.getFieldsMap(t);this.applyChanges(y,s,l),s={},l=[],t=_.popLast()}f?s[_.lastSegment()]=Ic(f):l.push(_.lastSegment())});const h=this.getFieldsMap(t);this.applyChanges(h,s,l)}delete(e){const t=this.field(e.popLast());Ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];Ed(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){vo(t,(l,h)=>e[l]=h);for(const l of s)delete e[l]}clone(){return new Ei(Ic(this.value))}}function zw(i){const e=[];return vo(i.fields,(t,s)=>{const l=new Dn([t]);if(Ed(s)){const h=zw(s.mapValue).fields;if(h.length===0)e.push(l);else for(const f of h)e.push(l.child(f))}else e.push(l)}),new Bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t,s,l,h,f,_){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=h,this.data=f,this.documentState=_}static newInvalidDocument(e){return new Qn(e,0,qe.min(),qe.min(),qe.min(),Ei.empty(),0)}static newFoundDocument(e,t,s,l){return new Qn(e,1,t,qe.min(),s,l,0)}static newNoDocument(e,t){return new Qn(e,2,t,qe.min(),qe.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,qe.min(),qe.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.position=e,this.inclusive=t}}function pb(i,e,t){let s=0;for(let l=0;l<i.position.length;l++){const h=e[l],f=i.position[l];if(h.field.isKeyField()?s=ze.comparator(ze.fromName(f.referenceValue),t.key):s=gu(f,t.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function gb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ls(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function HN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{}class mn extends Uw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new FN(e,t,s):t==="array-contains"?new KN(e,s):t==="in"?new $N(e,s):t==="not-in"?new QN(e,s):t==="array-contains-any"?new WN(e,s):new mn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new GN(e,s):new ZN(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(gu(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(gu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends Uw{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new us(e,t)}matches(e){return Bw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Bw(i){return i.op==="and"}function Hw(i){return qN(i)&&Bw(i)}function qN(i){for(const e of i.filters)if(e instanceof us)return!1;return!0}function eg(i){if(i instanceof mn)return i.field.canonicalString()+i.op.toString()+_u(i.value);if(Hw(i))return i.filters.map(e=>eg(e)).join(",");{const e=i.filters.map(t=>eg(t)).join(",");return`${i.op}(${e})`}}function qw(i,e){return i instanceof mn?function(s,l){return l instanceof mn&&s.op===l.op&&s.field.isEqual(l.field)&&ls(s.value,l.value)}(i,e):i instanceof us?function(s,l){return l instanceof us&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((h,f,_)=>h&&qw(f,l.filters[_]),!0):!1}(i,e):void He()}function Fw(i){return i instanceof mn?function(t){return`${t.field.canonicalString()} ${t.op} ${_u(t.value)}`}(i):i instanceof us?function(t){return t.op.toString()+" {"+t.getFilters().map(Fw).join(" ,")+"}"}(i):"Filter"}class FN extends mn{constructor(e,t,s){super(e,t,s),this.key=ze.fromName(s.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class GN extends mn{constructor(e,t){super(e,"in",t),this.keys=Gw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ZN extends mn{constructor(e,t){super(e,"not-in",t),this.keys=Gw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gw(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ze.fromName(s.referenceValue))}class KN extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fg(t)&&Uc(t.arrayValue,this.value)}}class $N extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}}class QN extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Uc(this.value.arrayValue,t)}}class WN extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Uc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t=null,s=[],l=[],h=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=f,this.endAt=_,this.le=null}}function _b(i,e=null,t=[],s=[],l=null,h=null,f=null){return new YN(i,e,t,s,l,h,f)}function Gg(i){const e=Ze(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>eg(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(h){return h.field.canonicalString()+h.dir}(s)).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>_u(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>_u(s)).join(",")),e.le=t}return e.le}function Zg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!HN(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!qw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!gb(i.startAt,e.startAt)&&gb(i.endAt,e.endAt)}function tg(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t=null,s=[],l=[],h=null,f="F",_=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=f,this.startAt=_,this.endAt=y,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function XN(i,e,t,s,l,h,f,_){return new sf(i,e,t,s,l,h,f,_)}function af(i){return new sf(i)}function yb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function JN(i){return i.collectionGroup!==null}function Nc(i){const e=Ze(i);if(e.he===null){e.he=[];const t=new Set;for(const h of e.explicitOrderBy)e.he.push(h),t.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let _=new gn(Dn.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(b=>{b.isInequality()&&(_=_.add(b.field))})}),_})(e).forEach(h=>{t.has(h.canonicalString())||h.isKeyField()||e.he.push(new zd(h,s))}),t.has(Dn.keyField().canonicalString())||e.he.push(new zd(Dn.keyField(),s))}return e.he}function as(i){const e=Ze(i);return e.Pe||(e.Pe=eP(e,Nc(i))),e.Pe}function eP(i,e){if(i.limitType==="F")return _b(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new zd(l.field,h)});const t=i.endAt?new jd(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new jd(i.startAt.position,i.startAt.inclusive):null;return _b(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function ng(i,e,t){return new sf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function of(i,e){return Zg(as(i),as(e))&&i.limitType===e.limitType}function Zw(i){return`${Gg(as(i))}|lt:${i.limitType}`}function iu(i){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(l=>Fw(l)).join(", ")}]`),nf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(l=>_u(l)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(l=>_u(l)).join(",")),`Target(${s})`}(as(i))}; limitType=${i.limitType})`}function lf(i,e){return e.isFoundDocument()&&function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):ze.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(i,e)&&function(s,l){for(const h of Nc(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(i,e)&&function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0}(i,e)&&function(s,l){return!(s.startAt&&!function(f,_,y){const b=pb(f,_,y);return f.inclusive?b<=0:b<0}(s.startAt,Nc(s),l)||s.endAt&&!function(f,_,y){const b=pb(f,_,y);return f.inclusive?b>=0:b>0}(s.endAt,Nc(s),l))}(i,e)}function tP(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Kw(i){return(e,t)=>{let s=!1;for(const l of Nc(i)){const h=nP(l,e,t);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function nP(i,e,t){const s=i.field.isKeyField()?ze.comparator(e.key,t.key):function(h,f,_){const y=f.data.field(h),b=_.data.field(h);return y!==null&&b!==null?gu(y,b):He()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return He()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,e))return h}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return void(l[h]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(t,s)=>{for(const[l,h]of s)e(l,h)})}isEmpty(){return Pw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new zt(ze.comparator);function na(){return iP}const $w=new zt(ze.comparator);function xc(...i){let e=$w;for(const t of i)e=e.insert(t.key,t);return e}function Qw(i){let e=$w;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function rl(){return Pc()}function Ww(){return Pc()}function Pc(){return new gl(i=>i.toString(),(i,e)=>i.isEqual(e))}const rP=new zt(ze.comparator),sP=new gn(ze.comparator);function rt(...i){let e=sP;for(const t of i)e=e.add(t);return e}const aP=new gn(ot);function oP(){return aP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function Yw(i){return{integerValue:""+i}}function lP(i,e){return DN(e)?Yw(e):Kg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function uP(i,e,t){return i instanceof Ud?function(l,h){const f={fields:{[Dw]:{stringValue:Ow},[Mw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&qg(h)&&(h=rf(h)),h&&(f.fields[Lw]=h),{mapValue:f}}(t,e):i instanceof Bc?Jw(i,e):i instanceof Hc?eT(i,e):function(l,h){const f=Xw(l,h),_=vb(f)+vb(l.Ie);return Jp(f)&&Jp(l.Ie)?Yw(_):Kg(l.serializer,_)}(i,e)}function cP(i,e,t){return i instanceof Bc?Jw(i,e):i instanceof Hc?eT(i,e):t}function Xw(i,e){return i instanceof Bd?function(s){return Jp(s)||function(h){return!!h&&"doubleValue"in h}(s)}(e)?e:{integerValue:0}:null}class Ud extends uf{}class Bc extends uf{constructor(e){super(),this.elements=e}}function Jw(i,e){const t=tT(e);for(const s of i.elements)t.some(l=>ls(l,s))||t.push(s);return{arrayValue:{values:t}}}class Hc extends uf{constructor(e){super(),this.elements=e}}function eT(i,e){let t=tT(e);for(const s of i.elements)t=t.filter(l=>!ls(l,s));return{arrayValue:{values:t}}}class Bd extends uf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function vb(i){return tn(i.integerValue||i.doubleValue)}function tT(i){return Fg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function hP(i,e){return i.field.isEqual(e.field)&&function(s,l){return s instanceof Bc&&l instanceof Bc||s instanceof Hc&&l instanceof Hc?pu(s.elements,l.elements,ls):s instanceof Bd&&l instanceof Bd?ls(s.Ie,l.Ie):s instanceof Ud&&l instanceof Ud}(i.transform,e.transform)}class dP{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class cf{}function nT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new $g(i.key,or.none()):new Jc(i.key,i.data,or.none());{const t=i.data,s=Ei.empty();let l=new gn(Dn.comparator);for(let h of e.fields)if(!l.has(h)){let f=t.field(h);f===null&&h.length>1&&(h=h.popLast(),f=t.field(h)),f===null?s.delete(h):s.set(h,f),l=l.add(h)}return new bo(i.key,s,new Bi(l.toArray()),or.none())}}function fP(i,e,t){i instanceof Jc?function(l,h,f){const _=l.value.clone(),y=Eb(l.fieldTransforms,h,f.transformResults);_.setAll(y),h.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(i,e,t):i instanceof bo?function(l,h,f){if(!wd(l.precondition,h))return void h.convertToUnknownDocument(f.version);const _=Eb(l.fieldTransforms,h,f.transformResults),y=h.data;y.setAll(iT(l)),y.setAll(_),h.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(i,e,t):function(l,h,f){h.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,t)}function kc(i,e,t,s){return i instanceof Jc?function(h,f,_,y){if(!wd(h.precondition,f))return _;const b=h.value.clone(),A=wb(h.fieldTransforms,y,f);return b.setAll(A),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null}(i,e,t,s):i instanceof bo?function(h,f,_,y){if(!wd(h.precondition,f))return _;const b=wb(h.fieldTransforms,y,f),A=f.data;return A.setAll(iT(h)),A.setAll(b),f.convertToFoundDocument(f.version,A).setHasLocalMutations(),_===null?null:_.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(C=>C.field))}(i,e,t,s):function(h,f,_){return wd(h.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):_}(i,e,t)}function mP(i,e){let t=null;for(const s of i.fieldTransforms){const l=e.data.field(s.field),h=Xw(s.transform,l||null);h!=null&&(t===null&&(t=Ei.empty()),t.set(s.field,h))}return t||null}function bb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&pu(s,l,(h,f)=>hP(h,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Jc extends cf{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class bo extends cf{constructor(e,t,s,l,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function iT(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Eb(i,e,t){const s=new Map;yt(i.length===t.length);for(let l=0;l<t.length;l++){const h=i[l],f=h.transform,_=e.data.field(h.field);s.set(h.field,cP(f,_,t[l]))}return s}function wb(i,e,t){const s=new Map;for(const l of i){const h=l.transform,f=t.data.field(l.field);s.set(l.field,uP(h,f,e))}return s}class $g extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pP extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(e.key)&&fP(h,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=kc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=kc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ww();return this.mutations.forEach(l=>{const h=e.get(l.key),f=h.overlayedDocument;let _=this.applyToLocalView(f,h.mutatedFields);_=t.has(l.key)?null:_;const y=nT(f,_);y!==null&&s.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(qe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rt())}isEqual(e){return this.batchId===e.batchId&&pu(this.mutations,e.mutations,(t,s)=>bb(t,s))&&pu(this.baseMutations,e.baseMutations,(t,s)=>bb(t,s))}}class Qg{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){yt(e.mutations.length===s.length);let l=function(){return rP}();const h=e.mutations;for(let f=0;f<h.length;f++)l=l.insert(h[f].key,s[f].version);return new Qg(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,ut;function vP(i){switch(i){case ge.OK:return He();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return He()}}function rT(i){if(i===void 0)return ta("GRPC error has no .code"),ge.UNKNOWN;switch(i){case ln.OK:return ge.OK;case ln.CANCELLED:return ge.CANCELLED;case ln.UNKNOWN:return ge.UNKNOWN;case ln.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case ln.INTERNAL:return ge.INTERNAL;case ln.UNAVAILABLE:return ge.UNAVAILABLE;case ln.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case ln.NOT_FOUND:return ge.NOT_FOUND;case ln.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case ln.ABORTED:return ge.ABORTED;case ln.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case ln.DATA_LOSS:return ge.DATA_LOSS;default:return He()}}(ut=ln||(ln={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=new oo([4294967295,4294967295],0);function Tb(i){const e=bP().encode(i),t=new ww;return t.update(e),new Uint8Array(t.digest())}function xb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new oo([t,s],0),new oo([l,h],0)]}class Wg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Sc(`Invalid padding: ${t}`);if(s<0)throw new Sc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Sc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Sc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=oo.fromNumber(this.Ee)}Ae(e,t,s){let l=e.add(t.multiply(oo.fromNumber(s)));return l.compare(EP)===1&&(l=new oo([l.getBits(0),l.getBits(1)],0)),l.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Tb(e),[s,l]=xb(t);for(let h=0;h<this.hashCount;h++){const f=this.Ae(s,l,h);if(!this.Re(f))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),f=new Wg(h,l,t);return s.forEach(_=>f.insert(_)),f}insert(e){if(this.Ee===0)return;const t=Tb(e),[s,l]=xb(t);for(let h=0;h<this.hashCount;h++){const f=this.Ae(s,l,h);this.Ve(f)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,s,l,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,eh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new hf(qe.min(),l,new zt(ot),na(),rt())}}class eh{constructor(e,t,s,l,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new eh(s,t,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,s,l){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=l}}class sT{constructor(e,t){this.targetId=e,this.ge=t}}class aT{constructor(e,t,s=Ln.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class Sb{constructor(){this.pe=0,this.ye=Ab(),this.we=Ln.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=rt(),t=rt(),s=rt();return this.ye.forEach((l,h)=>{switch(h){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:He()}}),new eh(this.we,this.be,e,t,s)}Me(){this.Se=!1,this.ye=Ab()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,yt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class wP{constructor(e){this.ke=e,this.qe=new Map,this.Qe=na(),this.$e=ud(),this.Ke=ud(),this.Ue=new zt(ot)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:He()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,l)=>{this.Je(l)&&t(l)})}Ze(e){const t=e.targetId,s=e.ge.count,l=this.Xe(t);if(l){const h=l.target;if(tg(h))if(s===0){const f=new ze(h.path);this.ze(t,f,Qn.newNoDocument(f,qe.min()))}else yt(s===1);else{const f=this.et(t);if(f!==s){const _=this.tt(e),y=_?this.nt(_,e,f):1;if(y!==0){this.Ye(t);const b=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,b)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=t;let f,_;try{f=mo(s).toUint8Array()}catch(y){if(y instanceof kw)return mu("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{_=new Wg(f,l,h)}catch(y){return mu(y instanceof Sc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return _.Ee===0?null:_}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let l=0;return s.forEach(h=>{const f=this.ke.it(),_=`projects/${f.projectId}/databases/${f.database}/documents/${h.path.canonicalString()}`;e.mightContain(_)||(this.ze(t,h,null),l++)}),l}ot(e){const t=new Map;this.qe.forEach((h,f)=>{const _=this.Xe(f);if(_){if(h.current&&tg(_.target)){const y=new ze(_.target.path);this._t(y).has(f)||this.ut(f,y)||this.ze(f,y,Qn.newNoDocument(y,e))}h.ve&&(t.set(f,h.Fe()),h.Me())}});let s=rt();this.Ke.forEach((h,f)=>{let _=!0;f.forEachWhile(y=>{const b=this.Xe(y);return!b||b.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)}),_&&(s=s.add(h))}),this.Qe.forEach((h,f)=>f.setReadTime(e));const l=new hf(e,t,this.Ue,this.Qe,s);return this.Qe=na(),this.$e=ud(),this.Ke=ud(),this.Ue=new zt(ot),l}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const l=this.He(e);this.ut(e,t)?l.xe(t,1):l.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Sb,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new gn(ot),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new gn(ot),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Sb),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function ud(){return new zt(ze.comparator)}function Ab(){return new zt(ze.comparator)}const TP={asc:"ASCENDING",desc:"DESCENDING"},xP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SP={and:"AND",or:"OR"};class AP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ig(i,e){return i.useProto3Json||nf(e)?e:{value:e}}function Hd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function RP(i,e){return Hd(i,e.toTimestamp())}function os(i){return yt(!!i),qe.fromTimestamp(function(t){const s=fo(t);return new pn(s.seconds,s.nanos)}(i))}function Yg(i,e){return rg(i,e).canonicalString()}function rg(i,e){const t=function(l){return new Ot(["projects",l.projectId,"databases",l.database])}(i).child("documents");return e===void 0?t:t.child(e)}function lT(i){const e=Ot.fromString(i);return yt(fT(e)),e}function sg(i,e){return Yg(i.databaseId,e.path)}function Sp(i,e){const t=lT(e);if(t.get(1)!==i.databaseId.projectId)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ze(cT(t))}function uT(i,e){return Yg(i.databaseId,e)}function CP(i){const e=lT(i);return e.length===4?Ot.emptyPath():cT(e)}function ag(i){return new Ot(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function cT(i){return yt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Rb(i,e,t){return{name:sg(i,e),fields:t.value.mapValue.fields}}function IP(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:He()}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],h=function(b,A){return b.useProto3Json?(yt(A===void 0||typeof A=="string"),Ln.fromBase64String(A||"")):(yt(A===void 0||A instanceof Buffer||A instanceof Uint8Array),Ln.fromUint8Array(A||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&function(b){const A=b.code===void 0?ge.UNKNOWN:rT(b.code);return new Pe(A,b.message||"")}(f);t=new aT(s,l,h,_||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Sp(i,s.document.name),h=os(s.document.updateTime),f=s.document.createTime?os(s.document.createTime):qe.min(),_=new Ei({mapValue:{fields:s.document.fields}}),y=Qn.newFoundDocument(l,h,f,_),b=s.targetIds||[],A=s.removedTargetIds||[];t=new Td(b,A,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Sp(i,s.document),h=s.readTime?os(s.readTime):qe.min(),f=Qn.newNoDocument(l,h),_=s.removedTargetIds||[];t=new Td([],_,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Sp(i,s.document),h=s.removedTargetIds||[];t=new Td([],h,l,null)}else{if(!("filter"in e))return He();{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,f=new yP(l,h),_=s.targetId;t=new sT(_,f)}}return t}function NP(i,e){let t;if(e instanceof Jc)t={update:Rb(i,e.key,e.value)};else if(e instanceof $g)t={delete:sg(i,e.key)};else if(e instanceof bo)t={update:Rb(i,e.key,e.data),updateMask:zP(e.fieldMask)};else{if(!(e instanceof pP))return He();t={verify:sg(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(h,f){const _=f.transform;if(_ instanceof Ud)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Bc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Hc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Bd)return{fieldPath:f.field.canonicalString(),increment:_.Ie};throw He()}(0,s))),e.precondition.isNone||(t.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:RP(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:He()}(i,e.precondition)),t}function PP(i,e){return i&&i.length>0?(yt(e!==void 0),i.map(t=>function(l,h){let f=l.updateTime?os(l.updateTime):os(h);return f.isEqual(qe.min())&&(f=os(h)),new dP(f,l.transformResults||[])}(t,e))):[]}function kP(i,e){return{documents:[uT(i,e.path)]}}function OP(i,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=uT(i,l);const h=function(b){if(b.length!==0)return dT(us.create(b,"and"))}(e.filters);h&&(t.structuredQuery.where=h);const f=function(b){if(b.length!==0)return b.map(A=>function(k){return{field:ru(k.field),direction:MP(k.dir)}}(A))}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const _=ig(i,e.limit);return _!==null&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt=function(b){return{before:b.inclusive,values:b.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(b){return{before:!b.inclusive,values:b.position}}(e.endAt)),{ht:t,parent:l}}function DP(i){let e=CP(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){yt(s===1);const A=t.from[0];A.allDescendants?l=A.collectionId:e=e.child(A.collectionId)}let h=[];t.where&&(h=function(C){const k=hT(C);return k instanceof us&&Hw(k)?k.getFilters():[k]}(t.where));let f=[];t.orderBy&&(f=function(C){return C.map(k=>function(G){return new zd(su(G.field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(k))}(t.orderBy));let _=null;t.limit&&(_=function(C){let k;return k=typeof C=="object"?C.value:C,nf(k)?null:k}(t.limit));let y=null;t.startAt&&(y=function(C){const k=!!C.before,D=C.values||[];return new jd(D,k)}(t.startAt));let b=null;return t.endAt&&(b=function(C){const k=!C.before,D=C.values||[];return new jd(D,k)}(t.endAt)),XN(e,l,f,h,_,"F",y,b)}function LP(i,e){const t=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hT(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=su(t.unaryFilter.field);return mn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=su(t.unaryFilter.field);return mn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=su(t.unaryFilter.field);return mn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=su(t.unaryFilter.field);return mn.create(f,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(i):i.fieldFilter!==void 0?function(t){return mn.create(su(t.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return us.create(t.compositeFilter.filters.map(s=>hT(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return He()}}(t.compositeFilter.op))}(i):He()}function MP(i){return TP[i]}function VP(i){return xP[i]}function jP(i){return SP[i]}function ru(i){return{fieldPath:i.canonicalString()}}function su(i){return Dn.fromServerFormat(i.fieldPath)}function dT(i){return i instanceof mn?function(t){if(t.op==="=="){if(mb(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NAN"}};if(fb(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mb(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NOT_NAN"}};if(fb(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ru(t.field),op:VP(t.op),value:t.value}}}(i):i instanceof us?function(t){const s=t.getFilters().map(l=>dT(l));return s.length===1?s[0]:{compositeFilter:{op:jP(t.op),filters:s}}}(i):He()}function zP(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t,s,l,h=qe.min(),f=qe.min(),_=Ln.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_,this.expectedCount=y}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.Tt=e}}function BP(i){const e=DP({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ng(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.Tn=new qP}addToCollectionParentIndex(e,t){return this.Tn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ho.min())}updateCollectionGroup(e,t,s){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class qP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new gn(Ot.comparator),h=!l.has(s);return this.index[t]=l.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new gn(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mT=41943040;class bi{static withCacheSize(e){return new bi(e,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi.DEFAULT_COLLECTION_PERCENTILE=10,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bi.DEFAULT=new bi(mT,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bi.DISABLED=new bi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new yu(0)}static Un(){return new yu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="LruGarbageCollector",FP=1048576;function Nb([i,e],[t,s]){const l=ot(i,t);return l===0?ot(e,s):l}class GP{constructor(e){this.Hn=e,this.buffer=new gn(Nb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Nb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Re(Ib,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ru(t)?Re(Ib,"Ignoring IndexedDB error during garbage collection: ",t):await Au(t)}await this.er(3e5)})}}class KP{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return de.resolve(tf.ae);const s=new GP(t);return this.tr.forEachTarget(e,l=>s.Zn(l.sequenceNumber)).next(()=>this.tr.rr(e,l=>s.Zn(l))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Cb)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cb):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,l,h,f,_,y,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,f=Date.now(),this.nthSequenceNumber(e,l))).next(C=>(s=C,_=Date.now(),this.removeTargets(e,s,t))).next(C=>(h=C,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(C=>(b=Date.now(),nu()<=it.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-A}ms
	Determined least recently used ${l} in `+(_-f)+`ms
	Removed ${h} targets in `+(y-_)+`ms
	Removed ${C} documents in `+(b-y)+`ms
Total Duration: ${b-A}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:C})))}}function $P(i,e){return new KP(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.changes=new gl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?de.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,t))).next(l=>(s!==null&&kc(s.mutation,l,Bi.empty(),pn.now()),l))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,rt()).next(()=>s))}getLocalViewOfDocuments(e,t,s=rt()){const l=rl();return this.populateOverlays(e,l,t).next(()=>this.computeViews(e,t,l,s).next(h=>{let f=xc();return h.forEach((_,y)=>{f=f.insert(_,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const s=rl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,rt()))}populateOverlays(e,t,s){const l=[];return s.forEach(h=>{t.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(e,l).next(h=>{h.forEach((f,_)=>{t.set(f,_)})})}computeViews(e,t,s,l){let h=na();const f=Pc(),_=function(){return Pc()}();return t.forEach((y,b)=>{const A=s.get(b.key);l.has(b.key)&&(A===void 0||A.mutation instanceof bo)?h=h.insert(b.key,b):A!==void 0?(f.set(b.key,A.mutation.getFieldMask()),kc(A.mutation,b,A.mutation.getFieldMask(),pn.now())):f.set(b.key,Bi.empty())}),this.recalculateAndSaveOverlays(e,h).next(y=>(y.forEach((b,A)=>f.set(b,A)),t.forEach((b,A)=>{var C;return _.set(b,new WP(A,(C=f.get(b))!==null&&C!==void 0?C:null))}),_))}recalculateAndSaveOverlays(e,t){const s=Pc();let l=new zt((f,_)=>f-_),h=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const _ of f)_.keys().forEach(y=>{const b=t.get(y);if(b===null)return;let A=s.get(y)||Bi.empty();A=_.applyToLocalView(b,A),s.set(y,A);const C=(l.get(_.batchId)||rt()).add(y);l=l.insert(_.batchId,C)})}).next(()=>{const f=[],_=l.getReverseIterator();for(;_.hasNext();){const y=_.getNext(),b=y.key,A=y.value,C=Ww();A.forEach(k=>{if(!h.has(k)){const D=nT(t.get(k),s.get(k));D!==null&&C.set(k,D),h=h.add(k)}}),f.push(this.documentOverlayCache.saveOverlays(e,b,C))}return de.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,l){return function(f){return ze.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next(h=>{const f=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-h.size):de.resolve(rl());let _=Vc,y=h;return f.next(b=>de.forEach(b,(A,C)=>(_<C.largestBatchId&&(_=C.largestBatchId),h.get(A)?de.resolve():this.remoteDocumentCache.getEntry(e,A).next(k=>{y=y.insert(A,k)}))).next(()=>this.populateOverlays(e,b,h)).next(()=>this.computeViews(e,y,b,rt())).next(A=>({batchId:_,changes:Qw(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(s=>{let l=xc();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const h=t.collectionGroup;let f=xc();return this.indexManager.getCollectionParents(e,h).next(_=>de.forEach(_,y=>{const b=function(C,k){return new sf(k,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(t,y.child(h));return this.getDocumentsMatchingCollectionQuery(e,b,s,l).next(A=>{A.forEach((C,k)=>{f=f.insert(C,k)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(h=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,h,l))).next(f=>{h.forEach((y,b)=>{const A=b.getKey();f.get(A)===null&&(f=f.insert(A,Qn.newInvalidDocument(A)))});let _=xc();return f.forEach((y,b)=>{const A=h.get(y);A!==void 0&&kc(A.mutation,b,Bi.empty(),pn.now()),lf(t,b)&&(_=_.insert(y,b))}),_})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return de.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(l){return{id:l.id,version:l.version,createTime:os(l.createTime)}}(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(l){return{name:l.name,query:BP(l.bundledQuery),readTime:os(l.readTime)}}(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.overlays=new zt(ze.comparator),this.Rr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const s=rl();return de.forEach(t,l=>this.getOverlay(e,l).next(h=>{h!==null&&s.set(l,h)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((l,h)=>{this.Et(e,t,h)}),de.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.Rr.get(s);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.Rr.delete(s)),de.resolve()}getOverlaysForCollection(e,t,s){const l=rl(),h=t.length+1,f=new ze(t.child("")),_=this.overlays.getIteratorFrom(f);for(;_.hasNext();){const y=_.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===h&&y.largestBatchId>s&&l.set(y.getKey(),y)}return de.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let h=new zt((b,A)=>b-A);const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>s){let A=h.get(b.largestBatchId);A===null&&(A=rl(),h=h.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const _=rl(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,A)=>_.set(b,A)),!(_.size()>=l)););return de.resolve(_)}Et(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.Rr.get(l.largestBatchId).delete(s.key);this.Rr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new _P(t,s));let h=this.Rr.get(t);h===void 0&&(h=rt(),this.Rr.set(t,h)),this.Rr.set(t,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.Vr=new gn(Sn.mr),this.gr=new gn(Sn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new Sn(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new Sn(e,t))}br(e,t){e.forEach(s=>this.removeReference(s,t))}Sr(e){const t=new ze(new Ot([])),s=new Sn(t,e),l=new Sn(t,e+1),h=[];return this.gr.forEachInRange([s,l],f=>{this.wr(f),h.push(f.key)}),h}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ze(new Ot([])),s=new Sn(t,e),l=new Sn(t,e+1);let h=rt();return this.gr.forEachInRange([s,l],f=>{h=h.add(f.key)}),h}containsKey(e){const t=new Sn(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Sn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ze.comparator(e.key,t.key)||ot(e.Cr,t.Cr)}static pr(e,t){return ot(e.Cr,t.Cr)||ze.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new gn(Sn.mr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const h=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new gP(h,t,s,l);this.mutationQueue.push(f);for(const _ of l)this.Mr=this.Mr.add(new Sn(_.key,h)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return de.resolve(f)}lookupMutationBatch(e,t){return de.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.Nr(s),h=l<0?0:l;return de.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Hg:this.Fr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Sn(t,0),l=new Sn(t,Number.POSITIVE_INFINITY),h=[];return this.Mr.forEachInRange([s,l],f=>{const _=this.Or(f.Cr);h.push(_)}),de.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gn(ot);return t.forEach(l=>{const h=new Sn(l,0),f=new Sn(l,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([h,f],_=>{s=s.add(_.Cr)})}),de.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let h=s;ze.isDocumentKey(h)||(h=h.child(""));const f=new Sn(new ze(h),0);let _=new gn(ot);return this.Mr.forEachWhile(y=>{const b=y.key.path;return!!s.isPrefixOf(b)&&(b.length===l&&(_=_.add(y.Cr)),!0)},f),de.resolve(this.Br(_))}Br(e){const t=[];return e.forEach(s=>{const l=this.Or(s);l!==null&&t.push(l)}),t}removeMutationBatch(e,t){yt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return de.forEach(t.mutations,l=>{const h=new Sn(l.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new Sn(t,0),l=this.Mr.firstAfterOrEqual(s);return de.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.kr=e,this.docs=function(){return new zt(ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),h=l?l.size:0,f=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return de.resolve(s?s.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let s=na();return t.forEach(l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():Qn.newInvalidDocument(l))}),de.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let h=na();const f=t.path,_=new ze(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(_);for(;y.hasNext();){const{key:b,value:{document:A}}=y.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||NN(IN(A),s)<=0||(l.has(A.key)||lf(t,A))&&(h=h.insert(A.key,A.mutableCopy()))}return de.resolve(h)}getAllFromCollectionGroup(e,t,s,l){He()}qr(e,t){return de.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new ik(this)}getSize(e){return de.resolve(this.size)}}class ik extends QP{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?t.push(this.Ir.addEntry(e,l)):this.Ir.removeEntry(s)}),de.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.persistence=e,this.Qr=new gl(t=>Gg(t),Zg),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Xg,this.targetCount=0,this.Ur=yu.Kn()}forEachTarget(e,t){return this.Qr.forEach((s,l)=>t(l)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),de.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new yu(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.zn(t),de.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,s){let l=0;const h=[];return this.Qr.forEach((f,_)=>{_.sequenceNumber<=t&&s.get(_.targetId)===null&&(this.Qr.delete(f),h.push(this.removeMatchingKeysForTargetId(e,_.targetId)),l++)}),de.waitFor(h).next(()=>l)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return de.resolve(s)}addMatchingKeys(e,t,s){return this.Kr.yr(t,s),de.resolve()}removeMatchingKeys(e,t,s){this.Kr.br(t,s);const l=this.persistence.referenceDelegate,h=[];return l&&t.forEach(f=>{h.push(l.markPotentiallyOrphaned(e,f))}),de.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Kr.vr(t);return de.resolve(s)}containsKey(e,t){return de.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new tf(0),this.zr=!1,this.zr=!0,this.jr=new ek,this.referenceDelegate=e(this),this.Hr=new rk(this),this.indexManager=new HP,this.remoteDocumentCache=function(l){return new nk(l)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new UP(t),this.Yr=new XP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new tk(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){Re("MemoryPersistence","Starting transaction:",e);const l=new sk(this.Gr.next());return this.referenceDelegate.Zr(),s(l).next(h=>this.referenceDelegate.Xr(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}ei(e,t){return de.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class sk extends kN{constructor(e){super(),this.currentSequenceNumber=e}}class Jg{constructor(e){this.persistence=e,this.ti=new Xg,this.ni=null}static ri(e){return new Jg(e)}get ii(){if(this.ni)return this.ni;throw He()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),de.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),de.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(l=>this.ii.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(l=>{l.forEach(h=>this.ii.add(h.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.ii,s=>{const l=ze.fromPath(s);return this.si(e,l).next(h=>{h||t.removeEntry(l,qe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return de.or([()=>de.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class qd{constructor(e,t){this.persistence=e,this.oi=new gl(s=>LN(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=$P(this,t)}static ri(e,t){return new qd(e,t)}Zr(){}Xr(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(l=>s+l))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return de.forEach(this.oi,(s,l)=>this.ar(e,s,l).next(h=>h?de.resolve():t(l)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.qr(e,f=>this.ar(e,f,t).next(_=>{_||(s++,h.removeEntry(f,qe.min()))})).next(()=>h.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),de.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),de.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}ar(e,t,s){return de.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.oi.get(t);return de.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=l}static Yi(e,t){let s=rt(),l=rt();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new e_(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return kR()?8:ON(Wn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,l){const h={result:null};return this.rs(e,t).next(f=>{h.result=f}).next(()=>{if(!h.result)return this.ss(e,t,l,s).next(f=>{h.result=f})}).next(()=>{if(h.result)return;const f=new ak;return this._s(e,t,f).next(_=>{if(h.result=_,this.Xi)return this.us(e,t,f,_.size)})}).next(()=>h.result)}us(e,t,s,l){return s.documentReadCount<this.es?(nu()<=it.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",iu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),de.resolve()):(nu()<=it.DEBUG&&Re("QueryEngine","Query:",iu(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ts*l?(nu()<=it.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",iu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(t))):de.resolve())}rs(e,t){if(yb(t))return de.resolve(null);let s=as(t);return this.indexManager.getIndexType(e,s).next(l=>l===0?null:(t.limit!==null&&l===1&&(t=ng(t,null,"F"),s=as(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const f=rt(...h);return this.ns.getDocuments(e,f).next(_=>this.indexManager.getMinOffset(e,s).next(y=>{const b=this.cs(t,_);return this.ls(t,b,f,y.readTime)?this.rs(e,ng(t,null,"F")):this.hs(e,b,t,y)}))})))}ss(e,t,s,l){return yb(t)||l.isEqual(qe.min())?de.resolve(null):this.ns.getDocuments(e,s).next(h=>{const f=this.cs(t,h);return this.ls(t,f,s,l)?de.resolve(null):(nu()<=it.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),iu(t)),this.hs(e,f,t,CN(l,Vc)).next(_=>_))})}cs(e,t){let s=new gn(Kw(e));return t.forEach((l,h)=>{lf(e,h)&&(s=s.add(h))}),s}ls(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const h=e.limitType==="F"?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}_s(e,t,s){return nu()<=it.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",iu(t)),this.ns.getDocumentsMatchingQuery(e,t,ho.min(),s)}hs(e,t,s,l){return this.ns.getDocumentsMatchingQuery(e,s,l).next(h=>(t.forEach(f=>{h=h.insert(f.key,f)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="LocalStore",lk=3e8;class uk{constructor(e,t,s,l){this.persistence=e,this.Ps=t,this.serializer=l,this.Ts=new zt(ot),this.Is=new gl(h=>Gg(h),Zg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YP(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function ck(i,e,t,s){return new uk(i,e,t,s)}async function gT(i,e){const t=Ze(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next(h=>(l=h,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(h=>{const f=[],_=[];let y=rt();for(const b of l){f.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}for(const b of h){_.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}return t.localDocuments.getDocuments(s,y).next(b=>({Rs:b,removedBatchIds:f,addedBatchIds:_}))})})}function hk(i,e){const t=Ze(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),h=t.ds.newChangeBuffer({trackRemovals:!0});return function(_,y,b,A){const C=b.batch,k=C.keys();let D=de.resolve();return k.forEach(G=>{D=D.next(()=>A.getEntry(y,G)).next(W=>{const K=b.docVersions.get(G);yt(K!==null),W.version.compareTo(K)<0&&(C.applyToRemoteDocument(W,b),W.isValidDocument()&&(W.setReadTime(b.commitVersion),A.addEntry(W)))})}),D.next(()=>_.mutationQueue.removeMutationBatch(y,C))}(t,s,e,h).next(()=>h.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(_){let y=rt();for(let b=0;b<_.mutationResults.length;++b)_.mutationResults[b].transformResults.length>0&&(y=y.add(_.batch.mutations[b].key));return y}(e))).next(()=>t.localDocuments.getDocuments(s,l))})}function _T(i){const e=Ze(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function dk(i,e){const t=Ze(i),s=e.snapshotVersion;let l=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const f=t.ds.newChangeBuffer({trackRemovals:!0});l=t.Ts;const _=[];e.targetChanges.forEach((A,C)=>{const k=l.get(C);if(!k)return;_.push(t.Hr.removeMatchingKeys(h,A.removedDocuments,C).next(()=>t.Hr.addMatchingKeys(h,A.addedDocuments,C)));let D=k.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(C)!==null?D=D.withResumeToken(Ln.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):A.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(A.resumeToken,s)),l=l.insert(C,D),function(W,K,te){return W.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=lk?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0}(k,D,A)&&_.push(t.Hr.updateTargetData(h,D))});let y=na(),b=rt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(h,A))}),_.push(fk(h,f,e.documentUpdates).next(A=>{y=A.Vs,b=A.fs})),!s.isEqual(qe.min())){const A=t.Hr.getLastRemoteSnapshotVersion(h).next(C=>t.Hr.setTargetsMetadata(h,h.currentSequenceNumber,s));_.push(A)}return de.waitFor(_).next(()=>f.apply(h)).next(()=>t.localDocuments.getLocalViewOfDocuments(h,y,b)).next(()=>y)}).then(h=>(t.Ts=l,h))}function fk(i,e,t){let s=rt(),l=rt();return t.forEach(h=>s=s.add(h)),e.getEntries(i,s).next(h=>{let f=na();return t.forEach((_,y)=>{const b=h.get(_);y.isFoundDocument()!==b.isFoundDocument()&&(l=l.add(_)),y.isNoDocument()&&y.version.isEqual(qe.min())?(e.removeEntry(_,y.readTime),f=f.insert(_,y)):!b.isValidDocument()||y.version.compareTo(b.version)>0||y.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(y),f=f.insert(_,y)):Re(t_,"Ignoring outdated watch update for ",_,". Current version:",b.version," Watch version:",y.version)}),{Vs:f,fs:l}})}function mk(i,e){const t=Ze(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Hg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function pk(i,e){const t=Ze(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return t.Hr.getTargetData(s,e).next(h=>h?(l=h,de.resolve(l)):t.Hr.allocateTargetId(s).next(f=>(l=new ro(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=t.Ts.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function og(i,e,t){const s=Ze(i),l=s.Ts.get(e),h=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",h,f=>s.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!Ru(f))throw f;Re(t_,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(l.target)}function Pb(i,e,t){const s=Ze(i);let l=qe.min(),h=rt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,b,A){const C=Ze(y),k=C.Is.get(A);return k!==void 0?de.resolve(C.Ts.get(k)):C.Hr.getTargetData(b,A)}(s,f,as(e)).next(_=>{if(_)return l=_.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,_.targetId).next(y=>{h=y})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,t?l:qe.min(),t?h:rt())).next(_=>(gk(s,tP(e),_),{documents:_,gs:h})))}function gk(i,e,t){let s=i.Es.get(e)||qe.min();t.forEach((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),i.Es.set(e,s)}class kb{constructor(){this.activeTargetIds=oP()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _k{constructor(){this.ho=new kb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new kb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="ConnectivityMonitor";class Db{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Re(Ob,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Re(Ob,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=null;function lg(){return cd===null?cd=function(){return 268435456+Math.round(2147483648*Math.random())}():cd++,"0x"+cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="RestConnection",vk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bk{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${l}`,this.wo=this.databaseId.database===Md?`project_id=${s}`:`project_id=${s}&database_id=${l}`}bo(e,t,s,l,h){const f=lg(),_=this.So(e,t.toUriEncodedString());Re(Ap,`Sending RPC '${e}' ${f}:`,_,s);const y={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(y,l,h),this.vo(e,_,y,s).then(b=>(Re(Ap,`Received RPC '${e}' ${f}: `,b),b),b=>{throw mu(Ap,`RPC '${e}' ${f} failed with error: `,b,"url: ",_,"request:",s),b})}Co(e,t,s,l,h,f){return this.bo(e,t,s,l,h)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Su}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((l,h)=>e[h]=l),s&&s.headers.forEach((l,h)=>e[h]=l)}So(e,t){const s=vk[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection";class wk extends bk{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,l){const h=lg();return new Promise((f,_)=>{const y=new Tw;y.setWithCredentials(!0),y.listenOnce(xw.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case vd.NO_ERROR:const A=y.getResponseJson();Re(Zn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(A)),f(A);break;case vd.TIMEOUT:Re(Zn,`RPC '${e}' ${h} timed out`),_(new Pe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const C=y.getStatus();if(Re(Zn,`RPC '${e}' ${h} failed with status:`,C,"response text:",y.getResponseText()),C>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const D=k==null?void 0:k.error;if(D&&D.status&&D.message){const G=function(K){const te=K.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(te)>=0?te:ge.UNKNOWN}(D.status);_(new Pe(G,D.message))}else _(new Pe(ge.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new Pe(ge.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{Re(Zn,`RPC '${e}' ${h} completed.`)}});const b=JSON.stringify(l);Re(Zn,`RPC '${e}' ${h} sending request:`,l),y.send(t,"POST",b,s,15)})}Wo(e,t,s){const l=lg(),h=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Rw(),_=Aw(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(y.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Do(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const A=h.join("");Re(Zn,`Creating RPC '${e}' stream ${l}: ${A}`,y);const C=f.createWebChannel(A,y);let k=!1,D=!1;const G=new Ek({Fo:K=>{D?Re(Zn,`Not sending because RPC '${e}' stream ${l} is closed:`,K):(k||(Re(Zn,`Opening RPC '${e}' stream ${l} transport.`),C.open(),k=!0),Re(Zn,`RPC '${e}' stream ${l} sending:`,K),C.send(K))},Mo:()=>C.close()}),W=(K,te,se)=>{K.listen(te,Z=>{try{se(Z)}catch(ue){setTimeout(()=>{throw ue},0)}})};return W(C,Tc.EventType.OPEN,()=>{D||(Re(Zn,`RPC '${e}' stream ${l} transport opened.`),G.Qo())}),W(C,Tc.EventType.CLOSE,()=>{D||(D=!0,Re(Zn,`RPC '${e}' stream ${l} transport closed`),G.Ko())}),W(C,Tc.EventType.ERROR,K=>{D||(D=!0,mu(Zn,`RPC '${e}' stream ${l} transport errored:`,K),G.Ko(new Pe(ge.UNAVAILABLE,"The operation could not be completed")))}),W(C,Tc.EventType.MESSAGE,K=>{var te;if(!D){const se=K.data[0];yt(!!se);const Z=se,ue=(Z==null?void 0:Z.error)||((te=Z[0])===null||te===void 0?void 0:te.error);if(ue){Re(Zn,`RPC '${e}' stream ${l} received error:`,ue);const _e=ue.status;let Se=function(I){const z=ln[I];if(z!==void 0)return rT(z)}(_e),V=ue.message;Se===void 0&&(Se=ge.INTERNAL,V="Unknown error status: "+_e+" with message "+ue.message),D=!0,G.Ko(new Pe(Se,V)),C.close()}else Re(Zn,`RPC '${e}' stream ${l} received:`,se),G.Uo(se)}}),W(_,Sw.STAT_EVENT,K=>{K.stat===Yp.PROXY?Re(Zn,`RPC '${e}' stream ${l} detected buffering proxy`):K.stat===Yp.NOPROXY&&Re(Zn,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{G.$o()},0),G}}function Rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(i){return new AP(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t,s=1e3,l=1.5,h=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=l,this.jo=h,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),l=Math.max(0,t-s);l>0&&Re("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,l,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="PersistentStream";class vT{constructor(e,t,s,l,h,f,_,y){this.Ti=e,this.n_=s,this.r_=l,this.connection=h,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=y,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yT(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(ta(t.toString()),ta("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.i_===t&&this.V_(s,l)},s=>{e(()=>{const l=new Pe(ge.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(l)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(l=>{s(()=>this.m_(l))}),this.stream.onMessage(l=>{s(()=>++this.__==1?this.g_(l):this.onNext(l))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Re(Lb,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Re(Lb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tk extends vT{constructor(e,t,s,l,h,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,f),this.serializer=h}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=IP(this.serializer,e),s=function(h){if(!("targetChange"in h))return qe.min();const f=h.targetChange;return f.targetIds&&f.targetIds.length?qe.min():f.readTime?os(f.readTime):qe.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=ag(this.serializer),t.addTarget=function(h,f){let _;const y=f.target;if(_=tg(y)?{documents:kP(h,y)}:{query:OP(h,y).ht},_.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){_.resumeToken=oT(h,f.resumeToken);const b=ig(h,f.expectedCount);b!==null&&(_.expectedCount=b)}else if(f.snapshotVersion.compareTo(qe.min())>0){_.readTime=Hd(h,f.snapshotVersion.toTimestamp());const b=ig(h,f.expectedCount);b!==null&&(_.expectedCount=b)}return _}(this.serializer,e);const s=LP(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=ag(this.serializer),t.removeTarget=e,this.I_(t)}}class xk extends vT{constructor(e,t,s,l,h,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,f),this.serializer=h}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return yt(!!e.streamToken),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=PP(e.writeResults,e.commitTime),s=os(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=ag(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>NP(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{}class Ak extends Sk{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.F_=!1}M_(){if(this.F_)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,s,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.bo(e,rg(t,s),l,h,f)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Pe(ge.UNKNOWN,h.toString())})}Co(e,t,s,l,h){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.Co(e,rg(t,s),l,f,_,h)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Pe(ge.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Rk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ta(t),this.N_=!1):Re("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="RemoteStore";class Ck{constructor(e,t,s,l,h){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=h,this.z_.To(f=>{s.enqueueAndForget(async()=>{_l(this)&&(Re(dl,"Restarting streams for network reachability change."),await async function(y){const b=Ze(y);b.W_.add(4),await th(b),b.j_.set("Unknown"),b.W_.delete(4),await ff(b)}(this))})}),this.j_=new Rk(s,l)}}async function ff(i){if(_l(i))for(const e of i.G_)await e(!0)}async function th(i){for(const e of i.G_)await e(!1)}function bT(i,e){const t=Ze(i);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),s_(t)?r_(t):Cu(t).c_()&&i_(t,e))}function n_(i,e){const t=Ze(i),s=Cu(t);t.U_.delete(e),s.c_()&&ET(t,e),t.U_.size===0&&(s.c_()?s.P_():_l(t)&&t.j_.set("Unknown"))}function i_(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cu(i).y_(e)}function ET(i,e){i.H_.Ne(e),Cu(i).w_(e)}function r_(i){i.H_=new wP({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Cu(i).start(),i.j_.B_()}function s_(i){return _l(i)&&!Cu(i).u_()&&i.U_.size>0}function _l(i){return Ze(i).W_.size===0}function wT(i){i.H_=void 0}async function Ik(i){i.j_.set("Online")}async function Nk(i){i.U_.forEach((e,t)=>{i_(i,e)})}async function Pk(i,e){wT(i),s_(i)?(i.j_.q_(e),r_(i)):i.j_.set("Unknown")}async function kk(i,e,t){if(i.j_.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{await async function(l,h){const f=h.cause;for(const _ of h.targetIds)l.U_.has(_)&&(await l.remoteSyncer.rejectListen(_,f),l.U_.delete(_),l.H_.removeTarget(_))}(i,e)}catch(s){Re(dl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fd(i,s)}else if(e instanceof Td?i.H_.We(e):e instanceof sT?i.H_.Ze(e):i.H_.je(e),!t.isEqual(qe.min()))try{const s=await _T(i.localStore);t.compareTo(s)>=0&&await function(h,f){const _=h.H_.ot(f);return _.targetChanges.forEach((y,b)=>{if(y.resumeToken.approximateByteSize()>0){const A=h.U_.get(b);A&&h.U_.set(b,A.withResumeToken(y.resumeToken,f))}}),_.targetMismatches.forEach((y,b)=>{const A=h.U_.get(y);if(!A)return;h.U_.set(y,A.withResumeToken(Ln.EMPTY_BYTE_STRING,A.snapshotVersion)),ET(h,y);const C=new ro(A.target,y,b,A.sequenceNumber);i_(h,C)}),h.remoteSyncer.applyRemoteEvent(_)}(i,t)}catch(s){Re(dl,"Failed to raise snapshot:",s),await Fd(i,s)}}async function Fd(i,e,t){if(!Ru(e))throw e;i.W_.add(1),await th(i),i.j_.set("Offline"),t||(t=()=>_T(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Re(dl,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await ff(i)})}function TT(i,e){return e().catch(t=>Fd(i,t,e))}async function mf(i){const e=Ze(i),t=go(e);let s=e.K_.length>0?e.K_[e.K_.length-1].batchId:Hg;for(;Ok(e);)try{const l=await mk(e.localStore,s);if(l===null){e.K_.length===0&&t.P_();break}s=l.batchId,Dk(e,l)}catch(l){await Fd(e,l)}xT(e)&&ST(e)}function Ok(i){return _l(i)&&i.K_.length<10}function Dk(i,e){i.K_.push(e);const t=go(i);t.c_()&&t.b_&&t.S_(e.mutations)}function xT(i){return _l(i)&&!go(i).u_()&&i.K_.length>0}function ST(i){go(i).start()}async function Lk(i){go(i).C_()}async function Mk(i){const e=go(i);for(const t of i.K_)e.S_(t.mutations)}async function Vk(i,e,t){const s=i.K_.shift(),l=Qg.from(s,e,t);await TT(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),await mf(i)}async function jk(i,e){e&&go(i).b_&&await async function(s,l){if(function(f){return vP(f)&&f!==ge.ABORTED}(l.code)){const h=s.K_.shift();go(s).h_(),await TT(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l)),await mf(s)}}(i,e),xT(i)&&ST(i)}async function Mb(i,e){const t=Ze(i);t.asyncQueue.verifyOperationInProgress(),Re(dl,"RemoteStore received new credentials");const s=_l(t);t.W_.add(3),await th(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await ff(t)}async function zk(i,e){const t=Ze(i);e?(t.W_.delete(2),await ff(t)):e||(t.W_.add(2),await th(t),t.j_.set("Unknown"))}function Cu(i){return i.J_||(i.J_=function(t,s,l){const h=Ze(t);return h.M_(),new Tk(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(i.datastore,i.asyncQueue,{xo:Ik.bind(null,i),No:Nk.bind(null,i),Lo:Pk.bind(null,i),p_:kk.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),s_(i)?r_(i):i.j_.set("Unknown")):(await i.J_.stop(),wT(i))})),i.J_}function go(i){return i.Y_||(i.Y_=function(t,s,l){const h=Ze(t);return h.M_(),new xk(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:Lk.bind(null,i),Lo:jk.bind(null,i),D_:Mk.bind(null,i),v_:Vk.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await mf(i)):(await i.Y_.stop(),i.K_.length>0&&(Re(dl,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,s,l,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,h){const f=Date.now()+s,_=new a_(e,t,f,l,h);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o_(i,e){if(ta("AsyncQueue",`${e}: ${i}`),Ru(i))return new Pe(ge.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{static emptySet(e){return new du(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ze.comparator(t.key,s.key):(t,s)=>ze.comparator(t.key,s.key),this.keyedMap=xc(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof du)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new du;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.Z_=new zt(ze.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):He():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class vu{constructor(e,t,s,l,h,f,_,y,b){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=y,this.hasCachedResults=b}static fromInitialDocuments(e,t,s,l,h){const f=[];return t.forEach(_=>{f.push({type:0,doc:_})}),new vu(e,t,du.emptySet(t),f,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Bk{constructor(){this.queries=jb(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const l=Ze(t),h=l.queries;l.queries=jb(),h.forEach((f,_)=>{for(const y of _.ta)y.onError(s)})})(this,new Pe(ge.ABORTED,"Firestore shutting down"))}}function jb(){return new gl(i=>Zw(i),of)}async function l_(i,e){const t=Ze(i);let s=3;const l=e.query;let h=t.queries.get(l);h?!h.na()&&e.ra()&&(s=2):(h=new Uk,s=e.ra()?0:1);try{switch(s){case 0:h.ea=await t.onListen(l,!0);break;case 1:h.ea=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(f){const _=o_(f,`Initialization of query '${iu(e.query)}' failed`);return void e.onError(_)}t.queries.set(l,h),h.ta.push(e),e.sa(t.onlineState),h.ea&&e.oa(h.ea)&&c_(t)}async function u_(i,e){const t=Ze(i),s=e.query;let l=3;const h=t.queries.get(s);if(h){const f=h.ta.indexOf(e);f>=0&&(h.ta.splice(f,1),h.ta.length===0?l=e.ra()?0:1:!h.na()&&e.ra()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Hk(i,e){const t=Ze(i);let s=!1;for(const l of e){const h=l.query,f=t.queries.get(h);if(f){for(const _ of f.ta)_.oa(l)&&(s=!0);f.ea=l}}s&&c_(t)}function qk(i,e,t){const s=Ze(i),l=s.queries.get(e);if(l)for(const h of l.ta)h.onError(t);s.queries.delete(e)}function c_(i){i.ia.forEach(e=>{e.next()})}var ug,zb;(zb=ug||(ug={}))._a="default",zb.Cache="cache";class h_{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new vu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.key=e}}class RT{constructor(e){this.key=e}}class Fk{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=rt(),this.mutatedKeys=rt(),this.ya=Kw(e),this.wa=new du(this.ya)}get ba(){return this.fa}Sa(e,t){const s=t?t.Da:new Vb,l=t?t.wa:this.wa;let h=t?t.mutatedKeys:this.mutatedKeys,f=l,_=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,b=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((A,C)=>{const k=l.get(A),D=lf(this.query,C)?C:null,G=!!k&&this.mutatedKeys.has(k.key),W=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let K=!1;k&&D?k.data.isEqual(D.data)?G!==W&&(s.track({type:3,doc:D}),K=!0):this.va(k,D)||(s.track({type:2,doc:D}),K=!0,(y&&this.ya(D,y)>0||b&&this.ya(D,b)<0)&&(_=!0)):!k&&D?(s.track({type:0,doc:D}),K=!0):k&&!D&&(s.track({type:1,doc:k}),K=!0,(y||b)&&(_=!0)),K&&(D?(f=f.add(D),h=W?h.add(A):h.delete(A)):(f=f.delete(A),h=h.delete(A)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const A=this.query.limitType==="F"?f.last():f.first();f=f.delete(A.key),h=h.delete(A.key),s.track({type:1,doc:A})}return{wa:f,Da:s,ls:_,mutatedKeys:h}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const h=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((A,C)=>function(D,G){const W=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return W(D)-W(G)}(A.type,C.type)||this.ya(A.doc,C.doc)),this.Ca(s),l=l!=null&&l;const _=t&&!l?this.Fa():[],y=this.pa.size===0&&this.current&&!l?1:0,b=y!==this.ga;return this.ga=y,f.length!==0||b?{snapshot:new vu(this.query,e.wa,h,f,e.mutatedKeys,y===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:_}:{Ma:_}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Vb,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=rt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new RT(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new AT(s))}),t}Oa(e){this.fa=e.gs,this.pa=rt();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return vu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const d_="SyncEngine";class Gk{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Zk{constructor(e){this.key=e,this.Ba=!1}}class Kk{constructor(e,t,s,l,h,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new gl(_=>Zw(_),of),this.qa=new Map,this.Qa=new Set,this.$a=new zt(ze.comparator),this.Ka=new Map,this.Ua=new Xg,this.Wa={},this.Ga=new Map,this.za=yu.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function $k(i,e,t=!0){const s=OT(i);let l;const h=s.ka.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.Na()):l=await CT(s,e,t,!0),l}async function Qk(i,e){const t=OT(i);await CT(t,e,!0,!1)}async function CT(i,e,t,s){const l=await pk(i.localStore,as(e)),h=l.targetId,f=i.sharedClientState.addLocalQueryTarget(h,t);let _;return s&&(_=await Wk(i,e,h,f==="current",l.resumeToken)),i.isPrimaryClient&&t&&bT(i.remoteStore,l),_}async function Wk(i,e,t,s,l){i.Ha=(C,k,D)=>async function(W,K,te,se){let Z=K.view.Sa(te);Z.ls&&(Z=await Pb(W.localStore,K.query,!1).then(({documents:V})=>K.view.Sa(V,Z)));const ue=se&&se.targetChanges.get(K.targetId),_e=se&&se.targetMismatches.get(K.targetId)!=null,Se=K.view.applyChanges(Z,W.isPrimaryClient,ue,_e);return Bb(W,K.targetId,Se.Ma),Se.snapshot}(i,C,k,D);const h=await Pb(i.localStore,e,!0),f=new Fk(e,h.gs),_=f.Sa(h.documents),y=eh.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",l),b=f.applyChanges(_,i.isPrimaryClient,y);Bb(i,t,b.Ma);const A=new Gk(e,t,f);return i.ka.set(e,A),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),b.snapshot}async function Yk(i,e,t){const s=Ze(i),l=s.ka.get(e),h=s.qa.get(l.targetId);if(h.length>1)return s.qa.set(l.targetId,h.filter(f=>!of(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await og(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),t&&n_(s.remoteStore,l.targetId),cg(s,l.targetId)}).catch(Au)):(cg(s,l.targetId),await og(s.localStore,l.targetId,!0))}async function Xk(i,e){const t=Ze(i),s=t.ka.get(e),l=t.qa.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),n_(t.remoteStore,s.targetId))}async function Jk(i,e,t){const s=aO(i);try{const l=await function(f,_){const y=Ze(f),b=pn.now(),A=_.reduce((D,G)=>D.add(G.key),rt());let C,k;return y.persistence.runTransaction("Locally write mutations","readwrite",D=>{let G=na(),W=rt();return y.ds.getEntries(D,A).next(K=>{G=K,G.forEach((te,se)=>{se.isValidDocument()||(W=W.add(te))})}).next(()=>y.localDocuments.getOverlayedDocuments(D,G)).next(K=>{C=K;const te=[];for(const se of _){const Z=mP(se,C.get(se.key).overlayedDocument);Z!=null&&te.push(new bo(se.key,Z,zw(Z.value.mapValue),or.exists(!0)))}return y.mutationQueue.addMutationBatch(D,b,te,_)}).next(K=>{k=K;const te=K.applyToLocalDocumentSet(C,W);return y.documentOverlayCache.saveOverlays(D,K.batchId,te)})}).then(()=>({batchId:k.batchId,changes:Qw(C)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),function(f,_,y){let b=f.Wa[f.currentUser.toKey()];b||(b=new zt(ot)),b=b.insert(_,y),f.Wa[f.currentUser.toKey()]=b}(s,l.batchId,t),await nh(s,l.changes),await mf(s.remoteStore)}catch(l){const h=o_(l,"Failed to persist write");t.reject(h)}}async function IT(i,e){const t=Ze(i);try{const s=await dk(t.localStore,e);e.targetChanges.forEach((l,h)=>{const f=t.Ka.get(h);f&&(yt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?f.Ba=!0:l.modifiedDocuments.size>0?yt(f.Ba):l.removedDocuments.size>0&&(yt(f.Ba),f.Ba=!1))}),await nh(t,s,e)}catch(s){await Au(s)}}function Ub(i,e,t){const s=Ze(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.ka.forEach((h,f)=>{const _=f.view.sa(e);_.snapshot&&l.push(_.snapshot)}),function(f,_){const y=Ze(f);y.onlineState=_;let b=!1;y.queries.forEach((A,C)=>{for(const k of C.ta)k.sa(_)&&(b=!0)}),b&&c_(y)}(s.eventManager,e),l.length&&s.La.p_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eO(i,e,t){const s=Ze(i);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Ka.get(e),h=l&&l.key;if(h){let f=new zt(ze.comparator);f=f.insert(h,Qn.newNoDocument(h,qe.min()));const _=rt().add(h),y=new hf(qe.min(),new Map,new zt(ot),f,_);await IT(s,y),s.$a=s.$a.remove(h),s.Ka.delete(e),f_(s)}else await og(s.localStore,e,!1).then(()=>cg(s,e,t)).catch(Au)}async function tO(i,e){const t=Ze(i),s=e.batch.batchId;try{const l=await hk(t.localStore,e);PT(t,s,null),NT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await nh(t,l)}catch(l){await Au(l)}}async function nO(i,e,t){const s=Ze(i);try{const l=await function(f,_){const y=Ze(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let A;return y.mutationQueue.lookupMutationBatch(b,_).next(C=>(yt(C!==null),A=C.keys(),y.mutationQueue.removeMutationBatch(b,C))).next(()=>y.mutationQueue.performConsistencyCheck(b)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(b,A,_)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,A)).next(()=>y.localDocuments.getDocuments(b,A))})}(s.localStore,e);PT(s,e,t),NT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await nh(s,l)}catch(l){await Au(l)}}function NT(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function PT(i,e,t){const s=Ze(i);let l=s.Wa[s.currentUser.toKey()];if(l){const h=l.get(e);h&&(t?h.reject(t):h.resolve(),l=l.remove(e)),s.Wa[s.currentUser.toKey()]=l}}function cg(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),t&&i.La.Ja(s,t);i.qa.delete(e),i.isPrimaryClient&&i.Ua.Sr(e).forEach(s=>{i.Ua.containsKey(s)||kT(i,s)})}function kT(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(n_(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ka.delete(t),f_(i))}function Bb(i,e,t){for(const s of t)s instanceof AT?(i.Ua.addReference(s.key,e),iO(i,s)):s instanceof RT?(Re(d_,"Document no longer in limbo: "+s.key),i.Ua.removeReference(s.key,e),i.Ua.containsKey(s.key)||kT(i,s.key)):He()}function iO(i,e){const t=e.key,s=t.path.canonicalString();i.$a.get(t)||i.Qa.has(s)||(Re(d_,"New document in limbo: "+t),i.Qa.add(s),f_(i))}function f_(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new ze(Ot.fromString(e)),s=i.za.next();i.Ka.set(s,new Zk(t)),i.$a=i.$a.insert(t,s),bT(i.remoteStore,new ro(as(af(t.path)),s,"TargetPurposeLimboResolution",tf.ae))}}async function nh(i,e,t){const s=Ze(i),l=[],h=[],f=[];s.ka.isEmpty()||(s.ka.forEach((_,y)=>{f.push(s.Ha(y,e,t).then(b=>{var A;if((b||t)&&s.isPrimaryClient){const C=b?!b.fromCache:(A=t==null?void 0:t.targetChanges.get(y.targetId))===null||A===void 0?void 0:A.current;s.sharedClientState.updateQueryState(y.targetId,C?"current":"not-current")}if(b){l.push(b);const C=e_.Yi(y.targetId,b);h.push(C)}}))}),await Promise.all(f),s.La.p_(l),await async function(y,b){const A=Ze(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>de.forEach(b,k=>de.forEach(k.Hi,D=>A.persistence.referenceDelegate.addReference(C,k.targetId,D)).next(()=>de.forEach(k.Ji,D=>A.persistence.referenceDelegate.removeReference(C,k.targetId,D)))))}catch(C){if(!Ru(C))throw C;Re(t_,"Failed to update sequence numbers: "+C)}for(const C of b){const k=C.targetId;if(!C.fromCache){const D=A.Ts.get(k),G=D.snapshotVersion,W=D.withLastLimboFreeSnapshotVersion(G);A.Ts=A.Ts.insert(k,W)}}}(s.localStore,h))}async function rO(i,e){const t=Ze(i);if(!t.currentUser.isEqual(e)){Re(d_,"User change. New user:",e.toKey());const s=await gT(t.localStore,e);t.currentUser=e,function(h,f){h.Ga.forEach(_=>{_.forEach(y=>{y.reject(new Pe(ge.CANCELLED,f))})}),h.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await nh(t,s.Rs)}}function sO(i,e){const t=Ze(i),s=t.Ka.get(e);if(s&&s.Ba)return rt().add(s.key);{let l=rt();const h=t.qa.get(e);if(!h)return l;for(const f of h){const _=t.ka.get(f);l=l.unionWith(_.view.ba)}return l}}function OT(i){const e=Ze(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=IT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eO.bind(null,e),e.La.p_=Hk.bind(null,e.eventManager),e.La.Ja=qk.bind(null,e.eventManager),e}function aO(i){const e=Ze(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nO.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ck(this.persistence,new ok,e.initialUser,this.serializer)}Xa(e){return new pT(Jg.ri,this.serializer)}Za(e){return new _k}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class oO extends Gd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){yt(this.persistence.referenceDelegate instanceof qd);const s=this.persistence.referenceDelegate.garbageCollector;return new ZP(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?bi.withCacheSize(this.cacheSizeBytes):bi.DEFAULT;return new pT(s=>qd.ri(s,t),this.serializer)}}class hg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ub(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rO.bind(null,this.syncEngine),await zk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Bk}()}createDatastore(e){const t=df(e.databaseInfo.databaseId),s=function(h){return new wk(h)}(e.databaseInfo);return function(h,f,_,y){return new Ak(h,f,_,y)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,l,h,f,_){return new Ck(s,l,h,f,_)}(this.localStore,this.datastore,e.asyncQueue,t=>Ub(this.syncEngine,t,0),function(){return Db.D()?new Db:new yk}())}createSyncEngine(e,t){return function(l,h,f,_,y,b,A){const C=new Kk(l,h,f,_,y,b);return A&&(C.ja=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(l){const h=Ze(l);Re(dl,"RemoteStore shutting down."),h.W_.add(5),await th(h),h.z_.shutdown(),h.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hg.provider={build:()=>new hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ta("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="FirestoreClient";class lO{constructor(e,t,s,l,h){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=$n.UNAUTHENTICATED,this.clientId=Iw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,async f=>{Re(_o,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(Re(_o,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=o_(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Cp(i,e){i.asyncQueue.verifyOperationInProgress(),Re(_o,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async l=>{s.isEqual(l)||(await gT(e.localStore,l),s=l)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Hb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await uO(i);Re(_o,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>Mb(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,l)=>Mb(e.remoteStore,l)),i._onlineComponents=e}async function uO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Re(_o,"Using user provided OfflineComponentProvider");try{await Cp(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(l){return l.name==="FirebaseError"?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(t))throw t;mu("Error using user provided cache. Falling back to memory cache: "+t),await Cp(i,new Gd)}}else Re(_o,"Using default OfflineComponentProvider"),await Cp(i,new oO(void 0));return i._offlineComponents}async function DT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Re(_o,"Using user provided OnlineComponentProvider"),await Hb(i,i._uninitializedComponentsProvider._online)):(Re(_o,"Using default OnlineComponentProvider"),await Hb(i,new hg))),i._onlineComponents}function cO(i){return DT(i).then(e=>e.syncEngine)}async function Zd(i){const e=await DT(i),t=e.eventManager;return t.onListen=$k.bind(null,e.syncEngine),t.onUnlisten=Yk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Qk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Xk.bind(null,e.syncEngine),t}function hO(i,e,t={}){const s=new Xs;return i.asyncQueue.enqueueAndForget(async()=>function(h,f,_,y,b){const A=new m_({next:k=>{A.su(),f.enqueueAndForget(()=>u_(h,C));const D=k.docs.has(_);!D&&k.fromCache?b.reject(new Pe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&k.fromCache&&y&&y.source==="server"?b.reject(new Pe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(k)},error:k=>b.reject(k)}),C=new h_(af(_.path),A,{includeMetadataChanges:!0,Ta:!0});return l_(h,C)}(await Zd(i),i.asyncQueue,e,t,s)),s.promise}function dO(i,e,t={}){const s=new Xs;return i.asyncQueue.enqueueAndForget(async()=>function(h,f,_,y,b){const A=new m_({next:k=>{A.su(),f.enqueueAndForget(()=>u_(h,C)),k.fromCache&&y.source==="server"?b.reject(new Pe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(k)},error:k=>b.reject(k)}),C=new h_(_,A,{includeMetadataChanges:!0,Ta:!0});return l_(h,C)}(await Zd(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(i,e,t){if(!t)throw new Pe(ge.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function fO(i,e,t,s){if(e===!0&&s===!0)throw new Pe(ge.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Fb(i){if(!ze.isDocumentKey(i))throw new Pe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Gb(i){if(ze.isDocumentKey(i))throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function p_(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":He()}function Ti(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Pe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=p_(i);throw new Pe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firestore.googleapis.com",Zb=!0;class Kb{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VT,this.ssl=Zb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Zb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new Pe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new Pe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new Pe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new Pe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new bN;switch(s.type){case"firstParty":return new xN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Pe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=qb.get(t);s&&(Re("ComponentProvider","Removing Datastore"),qb.delete(t),s.terminate())}(this),Promise.resolve()}}function mO(i,e,t,s={}){var l;const h=(i=Ti(i,pf))._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:i._getEmulatorOptions()}),_=`${e}:${t}`;h.host!==VT&&h.host!==_&&mu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:_,ssl:!1,emulatorOptions:s});if(!ol(y,f)&&(i._setSettings(y),s.mockUserToken)){let b,A;if(typeof s.mockUserToken=="string")b=s.mockUserToken,A=$n.MOCK_USER;else{b=LE(s.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new Pe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new $n(C)}i._authCredentials=new EN(new Cw(b,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ih(this.firestore,e,this._query)}}class ci{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ci(this.firestore,e,this._key)}}class lo extends ih{constructor(e,t,s){super(e,t,af(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ci(this.firestore,null,new ze(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function yo(i,e,...t){if(i=It(i),MT("collection","path",e),i instanceof pf){const s=Ot.fromString(e,...t);return Gb(s),new lo(i,null,s)}{if(!(i instanceof ci||i instanceof lo))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ot.fromString(e,...t));return Gb(s),new lo(i.firestore,null,s)}}function ui(i,e,...t){if(i=It(i),arguments.length===1&&(e=Iw.newId()),MT("doc","path",e),i instanceof pf){const s=Ot.fromString(e,...t);return Fb(s),new ci(i,null,new ze(s))}{if(!(i instanceof ci||i instanceof lo))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ot.fromString(e,...t));return Fb(s),new ci(i.firestore,i instanceof lo?i.converter:null,new ze(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="AsyncQueue";class Qb{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yT(this,"async_queue_retry"),this.bu=()=>{const s=Rp();s&&Re($b,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=e;const t=Rp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Rp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Xs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ru(e))throw e;Re($b,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const l=function(f){let _=f.message||"";return f.stack&&(_=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),_}(s);throw ta("INTERNAL UNHANDLED ERROR: ",l),s}).then(s=>(this.pu=!1,s))));return this.Su=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const l=a_.createAndSchedule(this,e,t,s,h=>this.Fu(h));return this.fu.push(l),l}Du(){this.gu&&He()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Wb(i){return function(t,s){if(typeof t!="object"||t===null)return!1;const l=t;for(const h of s)if(h in l&&typeof l[h]=="function")return!0;return!1}(i,["next","error","complete"])}class ia extends pf{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new Qb,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qb(e),this._firestoreClient=void 0,await e}}}function pO(i,e){const t=typeof i=="object"?i:Rg(),s=typeof i=="string"?i:Md,l=Yd(t,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=kE("firestore");h&&mO(l,...h)}return l}function gf(i){if(i._terminated)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||gO(i),i._firestoreClient}function gO(i){var e,t,s;const l=i._freezeSettings(),h=function(_,y,b,A){return new jN(_,y,b,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,LT(A.experimentalLongPollingOptions),A.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,l);i._componentsProvider||!((t=l.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),i._firestoreClient=new lO(i._authCredentials,i._appCheckCredentials,i._queue,h,i._componentsProvider&&function(_){const y=_==null?void 0:_._online.build();return{_offline:_==null?void 0:_._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bu(Ln.fromBase64String(e))}catch(t){throw new Pe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bu(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Pe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=/^__.*__$/;class yO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jc(e,this.data,t,this.fieldTransforms)}}class jT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class y_{constructor(e,t,s,l,h,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Bu(),this.fieldTransforms=h||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new y_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),l=this.ku({path:s,Qu:!1});return l.$u(e),l}Ku(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),l=this.ku({path:s,Qu:!1});return l.Bu(),l}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Kd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(zT(this.Lu)&&_O.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class vO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||df(e)}ju(e,t,s,l=!1){return new y_({Lu:e,methodName:t,zu:s,path:Dn.emptyPath(),Qu:!1,Gu:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function v_(i){const e=i._freezeSettings(),t=df(i._databaseId);return new vO(i._databaseId,!!e.ignoreUndefinedProperties,t)}function UT(i,e,t,s,l,h={}){const f=i.ju(h.merge||h.mergeFields?2:0,e,t,l);b_("Data must be an object, but it was:",f,s);const _=BT(s,f);let y,b;if(h.merge)y=new Bi(f.fieldMask),b=f.fieldTransforms;else if(h.mergeFields){const A=[];for(const C of h.mergeFields){const k=dg(e,C,t);if(!f.contains(k))throw new Pe(ge.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);qT(A,k)||A.push(k)}y=new Bi(A),b=f.fieldTransforms.filter(C=>y.covers(C.field))}else y=null,b=f.fieldTransforms;return new yO(new Ei(_),y,b)}class yf extends g_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}function bO(i,e,t,s){const l=i.ju(1,e,t);b_("Data must be an object, but it was:",l,s);const h=[],f=Ei.empty();vo(s,(y,b)=>{const A=E_(e,y,t);b=It(b);const C=l.Ku(A);if(b instanceof yf)h.push(A);else{const k=vf(b,C);k!=null&&(h.push(A),f.set(A,k))}});const _=new Bi(h);return new jT(f,_,l.fieldTransforms)}function EO(i,e,t,s,l,h){const f=i.ju(1,e,t),_=[dg(e,s,t)],y=[l];if(h.length%2!=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<h.length;k+=2)_.push(dg(e,h[k])),y.push(h[k+1]);const b=[],A=Ei.empty();for(let k=_.length-1;k>=0;--k)if(!qT(b,_[k])){const D=_[k];let G=y[k];G=It(G);const W=f.Ku(D);if(G instanceof yf)b.push(D);else{const K=vf(G,W);K!=null&&(b.push(D),A.set(D,K))}}const C=new Bi(b);return new jT(A,C,f.fieldTransforms)}function vf(i,e){if(HT(i=It(i)))return b_("Unsupported field value:",e,i),BT(i,e);if(i instanceof g_)return function(s,l){if(!zT(l.Lu))throw l.Wu(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Wu(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,l){const h=[];let f=0;for(const _ of s){let y=vf(_,l.Uu(f));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),f++}return{arrayValue:{values:h}}}(i,e)}return function(s,l){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return lP(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=pn.fromDate(s);return{timestampValue:Hd(l.serializer,h)}}if(s instanceof pn){const h=new pn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hd(l.serializer,h)}}if(s instanceof qc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bu)return{bytesValue:oT(l.serializer,s._byteString)};if(s instanceof ci){const h=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(h))throw l.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Yg(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof __)return function(f,_){return{mapValue:{fields:{[Vw]:{stringValue:jw},[Vd]:{arrayValue:{values:f.toArray().map(b=>{if(typeof b!="number")throw _.Wu("VectorValues must only contain numeric values.");return Kg(_.serializer,b)})}}}}}}(s,l);throw l.Wu(`Unsupported field value: ${p_(s)}`)}(i,e)}function BT(i,e){const t={};return Pw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(i,(s,l)=>{const h=vf(l,e.qu(s));h!=null&&(t[s]=h)}),{mapValue:{fields:t}}}function HT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pn||i instanceof qc||i instanceof bu||i instanceof ci||i instanceof g_||i instanceof __)}function b_(i,e,t){if(!HT(t)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(t)){const s=p_(t);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function dg(i,e,t){if((e=It(e))instanceof _f)return e._internalPath;if(typeof e=="string")return E_(i,e);throw Kd("Field path arguments must be of type string or ",i,!1,void 0,t)}const wO=new RegExp("[~\\*/\\[\\]]");function E_(i,e,t){if(e.search(wO)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _f(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kd(i,e,t,s,l){const h=s&&!s.isEmpty(),f=l!==void 0;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let y="";return(h||f)&&(y+=" (found",h&&(y+=` in field ${s}`),f&&(y+=` in document ${l}`),y+=")"),new Pe(ge.INVALID_ARGUMENT,_+i+y)}function qT(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t,s,l,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new ci(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TO extends FT{data(){return super.data()}}function GT(i,e){return typeof e=="string"?E_(i,e):e instanceof _f?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Pe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xO{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return vo(e,(l,h)=>{s[l]=this.convertValue(h,t)}),s}convertVectorValue(e){var t,s,l;const h=(l=(s=(t=e.fields)===null||t===void 0?void 0:t[Vd].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(f=>tn(f.doubleValue));return new __(h)}convertGeoPoint(e){return new qc(tn(e.latitude),tn(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=fo(e);return new pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ot.fromString(e);yt(fT(s));const l=new zc(s.get(1),s.get(3)),h=new ze(s.popFirst(5));return l.isEqual(t)||ta(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(i,e,t){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $T extends FT{constructor(e,t,s,l,h,f){super(e,t,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(GT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class xd extends $T{data(e={}){return super.data(e)}}class QT{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Ac(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new xd(this._firestore,this._userDataWriter,s.key,s,new Ac(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map(_=>{const y=new xd(l._firestore,l._userDataWriter,_.doc.key,_.doc,new Ac(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);return _.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(_=>h||_.type!==3).map(_=>{const y=new xd(l._firestore,l._userDataWriter,_.doc.key,_.doc,new Ac(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);let b=-1,A=-1;return _.type!==0&&(b=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),_.type!==1&&(f=f.add(_.doc),A=f.indexOf(_.doc.key)),{type:SO(_.type),doc:y,oldIndex:b,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SO(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(i){i=Ti(i,ci);const e=Ti(i.firestore,ia);return hO(gf(e),i._key).then(t=>XT(e,i,t))}class w_ extends xO{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ci(this.firestore,null,t)}}function T_(i){i=Ti(i,ih);const e=Ti(i.firestore,ia),t=gf(e),s=new w_(e);return ZT(i._query),dO(t,i._query).then(l=>new QT(e,s,i,l))}function AO(i,e,t){i=Ti(i,ci);const s=Ti(i.firestore,ia),l=KT(i.converter,e);return Ef(s,[UT(v_(s),"setDoc",i._key,l,i.converter!==null,t).toMutation(i._key,or.none())])}function sl(i,e,t,...s){i=Ti(i,ci);const l=Ti(i.firestore,ia),h=v_(l);let f;return f=typeof(e=It(e))=="string"||e instanceof _f?EO(h,"updateDoc",i._key,e,t,s):bO(h,"updateDoc",i._key,e),Ef(l,[f.toMutation(i._key,or.exists(!0))])}function WT(i){return Ef(Ti(i.firestore,ia),[new $g(i._key,or.none())])}function YT(i,e){const t=Ti(i.firestore,ia),s=ui(i),l=KT(i.converter,e);return Ef(t,[UT(v_(i.firestore),"addDoc",s._key,l,i.converter!==null,{}).toMutation(s._key,or.exists(!1))]).then(()=>s)}function Fc(i,...e){var t,s,l;i=It(i);let h={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||Wb(e[f])||(h=e[f],f++);const _={includeMetadataChanges:h.includeMetadataChanges,source:h.source};if(Wb(e[f])){const C=e[f];e[f]=(t=C.next)===null||t===void 0?void 0:t.bind(C),e[f+1]=(s=C.error)===null||s===void 0?void 0:s.bind(C),e[f+2]=(l=C.complete)===null||l===void 0?void 0:l.bind(C)}let y,b,A;if(i instanceof ci)b=Ti(i.firestore,ia),A=af(i._key.path),y={next:C=>{e[f]&&e[f](XT(b,i,C))},error:e[f+1],complete:e[f+2]};else{const C=Ti(i,ih);b=Ti(C.firestore,ia),A=C._query;const k=new w_(b);y={next:D=>{e[f]&&e[f](new QT(b,k,C,D))},error:e[f+1],complete:e[f+2]},ZT(i._query)}return function(k,D,G,W){const K=new m_(W),te=new h_(D,K,G);return k.asyncQueue.enqueueAndForget(async()=>l_(await Zd(k),te)),()=>{K.su(),k.asyncQueue.enqueueAndForget(async()=>u_(await Zd(k),te))}}(gf(b),A,_,y)}function Ef(i,e){return function(s,l){const h=new Xs;return s.asyncQueue.enqueueAndForget(async()=>Jk(await cO(s),l,h)),h.promise}(gf(i),e)}function XT(i,e,t){const s=t.docs.get(e._key),l=new w_(i);return new $T(i,l,e._key,s,new Ac(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(l){Su=l})(pl),ll(new co("firestore",(s,{instanceIdentifier:l,options:h})=>{const f=s.getProvider("app").getImmediate(),_=new ia(new wN(s.getProvider("auth-internal")),new SN(f,s.getProvider("app-check-internal")),function(b,A){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Pe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(b.options.projectId,A)}(f,l),f);return h=Object.assign({useFetchStreams:t},h),_._setSettings(h),_},"PUBLIC").setMultipleInstances(!0)),is(nb,ib,e),is(nb,ib,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="firebasestorage.googleapis.com",ex="storageBucket",RO=2*60*1e3,CO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t extends hs{constructor(e,t,s=0){super(Ip(e),`Firebase Storage: ${t} (${Ip(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function Ip(i){return"storage/"+i}function x_(){const i="An unknown error occurred, please check the error payload for server response.";return new $t(Kt.UNKNOWN,i)}function IO(i){return new $t(Kt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function NO(i){return new $t(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PO(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $t(Kt.UNAUTHENTICATED,i)}function kO(){return new $t(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function OO(i){return new $t(Kt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function DO(){return new $t(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LO(){return new $t(Kt.CANCELED,"User canceled the upload/download.")}function MO(i){return new $t(Kt.INVALID_URL,"Invalid URL '"+i+"'.")}function VO(i){return new $t(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function jO(){return new $t(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ex+"' property when initializing the app?")}function zO(){return new $t(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function UO(){return new $t(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function BO(i){return new $t(Kt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fg(i){return new $t(Kt.INVALID_ARGUMENT,i)}function tx(){return new $t(Kt.APP_DELETED,"The Firebase app was deleted.")}function HO(i){return new $t(Kt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Oc(i,e){return new $t(Kt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function bc(i){throw new $t(Kt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Hi.makeFromUrl(e,t)}catch{return new Hi(e,"")}if(s.path==="")return s;throw VO(e)}static makeFromUrl(e,t){let s=null;const l="([A-Za-z0-9.\\-_]+)";function h(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const f="(/(.*))?$",_=new RegExp("^gs://"+l+f,"i"),y={bucket:1,path:3};function b(ue){ue.path_=decodeURIComponent(ue.path)}const A="v[A-Za-z0-9_]+",C=t.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",D=new RegExp(`^https?://${C}/${A}/b/${l}/o${k}`,"i"),G={bucket:1,path:3},W=t===JT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,K="([^?#]*)",te=new RegExp(`^https?://${W}/${l}/${K}`,"i"),Z=[{regex:_,indices:y,postModify:h},{regex:D,indices:G,postModify:b},{regex:te,indices:{bucket:1,path:2},postModify:b}];for(let ue=0;ue<Z.length;ue++){const _e=Z[ue],Se=_e.regex.exec(e);if(Se){const V=Se[_e.indices.bucket];let P=Se[_e.indices.path];P||(P=""),s=new Hi(V,P),_e.postModify(s);break}}if(s==null)throw MO(e);return s}}class qO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(i,e,t){let s=1,l=null,h=null,f=!1,_=0;function y(){return _===2}let b=!1;function A(...K){b||(b=!0,e.apply(null,K))}function C(K){l=setTimeout(()=>{l=null,i(D,y())},K)}function k(){h&&clearTimeout(h)}function D(K,...te){if(b){k();return}if(K){k(),A.call(null,K,...te);return}if(y()||f){k(),A.call(null,K,...te);return}s<64&&(s*=2);let Z;_===1?(_=2,Z=0):Z=(s+Math.random())*1e3,C(Z)}let G=!1;function W(K){G||(G=!0,k(),!b&&(l!==null?(K||(_=2),clearTimeout(l),C(0)):K||(_=1)))}return C(0),h=setTimeout(()=>{f=!0,W(!0)},t),W}function GO(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(i){return i!==void 0}function KO(i){return typeof i=="object"&&!Array.isArray(i)}function S_(i){return typeof i=="string"||i instanceof String}function Yb(i){return A_()&&i instanceof Blob}function A_(){return typeof Blob<"u"}function Xb(i,e,t,s){if(s<e)throw fg(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>t)throw fg(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(i,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${i}`}function nx(i){const e=encodeURIComponent;let t="?";for(const s in i)if(i.hasOwnProperty(s)){const l=e(s)+"="+e(i[s]);t=t+l+"&"}return t=t.slice(0,-1),t}var al;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(al||(al={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(i,e){const t=i>=500&&i<600,l=[408,429].indexOf(i)!==-1,h=e.indexOf(i)!==-1;return t||l||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t,s,l,h,f,_,y,b,A,C,k=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=l,this.successCodes_=h,this.additionalRetryCodes_=f,this.callback_=_,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=C,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,G)=>{this.resolve_=D,this.reject_=G,this.start_()})}start_(){const e=(s,l)=>{if(l){s(!1,new hd(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const f=_=>{const y=_.loaded,b=_.lengthComputable?_.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,b)};this.progressCallback_!==null&&h.addUploadProgressListener(f),h.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(f),this.pendingConnection_=null;const _=h.getErrorCode()===al.NO_ERROR,y=h.getStatus();if(!_||$O(y,this.additionalRetryCodes_)&&this.retry){const A=h.getErrorCode()===al.ABORT;s(!1,new hd(!1,null,A));return}const b=this.successCodes_.indexOf(y)!==-1;s(!0,new hd(b,h))})},t=(s,l)=>{const h=this.resolve_,f=this.reject_,_=l.connection;if(l.wasSuccessCode)try{const y=this.callback_(_,_.getResponse());ZO(y)?h(y):h()}catch(y){f(y)}else if(_!==null){const y=x_();y.serverResponse=_.getErrorText(),this.errorCallback_?f(this.errorCallback_(_,y)):f(y)}else if(l.canceled){const y=this.appDelete_?tx():LO();f(y)}else{const y=DO();f(y)}};this.canceled_?t(!1,new hd(!1,null,!0)):this.backoffId_=FO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hd{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function WO(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function YO(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function XO(i,e){e&&(i["X-Firebase-GMPID"]=e)}function JO(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function eD(i,e,t,s,l,h,f=!0){const _=nx(i.urlParams),y=i.url+_,b=Object.assign({},i.headers);return XO(b,e),WO(b,t),YO(b,h),JO(b,s),new QO(y,i.method,b,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,l,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function nD(...i){const e=tD();if(e!==void 0){const t=new e;for(let s=0;s<i.length;s++)t.append(i[s]);return t.getBlob()}else{if(A_())return new Blob(i);throw new $t(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function iD(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(i){if(typeof atob>"u")throw BO("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Np{constructor(e,t){this.data=e,this.contentType=t||null}}function sD(i,e){switch(i){case ns.RAW:return new Np(ix(e));case ns.BASE64:case ns.BASE64URL:return new Np(rx(i,e));case ns.DATA_URL:return new Np(oD(e),lD(e))}throw x_()}function ix(i){const e=[];for(let t=0;t<i.length;t++){let s=i.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const h=s,f=i.charCodeAt(++t);s=65536|(h&1023)<<10|f&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function aD(i){let e;try{e=decodeURIComponent(i)}catch{throw Oc(ns.DATA_URL,"Malformed data URL.")}return ix(e)}function rx(i,e){switch(i){case ns.BASE64:{const l=e.indexOf("-")!==-1,h=e.indexOf("_")!==-1;if(l||h)throw Oc(i,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ns.BASE64URL:{const l=e.indexOf("+")!==-1,h=e.indexOf("/")!==-1;if(l||h)throw Oc(i,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=rD(e)}catch(l){throw l.message.includes("polyfill")?l:Oc(i,"Invalid character found")}const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}class sx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Oc(ns.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=uD(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function oD(i){const e=new sx(i);return e.base64?rx(ns.BASE64,e.rest):aD(e.rest)}function lD(i){return new sx(i).contentType}function uD(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){let s=0,l="";Yb(e)?(this.data_=e,s=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(Yb(this.data_)){const s=this.data_,l=iD(s,e,t);return l===null?null:new io(l)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new io(s,!0)}}static getBlob(...e){if(A_()){const t=e.map(s=>s instanceof io?s.data_:s);return new io(nD.apply(null,t))}else{const t=e.map(f=>S_(f)?sD(ns.RAW,f).data:f.data_);let s=0;t.forEach(f=>{s+=f.byteLength});const l=new Uint8Array(s);let h=0;return t.forEach(f=>{for(let _=0;_<f.length;_++)l[h++]=f[_]}),new io(l,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(i){let e;try{e=JSON.parse(i)}catch{return null}return KO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function hD(i,e){const t=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?t:i+"/"+t}function ox(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(i,e){return e}class li{constructor(e,t,s,l){this.server=e,this.local=t||e,this.writable=!!s,this.xform=l||dD}}let dd=null;function fD(i){return!S_(i)||i.length<2?i:ox(i)}function lx(){if(dd)return dd;const i=[];i.push(new li("bucket")),i.push(new li("generation")),i.push(new li("metageneration")),i.push(new li("name","fullPath",!0));function e(h,f){return fD(f)}const t=new li("name");t.xform=e,i.push(t);function s(h,f){return f!==void 0?Number(f):f}const l=new li("size");return l.xform=s,i.push(l),i.push(new li("timeCreated")),i.push(new li("updated")),i.push(new li("md5Hash",null,!0)),i.push(new li("cacheControl",null,!0)),i.push(new li("contentDisposition",null,!0)),i.push(new li("contentEncoding",null,!0)),i.push(new li("contentLanguage",null,!0)),i.push(new li("contentType",null,!0)),i.push(new li("metadata","customMetadata",!0)),dd=i,dd}function mD(i,e){function t(){const s=i.bucket,l=i.fullPath,h=new Hi(s,l);return e._makeStorageReference(h)}Object.defineProperty(i,"ref",{get:t})}function pD(i,e,t){const s={};s.type="file";const l=t.length;for(let h=0;h<l;h++){const f=t[h];s[f.local]=f.xform(s,e[f.server])}return mD(s,i),s}function ux(i,e,t){const s=ax(e);return s===null?null:pD(i,s,t)}function gD(i,e,t,s){const l=ax(e);if(l===null||!S_(l.downloadTokens))return null;const h=l.downloadTokens;if(h.length===0)return null;const f=encodeURIComponent;return h.split(",").map(b=>{const A=i.bucket,C=i.fullPath,k="/b/"+f(A)+"/o/"+f(C),D=R_(k,t,s),G=nx({alt:"media",token:b});return D+G})[0]}function _D(i,e){const t={},s=e.length;for(let l=0;l<s;l++){const h=e[l];h.writable&&(t[h.server]=i[h.local])}return JSON.stringify(t)}class cx{constructor(e,t,s,l){this.url=e,this.method=t,this.handler=s,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(i){if(!i)throw x_()}function yD(i,e){function t(s,l){const h=ux(i,l,e);return hx(h!==null),h}return t}function vD(i,e){function t(s,l){const h=ux(i,l,e);return hx(h!==null),gD(h,l,i.host,i._protocol)}return t}function dx(i){function e(t,s){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=kO():l=PO():t.getStatus()===402?l=NO(i.bucket):t.getStatus()===403?l=OO(i.path):l=s,l.status=t.getStatus(),l.serverResponse=s.serverResponse,l}return e}function bD(i){const e=dx(i);function t(s,l){let h=e(s,l);return s.getStatus()===404&&(h=IO(i.path)),h.serverResponse=l.serverResponse,h}return t}function ED(i,e,t){const s=e.fullServerUrl(),l=R_(s,i.host,i._protocol),h="GET",f=i.maxOperationRetryTime,_=new cx(l,h,vD(i,t),f);return _.errorHandler=bD(e),_}function wD(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function TD(i,e,t){const s=Object.assign({},t);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=wD(null,e)),s}function xD(i,e,t,s,l){const h=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function _(){let Z="";for(let ue=0;ue<2;ue++)Z=Z+Math.random().toString().slice(2);return Z}const y=_();f["Content-Type"]="multipart/related; boundary="+y;const b=TD(e,s,l),A=_D(b,t),C="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+A+`\r
--`+y+`\r
Content-Type: `+b.contentType+`\r
\r
`,k=`\r
--`+y+"--",D=io.getBlob(C,s,k);if(D===null)throw zO();const G={name:b.fullPath},W=R_(h,i.host,i._protocol),K="POST",te=i.maxUploadRetryTime,se=new cx(W,K,yD(i,t),te);return se.urlParams=G,se.headers=f,se.body=D.uploadData(),se.errorHandler=dx(e),se}class SD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=al.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=al.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=al.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,l){if(this.sent_)throw bc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const h in l)l.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,l[h].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class AD extends SD{initXhr(){this.xhr_.responseType="text"}}function fx(){return new AD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t){this._service=e,t instanceof Hi?this._location=t:this._location=Hi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fl(e,t)}get root(){const e=new Hi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ox(this._location.path)}get storage(){return this._service}get parent(){const e=cD(this._location.path);if(e===null)return null;const t=new Hi(this._location.bucket,e);return new fl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw HO(e)}}function RD(i,e,t){i._throwIfRoot("uploadBytes");const s=xD(i.storage,i._location,lx(),new io(e,!0),t);return i.storage.makeRequestWithTokens(s,fx).then(l=>({metadata:l,ref:i}))}function CD(i){i._throwIfRoot("getDownloadURL");const e=ED(i.storage,i._location,lx());return i.storage.makeRequestWithTokens(e,fx).then(t=>{if(t===null)throw UO();return t})}function ID(i,e){const t=hD(i._location.path,e),s=new Hi(i._location.bucket,t);return new fl(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(i){return/^[A-Za-z]+:\/\//.test(i)}function PD(i,e){return new fl(i,e)}function mx(i,e){if(i instanceof C_){const t=i;if(t._bucket==null)throw jO();const s=new fl(t,t._bucket);return e!=null?mx(s,e):s}else return e!==void 0?ID(i,e):i}function kD(i,e){if(e&&ND(e)){if(i instanceof C_)return PD(i,e);throw fg("To use ref(service, url), the first argument must be a Storage instance.")}else return mx(i,e)}function Jb(i,e){const t=e==null?void 0:e[ex];return t==null?null:Hi.makeFromBucketSpec(t,i)}function OD(i,e,t,s={}){i.host=`${e}:${t}`,i._protocol="http";const{mockUserToken:l}=s;l&&(i._overrideAuthToken=typeof l=="string"?l:LE(l,i.app.options.projectId))}class C_{constructor(e,t,s,l,h){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=l,this._firebaseVersion=h,this._bucket=null,this._host=JT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=RO,this._maxUploadRetryTime=CO,this._requests=new Set,l!=null?this._bucket=Hi.makeFromBucketSpec(l,this._host):this._bucket=Jb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hi.makeFromBucketSpec(this._url,e):this._bucket=Jb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fl(this,e)}_makeRequest(e,t,s,l,h=!0){if(this._deleted)return new qO(tx());{const f=eD(e,this._appId,s,l,t,this._firebaseVersion,h);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,t){const[s,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,l).getPromise()}}const eE="@firebase/storage",tE="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="storage";function DD(i,e,t){return i=It(i),RD(i,e,t)}function LD(i){return i=It(i),CD(i)}function MD(i,e){return i=It(i),kD(i,e)}function gx(i=Rg(),e){i=It(i);const s=Yd(i,px).getImmediate({identifier:e}),l=kE("storage");return l&&VD(s,...l),s}function VD(i,e,t,s={}){OD(i,e,t,s)}function jD(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),l=i.getProvider("app-check-internal");return new C_(t,s,l,e,pl)}function zD(){ll(new co(px,jD,"PUBLIC").setMultipleInstances(!0)),is(eE,tE,""),is(eE,tE,"esm2017")}zD();const UD={apiKey:"AIzaSyAzX41Y6CzCa3paj05MLVibAsPD7Kxyl4c",authDomain:"admu-login.firebaseapp.com",projectId:"admu-login",storageBucket:"admu-login.firebasestorage.app",messagingSenderId:"162328152163",appId:"1:162328152163:web:83e509a02c06a65101d056"},I_=jE(UD),wi=gN(I_),Zt=pO(I_);gx(I_);const N_=()=>{const[i,e]=U.useState(!1),[t,s]=U.useState([]),[l,h]=U.useState(""),[f,_]=U.useState(!1),[y,b]=U.useState([]),[A,C]=U.useState(!1),[k,D]=U.useState(""),G=U.useRef(null);U.useEffect(()=>{const V=yo(Zt,"rutas"),P=Fc(V,I=>{const z=I.docs.map(M=>({id:M.id,name:M.data().nombre,from:M.data().origen,to:M.data().destino,duration:M.data().duracionEstimada||"No especificada",status:M.data().estado==="Activa"?"En tiempo":M.data().estado==="Inactiva"?"Fuera de servicio":"Retraso por mantenimiento",paraderos:M.data().paraderos||[]}));b(z)},I=>{console.error("Error al obtener rutas: ",I)});return()=>P()},[]),U.useEffect(()=>{G.current&&G.current.scrollIntoView({behavior:"auto"})},[t]);const W=V=>{if(V&&V.preventDefault(),l.trim()==="")return;const P={id:t.length+1,text:l,sender:"user",timestamp:new Date};s(I=>[...I,P]),h(""),_(!0),setTimeout(()=>{const I=ue(l);s(z=>[...z,I]),_(!1),K(l.toLowerCase())&&(C(!0),D("main"))},1e3)},K=V=>["hola","buenos días","buenas tardes","buenas noches","saludos","hey","ey","buen día","que tal","qué tal","como estas","cómo estás"].some(I=>V.includes(I)),te=V=>{const P={id:t.length+1,text:V.text,sender:"user",timestamp:new Date};s(I=>[...I,P]),_(!0),setTimeout(()=>{let I;switch(V.type){case"rutas":I={id:t.length+2,text:"¿Sobre qué ruta o destino te gustaría información?",sender:"bot",timestamp:new Date},C(!0),D("rutas");break;case"horarios":I={id:t.length+2,text:`Los buses del sistema ADMU operan en los siguientes horarios:

• Lunes a Viernes: 5:00 AM - 10:00 PM
• Sábados: 5:30 AM - 9:30 PM
• Domingos y Festivos: 6:00 AM - 9:00 PM

¿Te gustaría conocer los horarios de alguna ruta específica?`,sender:"bot",timestamp:new Date},C(!0),D("horarios");break;case"tarifas":I={id:t.length+2,text:`Información sobre tarifas del sistema ADMU:

• Tarifa general: $2,900 pesos
• Tarifa estudiantes (con carné): $1,800 pesos

Método de pago:
• Efectivo directamente al conductor

¿Necesitas más información sobre tarifas?`,sender:"bot",timestamp:new Date},C(!0),D("tarifas");break;case"paraderos":I={id:t.length+2,text:`Los principales paraderos del sistema ADMU son:

• Paradero Centro Comercial Portal del Quindío
• Paradero Aeropuerto El Edén
• Paradero Hospital San Juan de Dios
• Paradero Universidad del Quindío
• Paradero Terminal de Transportes
• Paradero Estación de Policía Armenia

¿Sobre cuál paradero te gustaría más información?`,sender:"bot",timestamp:new Date},C(!0),D("paraderos");break;case"ruta_especifica":{const z=y.find(M=>M.name===V.value);z?I={id:t.length+2,text:`Información sobre ${z.name}:

• Origen: ${z.from}
• Destino: ${z.to}
• Duración aproximada: ${z.duration}
• Estado actual: ${z.status}

¿Necesitas información sobre otra ruta o servicio?`,sender:"bot",timestamp:new Date}:I={id:t.length+2,text:`Lo siento, no encontré información sobre ${V.value}. ¿Te gustaría consultar sobre otra ruta o servicio?`,sender:"bot",timestamp:new Date},C(!0),D("main");break}case"destino":{const z=se(V.value);I={id:t.length+2,text:z,sender:"bot",timestamp:new Date},C(!0),D("main");break}case"horario_especifico":I={id:t.length+2,text:`Horarios para ${V.value}:

• Lunes a Viernes: 5:00 AM - 10:00 PM (cada 15 min en hora pico, 30 min resto del día)
• Sábados: 5:30 AM - 9:30 PM (cada 20 min)
• Domingos y Festivos: 6:00 AM - 9:00 PM (cada 30 min)

Horas pico: 6:00-8:30 AM y 5:00-7:30 PM

¿Necesitas información sobre otro horario o servicio?`,sender:"bot",timestamp:new Date},C(!0),D("main");break;case"paradero_especifico":I={id:t.length+2,text:`Información sobre ${V.value}:

Este paradero cuenta con las siguientes rutas:
• ${Z(V.value).join(`
• `)}

Horario de operación: 5:00 AM - 10:00 PM

¿Necesitas información sobre otro paradero o servicio?`,sender:"bot",timestamp:new Date},C(!0),D("main");break;case"volver":I={id:t.length+2,text:"¿En qué más puedo ayudarte?",sender:"bot",timestamp:new Date},C(!0),D("main");break;default:I={id:t.length+2,text:"¿En qué más puedo ayudarte?",sender:"bot",timestamp:new Date},C(!0),D("main")}s(z=>[...z,I]),_(!1)},1e3)},se=V=>{const P={"Centro Comercial Portal del Quindío":{rutas:["Ruta 1","Ruta 3","Ruta 7","Ruta 18"],info:`Para llegar al Centro Comercial Portal del Quindío, te recomiendo las siguientes rutas:

• Ruta 1: De Punto A a Punto B (20 minutos)
  ✅ Estado: En tiempo
• Ruta 3: De Punto E a Punto F (25 minutos)
  ✅ Estado: En tiempo
• Ruta 7: De Punto M a Punto N (30 minutos)
  ✅ Estado: En tiempo
• Ruta 18: De Punto Y a Punto Z (15 minutos)
  ⚠️ Nota: Esta ruta presenta retraso de 10 minutos

Puedes ver más detalles y el recorrido completo en la sección de Mapa.`},"Aeropuerto El Edén":{rutas:["Ruta 2","Ruta 5","Ruta 9","Ruta 28"],info:`Para llegar al Aeropuerto El Edén, te recomiendo las siguientes rutas:

• Ruta 2: De Punto C a Punto D (15 minutos)
  ⚠️ Nota: Esta ruta presenta retraso de 5 minutos
• Ruta 5: De Punto I a Punto J (40 minutos)
  ✅ Estado: En tiempo
• Ruta 9: De Punto Q a Punto R (35 minutos)
  ✅ Estado: En tiempo
• Ruta 28: De Punto AB a Punto AC (25 minutos)
  ✅ Estado: En tiempo

Puedes ver más detalles y el recorrido completo en la sección de Mapa.`},"Hospital San Juan de Dios":{rutas:["Ruta 4","Ruta 6","Ruta 31","Ruta 35"],info:`Para llegar al Hospital San Juan de Dios, te recomiendo las siguientes rutas:

• Ruta 4: De Punto G a Punto H (18 minutos)
  ✅ Estado: En tiempo
• Ruta 6: De Punto K a Punto L (22 minutos)
  ✅ Estado: En tiempo
• Ruta 31: De Punto AD a Punto AE (30 minutos)
  ⚠️ Nota: Esta ruta presenta retraso de 8 minutos
• Ruta 35: De Punto AF a Punto AG (25 minutos)
  ✅ Estado: En tiempo

Puedes ver más detalles y el recorrido completo en la sección de Mapa.`},"Universidad del Quindío":{rutas:["Ruta 1","Ruta 10","Ruta 24","Ruta 37"],info:`Para llegar a la Universidad del Quindío, te recomiendo las siguientes rutas:

• Ruta 1: De Punto A a Punto B (20 minutos)
  ✅ Estado: En tiempo
• Ruta 10: De Punto S a Punto T (15 minutos)
  ✅ Estado: En tiempo
• Ruta 24: De Punto AH a Punto AI (25 minutos)
  ✅ Estado: En tiempo
• Ruta 37: De Punto AJ a Punto AK (30 minutos)
  ⚠️ Nota: Esta ruta presenta retraso de 5 minutos

Puedes ver más detalles y el recorrido completo en la sección de Mapa.`},"Terminal de Transportes":{rutas:["Ruta 2","Ruta 11","Ruta 15","Ruta 33"],info:`Para llegar a la Terminal de Transportes, te recomiendo las siguientes rutas:

• Ruta 2: De Punto C a Punto D (15 minutos)
  ⚠️ Nota: Esta ruta presenta retraso de 5 minutos
• Ruta 11: De Punto U a Punto V (20 minutos)
  ✅ Estado: En tiempo
• Ruta 15: De Punto W a Punto X (25 minutos)
  ✅ Estado: En tiempo
• Ruta 33: De Punto AL a Punto AM (30 minutos)
  ✅ Estado: En tiempo

Puedes ver más detalles y el recorrido completo en la sección de Mapa.`},"Estación de Policía Armenia":{rutas:["Ruta 3","Ruta 12","Ruta 27"],info:`Para llegar a la Estación de Policía Armenia, te recomiendo las siguientes rutas:

• Ruta 3: De Punto E a Punto F (25 minutos)
  ✅ Estado: En tiempo
• Ruta 12: De Punto AN a Punto AO (15 minutos)
  ✅ Estado: En tiempo
• Ruta 27: De Punto AP a Punto AQ (20 minutos)
  ⚠️ Nota: Esta ruta presenta retraso de 10 minutos

Puedes ver más detalles y el recorrido completo en la sección de Mapa.`}};return P[V]?P[V].info:`Lo siento, no tengo información específica sobre cómo llegar a ${V}.`},Z=V=>({"Paradero Centro Comercial Portal del Quindío":["Ruta 1","Ruta 3","Ruta 7","Ruta 18"],"Paradero Aeropuerto El Edén":["Ruta 2","Ruta 5","Ruta 9","Ruta 28"],"Paradero Hospital San Juan de Dios":["Ruta 4","Ruta 6","Ruta 31","Ruta 35"],"Paradero Universidad del Quindío":["Ruta 1","Ruta 10","Ruta 24","Ruta 37"],"Paradero Terminal de Transportes":["Ruta 2","Ruta 11","Ruta 15","Ruta 33"],"Paradero Estación de Policía Armenia":["Ruta 3","Ruta 12","Ruta 27"]})[V]||["No hay rutas asignadas"],ue=V=>{const P=V.toLowerCase();let I="";const z=["ruta","bus","transporte","ir a","cómo llegar","como llegar","como ir","llegar a","ir hacia","transporte a","bus a","autobus","autobús","camino","trayecto"],M=["horario","hora","cuando","cuándo","frecuencia","a qué hora","a que hora","cada cuanto","cada cuánto","tiempo","pasa","pasan"],F=["tarifa","precio","costo","valor","cuánto cuesta","cuanto cuesta","cuánto vale","cuanto vale","pasaje","boleto","tiquete","pagar","cobran","vale","cuesta","dinero"],j=["paradero","parada","estación","estacion","donde tomar","donde abordar","sitio","lugar","punto","terminal"],Oe=["hola","buenos días","buenas tardes","buenas noches","saludos","hey","ey","buen día","que tal","qué tal","como estas","cómo estás"],Me=["gracias","muchas gracias","te agradezco","agradecido","agradecida","thanks","thx","muy amable"],me=["quién eres","quien eres","qué eres","que eres","cómo te llamas","como te llamas","tu nombre","eres un bot","eres humano","eres persona","eres robot"];if(z.some(Ee=>P.includes(Ee))){const Ee=[{keywords:["centro","comercial","portal","quindío","quindio","portal del quindio"],name:"Centro Comercial Portal del Quindío"},{keywords:["aeropuerto","eden","el eden","edén","el edén"],name:"Aeropuerto El Edén"},{keywords:["hospital","san juan","san juan de dios","centro médico","centro medico"],name:"Hospital San Juan de Dios"},{keywords:["universidad","quindio","universidad del quindio","u del quindio","campus"],name:"Universidad del Quindío"},{keywords:["terminal","transportes","terminal de transportes","buses","terminal de buses"],name:"Terminal de Transportes"},{keywords:["estación","policia","estacion de policia","policía","estación de policía"],name:"Estación de Policía Armenia"}];let fe=!1;for(const Ye of Ee)if(Ye.keywords.some(B=>P.includes(B))){I=se(Ye.name),fe=!0;break}if(!fe){const Ye=P.match(/ruta\s+(\d+)/i)||P.match(/(\d+)/);if(Ye){const B=parseInt(Ye[1]),le=`Ruta ${B}`,we=y.find(ve=>ve.name===le);we?(I=`Información sobre ${we.name}:

`,I+=`• Origen: ${we.from}
`,I+=`• Destino: ${we.to}
`,I+=`• Duración aproximada: ${we.duration}
`,I+=`• Estado actual: ${we.status}

`,I+="Esta ruta pasa por varios paraderos importantes. ¿Te gustaría conocer más detalles sobre algún paradero específico?"):I=`No encontré información sobre la Ruta ${B}. Las rutas disponibles son: ${y.slice(0,5).map(ve=>ve.name).join(", ")}, entre otras. ¿Sobre cuál te gustaría información?`}else I="Puedo ayudarte con información sobre rutas y cómo llegar a diferentes destinos. Selecciona una opción para obtener información específica.",setTimeout(()=>{C(!0),D("rutas")},500)}}else if(M.some(Ee=>P.includes(Ee))){const Ee=P.match(/ruta\s+(\d+)/i)||P.match(/(\d+)/);Ee?(I=`Horarios para la Ruta ${parseInt(Ee[1])}:

`,I+=`• Lunes a Viernes: 5:00 AM - 10:00 PM (cada 15 min en hora pico, 30 min resto del día)
`,I+=`• Sábados: 5:30 AM - 9:30 PM (cada 20 min)
`,I+=`• Domingos y Festivos: 6:00 AM - 9:00 PM (cada 30 min)

`,I+=`Horas pico: 6:00-8:30 AM y 5:00-7:30 PM
`,I+="Nota: Los horarios pueden variar según condiciones de tráfico y eventos especiales."):(I=`Los buses del sistema ADMU operan en los siguientes horarios:

`,I+=`• Lunes a Viernes: 5:00 AM - 10:00 PM
`,I+=`• Sábados: 5:30 AM - 9:30 PM
`,I+=`• Domingos y Festivos: 6:00 AM - 9:00 PM

`,I+=`La frecuencia varía según la ruta y hora del día:
`,I+=`• Horas pico (6:00-8:30 AM y 5:00-7:30 PM): Cada 15-20 minutos
`,I+=`• Resto del día: Cada 30 minutos

`,I+="Selecciona una ruta para ver sus horarios específicos:",setTimeout(()=>{C(!0),D("horarios")},500))}else F.some(Ee=>P.includes(Ee))?(I=`Información sobre tarifas del sistema ADMU:

`,I+=`• Tarifa general: $2,900 pesos
`,I+=`• Tarifa estudiantes (con carné): $1,800 pesos

`,I+=`Método de pago:
`,I+=`• Efectivo directamente al conductor
`,setTimeout(()=>{C(!0),D("tarifas")},500)):j.some(Ee=>P.includes(Ee))?(I=`Los principales paraderos del sistema ADMU son:

`,I+=`• Paradero Centro Comercial Portal del Quindío
`,I+=`• Paradero Aeropuerto El Edén
`,I+=`• Paradero Hospital San Juan de Dios
`,I+=`• Paradero Universidad del Quindío
`,I+=`• Paradero Terminal de Transportes
`,I+=`• Paradero Estación de Policía Armenia

`,I+="Selecciona un paradero para más información:",setTimeout(()=>{C(!0),D("paraderos")},500)):Oe.some(Ee=>P.includes(Ee))?(I="¡Hola! Soy el asistente virtual de ADMU. Estoy aquí para ayudarte con información sobre rutas, paraderos, horarios y tarifas. ¿En qué puedo ayudarte hoy?",setTimeout(()=>{C(!0),D("main")},500)):Me.some(Ee=>P.includes(Ee))?(I="¡De nada! Ha sido un placer ayudarte. Si tienes más preguntas sobre rutas, horarios, tarifas o cualquier otro aspecto del sistema de transporte ADMU, no dudes en consultarme. ¡Que tengas un excelente viaje!",setTimeout(()=>{C(!0),D("main")},500)):me.some(Ee=>P.includes(Ee))?(I=`Soy el asistente virtual de ADMU, diseñado para ayudarte con información sobre el sistema de transporte público de Armenia. Puedo responder preguntas sobre:

• Rutas y cómo llegar a diferentes destinos
• Horarios de servicio de los buses
• Tarifas y métodos de pago
• Ubicación de paraderos
• Estado actual de las rutas

Estoy aquí para hacer tu experiencia de viaje más fácil y resolver todas tus dudas sobre el transporte público.`,setTimeout(()=>{C(!0),D("main")},500)):(I="Entiendo que necesitas ayuda. Selecciona una de las siguientes opciones para que pueda asistirte mejor:",setTimeout(()=>{C(!0),D("main")},500));return{id:t.length+2,text:I,sender:"bot",timestamp:new Date}},_e=V=>V.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Se=()=>{if(!A)return null;let V=[];switch(k){case"main":V=[{icon:w.jsx(Zs,{size:14}),text:"Información de rutas",type:"rutas"},{icon:w.jsx(nl,{size:14}),text:"Horarios de servicio",type:"horarios"},{icon:w.jsx(pp,{size:14}),text:"Tarifas y pagos",type:"tarifas"},{icon:w.jsx(Ya,{size:14}),text:"Paraderos",type:"paraderos"}];break;case"rutas":V=[{icon:w.jsx(Zs,{size:14}),text:"Centro Comercial Portal del Quindío",type:"destino",value:"Centro Comercial Portal del Quindío"},{icon:w.jsx(Zs,{size:14}),text:"Aeropuerto El Edén",type:"destino",value:"Aeropuerto El Edén"},{icon:w.jsx(Zs,{size:14}),text:"Hospital San Juan de Dios",type:"destino",value:"Hospital San Juan de Dios"},{icon:w.jsx(Zs,{size:14}),text:"Universidad del Quindío",type:"destino",value:"Universidad del Quindío"},{icon:w.jsx(Zs,{size:14}),text:"Terminal de Transportes",type:"destino",value:"Terminal de Transportes"},{icon:w.jsx(Zs,{size:14}),text:"Estación de Policía Armenia",type:"destino",value:"Estación de Policía Armenia"},{icon:w.jsx(rd,{size:14}),text:"Volver al menú principal",type:"volver"}],y.length>0&&(V=[...y.slice(0,5).map(I=>({icon:w.jsx(kA,{size:14}),text:I.name,type:"ruta_especifica",value:I.name})),...V]);break;case"horarios":V=[{icon:w.jsx(nl,{size:14}),text:"Ruta 1",type:"horario_especifico",value:"la Ruta 1"},{icon:w.jsx(nl,{size:14}),text:"Ruta 2",type:"horario_especifico",value:"la Ruta 2"},{icon:w.jsx(nl,{size:14}),text:"Ruta 3",type:"horario_especifico",value:"la Ruta 3"},{icon:w.jsx(nl,{size:14}),text:"Ruta 4",type:"horario_especifico",value:"la Ruta 4"},{icon:w.jsx(nl,{size:14}),text:"Ruta 5",type:"horario_especifico",value:"la Ruta 5"},{icon:w.jsx(rd,{size:14}),text:"Volver al menú principal",type:"volver"}];break;case"tarifas":V=[{icon:w.jsx(pp,{size:14}),text:"Descuentos especiales",type:"tarifas",value:"descuentos"},{icon:w.jsx(rd,{size:14}),text:"Volver al menú principal",type:"volver"}];break;case"paraderos":V=[{icon:w.jsx(Ya,{size:14}),text:"Paradero Centro Comercial Portal del Quindío",type:"paradero_especifico",value:"Paradero Centro Comercial Portal del Quindío"},{icon:w.jsx(Ya,{size:14}),text:"Paradero Aeropuerto El Edén",type:"paradero_especifico",value:"Paradero Aeropuerto El Edén"},{icon:w.jsx(Ya,{size:14}),text:"Paradero Hospital San Juan de Dios",type:"paradero_especifico",value:"Paradero Hospital San Juan de Dios"},{icon:w.jsx(Ya,{size:14}),text:"Paradero Universidad del Quindío",type:"paradero_especifico",value:"Paradero Universidad del Quindío"},{icon:w.jsx(Ya,{size:14}),text:"Paradero Terminal de Transportes",type:"paradero_especifico",value:"Paradero Terminal de Transportes"},{icon:w.jsx(Ya,{size:14}),text:"Paradero Estación de Policía Armenia",type:"paradero_especifico",value:"Paradero Estación de Policía Armenia"},{icon:w.jsx(rd,{size:14}),text:"Volver al menú principal",type:"volver"}];break;default:V=[{icon:w.jsx(Zs,{size:14}),text:"Información de rutas",type:"rutas"},{icon:w.jsx(nl,{size:14}),text:"Horarios de servicio",type:"horarios"},{icon:w.jsx(pp,{size:14}),text:"Tarifas y pagos",type:"tarifas"},{icon:w.jsx(Ya,{size:14}),text:"Paraderos",type:"paraderos"}]}return w.jsx("div",{className:"mt-3 space-y-1",children:V.map((P,I)=>w.jsxs("button",{onClick:()=>te(P),className:"flex items-center space-x-2 w-full p-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-md transition-colors text-left text-sm",children:[w.jsx("span",{className:"text-blue-600",children:P.icon}),w.jsx("span",{children:P.text})]},I))})};return w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>e(!i),className:"fixed bottom-6 right-6 z-[1000] bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg transition-all duration-300 flex items-center justify-center","aria-label":i?"Cerrar chat":"Abrir chat",children:i?w.jsx(Hp,{size:20}):w.jsx(_p,{size:20})}),w.jsxs("div",{className:`fixed bottom-20 right-6 z-[1000] bg-white rounded-lg shadow-xl transition-all duration-300 flex flex-col w-80 md:w-96 max-h-[500px] ${i?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,style:{transform:i?"translateY(0)":"translateY(20px)"},children:[w.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-3 rounded-t-lg flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx(_p,{size:16,className:"mr-1.5"}),w.jsx("h3",{className:"font-semibold text-sm",children:"Asistente ADMU"})]}),w.jsxs("div",{className:"flex items-center space-x-1.5",children:[w.jsx("button",{onClick:()=>e(!1),className:"text-white hover:text-gray-200 transition","aria-label":"Minimizar chat",children:w.jsx(MA,{size:16})}),w.jsx("button",{onClick:()=>e(!1),className:"text-white hover:text-gray-200 transition","aria-label":"Cerrar chat",children:w.jsx(Hp,{size:16})})]})]}),w.jsx("div",{className:"flex-1 p-3 overflow-y-auto bg-gray-50",children:t.length===0?w.jsx("div",{className:"flex justify-center items-center h-full text-gray-400 text-xs",children:'Escribe "Hola" para comenzar una conversación'}):w.jsxs("div",{className:"space-y-3",children:[t.map(V=>w.jsx("div",{className:`flex ${V.sender==="user"?"justify-end":"justify-start"}`,children:w.jsxs("div",{className:`max-w-[80%] rounded-lg p-2.5 ${V.sender==="user"?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-800"}`,children:[w.jsx("div",{className:"whitespace-pre-line text-xs",children:V.text}),w.jsx("div",{className:`text-[10px] mt-1 ${V.sender==="user"?"text-blue-100":"text-gray-500"}`,children:_e(V.timestamp)})]})},V.id)),f&&w.jsx("div",{className:"flex justify-start",children:w.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-2.5 max-w-[80%]",children:w.jsxs("div",{className:"flex space-x-1",children:[w.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce"}),w.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),w.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),A&&Se(),w.jsx("div",{ref:G})]})}),w.jsxs("form",{onSubmit:W,className:"p-3 border-t border-gray-200 bg-white rounded-b-lg",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{type:"text",value:l,onChange:V=>h(V.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 border border-gray-300 rounded-l-lg py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-800 text-sm placeholder:text-sm"}),w.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white rounded-r-lg p-1.5 transition",disabled:l.trim()==="",children:w.jsx(aR,{size:16})})]}),w.jsx("div",{className:"mt-1.5 text-xs text-gray-500 flex items-center justify-center",children:w.jsx("div",{className:"flex space-x-2",children:w.jsxs("button",{type:"button",onClick:()=>h("Hola"),className:"flex items-center text-blue-600 hover:text-blue-800 text-xs",children:[w.jsx(_p,{size:10,className:"mr-1"})," Saludar"]})})})]})]})]})},BD=()=>{const[i,e]=U.useState(""),[t,s]=U.useState(""),[l,h]=U.useState(!1),[f,_]=U.useState(""),[y,b]=U.useState(!1),[A,C]=U.useState(!1),[k,D]=U.useState(""),[G,W]=U.useState(!1),K=ml(),te=async Z=>{Z.preventDefault(),_(""),b(!0);try{if(!i||!t)throw new Error("Por favor, completa todos los campos.");if(!i.includes("@"))throw new Error("Por favor, ingresa un correo electrónico válido.");await J2(wi,i,t),console.log("Inicio de sesión exitoso",{email:i}),K("/dashboard")}catch(ue){_(ue.code==="auth/user-not-found"?"El usuario no está registrado. Por favor, regístrate.":ue.code==="auth/wrong-password"?"Contraseña incorrecta. Inténtalo de nuevo.":ue.code==="auth/too-many-requests"?"Demasiados intentos fallidos. Intenta más tarde o restablece tu contraseña.":"Ocurrió un error. Por favor, inténtalo de nuevo.")}finally{b(!1)}},se=async Z=>{Z.preventDefault(),_(""),b(!0);try{if(!k||!k.includes("@"))throw new Error("Por favor, ingresa un correo electrónico válido.");await $2(wi,k),W(!0)}catch(ue){_(ue.code==="auth/user-not-found"?"No existe una cuenta con este correo electrónico.":"Ocurrió un error. Por favor, inténtalo de nuevo.")}finally{b(!1)}};return w.jsx("div",{className:"flex min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:w.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-5xl mx-auto overflow-hidden shadow-2xl rounded-xl m-4",children:[w.jsx("div",{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-blue-600 to-indigo-800 p-12 text-white flex-col justify-center items-center",children:w.jsxs("div",{className:"max-w-md",children:[w.jsx("h1",{className:"text-4xl font-bold mb-6",children:"¡Bienvenido de nuevo!"}),w.jsx("p",{className:"text-lg opacity-90 mb-8",children:"Inicia sesión para acceder a tu cuenta y gestionar todas tus actividades."}),w.jsx("div",{className:"bg-white/10 p-6 rounded-lg backdrop-blur-sm",children:w.jsx("p",{className:"italic text-white/80",children:'"Nuestra plataforma ofrece un acceso seguro y rápido a todas tus herramientas favoritas."'})})]})}),w.jsx(N_,{}),w.jsx("div",{className:"w-full md:w-1/2 bg-white p-8 md:p-12 flex flex-col justify-center",children:A?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"text-center mb-10",children:[w.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-blue-50 rounded-full mb-4",children:w.jsx(SE,{size:36,className:"text-blue-600"})}),w.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Recuperar Contraseña"}),w.jsx("p",{className:"text-gray-600 mt-2",children:"Te enviaremos un correo con instrucciones"})]}),f&&w.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:w.jsx("p",{children:f})}),G?w.jsx("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 text-green-700 rounded",children:w.jsx("p",{children:"Se ha enviado un correo con instrucciones para restablecer tu contraseña. Revisa tu bandeja de entrada."})}):w.jsxs("form",{onSubmit:se,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo Electrónico"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(Up,{size:18,className:"text-gray-400"})}),w.jsx("input",{type:"email",id:"reset-email",placeholder:"tu@email.com",value:k,onChange:Z=>D(Z.target.value),className:"pl-10 block w-full rounded-lg border border-gray-300 py-3 px-4 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0})]})]}),w.jsx("div",{children:w.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-3 px-4 rounded-lg font-medium hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transform transition-all hover:-translate-y-0.5 shadow-md disabled:opacity-70",children:y?w.jsxs("span",{className:"flex items-center justify-center",children:[w.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Enviando..."]}):"Enviar correo de recuperación"})})]}),w.jsx("div",{className:"mt-6 text-center",children:w.jsxs("button",{onClick:()=>{C(!1),W(!1),_("")},className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium transition",children:[w.jsx(wE,{size:16,className:"mr-2"}),"Volver al inicio de sesión"]})})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"text-center mb-10",children:[w.jsx(fn,{to:"/inicio",className:"flex items-center space-x-2 inline-flex items-center justify-center p-4 bg-blue-50 rounded-full mb-4",children:w.jsx("img",{src:"/icons/parada-Icon.png",alt:"ADMU Logo",className:" h-20 w-20"})}),w.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Iniciar Sesión"}),w.jsx("p",{className:"text-gray-600 mt-2",children:"Ingresa tus credenciales para continuar"})]}),f&&w.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:w.jsx("p",{children:f})}),w.jsxs("form",{onSubmit:te,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo Electrónico"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(Up,{size:18,className:"text-gray-400"})}),w.jsx("input",{type:"email",id:"email",placeholder:"tu@email.com",value:i,onChange:Z=>e(Z.target.value),className:"pl-10 block w-full rounded-lg border border-gray-300 py-3 px-4 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0})]})]}),w.jsxs("div",{children:[w.jsx("div",{className:"flex justify-between items-center mb-1",children:w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"})}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(jp,{size:18,className:"text-gray-400"})}),w.jsx("input",{type:l?"text":"password",id:"password",placeholder:"********",value:t,onChange:Z=>s(Z.target.value),className:"pl-10 block w-full rounded-lg border border-gray-300 py-3 px-4 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0}),w.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!l),children:l?w.jsx(Mp,{size:18,className:"text-gray-500 hover:text-gray-700 transition"}):w.jsx(Vp,{size:18,className:"text-gray-500 hover:text-gray-700 transition"})})]})]}),w.jsx("div",{children:w.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-3 px-4 rounded-lg font-medium hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transform transition-all hover:-translate-y-0.5 shadow-md disabled:opacity-70",children:y?w.jsxs("span",{className:"flex items-center justify-center",children:[w.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Iniciando sesión..."]}):w.jsxs("span",{className:"flex items-center justify-center",children:[w.jsx(KA,{size:18,className:"mr-2"}),"Iniciar Sesión"]})})}),w.jsx("div",{className:"text-center",children:w.jsx("button",{type:"button",onClick:()=>{C(!0),D(i)},className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition",children:"¿Olvidaste tu contraseña?"})})]}),w.jsx("div",{className:"mt-8 text-center border-t border-gray-200 pt-6",children:w.jsxs("p",{className:"text-gray-600",children:["¿No tienes una cuenta?"," ",w.jsx("a",{href:"/register",className:"font-medium text-blue-600 hover:text-blue-800 transition",children:"Regístrate aquí"})]})})]})})]})})},HD=()=>{const[i,e]=U.useState(""),[t,s]=U.useState(""),[l,h]=U.useState(""),[f,_]=U.useState(""),[y,b]=U.useState(!1),[A,C]=U.useState(!1),[k,D]=U.useState(""),[G,W]=U.useState(!1),K=ml(),te=Z=>/^(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,}$/.test(Z),se=async Z=>{if(Z.preventDefault(),D(""),W(!0),!i||!t||!l||!f){D("Por favor, completa todos los campos."),W(!1);return}if(!t.includes("@")){D("Por favor, ingresa un correo electrónico válido."),W(!1);return}if(l.length<8){D("La contraseña debe tener al menos 8 caracteres."),W(!1);return}if(!te(l)){D("La contraseña debe tener al menos una letra mayúscula y un carácter especial."),W(!1);return}if(l!==f){D("Las contraseñas no coinciden."),W(!1);return}try{const ue=await X2(wi,t,l);await tI(ue.user,{displayName:i}),await AO(ui(Zt,"users",ue.user.uid),{uid:ue.user.uid,name:i,email:t,createdAt:new Date}),console.log("Usuario registrado exitosamente",ue.user),K("/dashboard")}catch(ue){ue.code==="auth/email-already-in-use"?D("Este correo electrónico ya está registrado."):ue.code==="auth/invalid-email"?D("El formato del correo electrónico no es válido."):ue.code==="auth/weak-password"?D("La contraseña es demasiado débil."):D(ue.message)}finally{W(!1)}};return w.jsx("div",{className:"flex min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:w.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-5xl mx-auto overflow-hidden shadow-2xl rounded-xl m-4",children:[w.jsx("div",{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-blue-600 to-indigo-800 p-12 text-white flex-col justify-center items-center",children:w.jsxs("div",{className:"max-w-md",children:[w.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Únete a nosotros"}),w.jsx("p",{className:"text-lg opacity-90 mb-8",children:"Crea una cuenta para acceder a todas nuestras funcionalidades y comenzar tu experiencia."}),w.jsx("div",{className:"bg-white/10 p-6 rounded-lg backdrop-blur-sm",children:w.jsx("p",{className:"italic text-white/80",children:'"Registrarse te da acceso a funciones exclusivas y te mantiene conectado con nuestra comunidad."'})})]})}),w.jsxs("div",{className:"w-full md:w-1/2 bg-white p-8 md:p-12 flex flex-col justify-center",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-blue-50 rounded-full mb-4",children:w.jsx(fR,{size:36,className:"text-blue-600"})}),w.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Crear Cuenta"}),w.jsx("p",{className:"text-gray-600 mt-2",children:"Ingresa tus datos para registrarte"})]}),k&&w.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:w.jsx("p",{children:k})}),w.jsxs("form",{onSubmit:se,className:"space-y-5",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(Bp,{size:18,className:"text-gray-400"})}),w.jsx("input",{type:"text",id:"name",placeholder:"Tu nombre completo",value:i,onChange:Z=>e(Z.target.value),className:"pl-10 block w-full rounded-lg border border-gray-300 py-3 px-4 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo Electrónico"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(Up,{size:18,className:"text-gray-400"})}),w.jsx("input",{type:"email",id:"email",placeholder:"correo@ejemplo.com",value:t,onChange:Z=>s(Z.target.value),className:"pl-10 block w-full rounded-lg border border-gray-300 py-3 px-4 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(jp,{size:18,className:"text-gray-400"})}),w.jsx("input",{type:y?"text":"password",id:"password",placeholder:"Mínimo 8 caracteres",value:l,onChange:Z=>h(Z.target.value),className:"pl-10 block w-full rounded-lg border border-gray-300 py-3 px-4 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0}),w.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>b(!y),children:y?w.jsx(Mp,{size:18,className:"text-gray-500 hover:text-gray-700 transition"}):w.jsx(Vp,{size:18,className:"text-gray-500 hover:text-gray-700 transition"})})]}),w.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Debe contener al menos 8 caracteres, una mayúscula y un carácter especial"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Contraseña"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(jp,{size:18,className:"text-gray-400"})}),w.jsx("input",{type:A?"text":"password",id:"confirmPassword",placeholder:"Confirma tu contraseña",value:f,onChange:Z=>_(Z.target.value),className:"pl-10 block w-full rounded-lg border border-gray-300 py-3 px-4 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0}),w.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>C(!A),children:A?w.jsx(Mp,{size:18,className:"text-gray-500 hover:text-gray-700 transition"}):w.jsx(Vp,{size:18,className:"text-gray-500 hover:text-gray-700 transition"})})]})]}),w.jsx("div",{className:"pt-2",children:w.jsx("button",{type:"submit",disabled:G,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-3 px-4 rounded-lg font-medium hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transform transition-all hover:-translate-y-0.5 shadow-md disabled:opacity-70",children:G?w.jsxs("span",{className:"flex items-center justify-center",children:[w.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Registrando..."]}):"Crear Cuenta"})})]}),w.jsx("div",{className:"mt-8 text-center border-t border-gray-200 pt-6",children:w.jsxs("p",{className:"text-gray-600",children:["¿Ya tienes una cuenta?"," ",w.jsx(fn,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-800 transition",children:"Inicia sesión aquí"})]})})]})]})})},qD=()=>{const[i,e]=U.useState(""),[t,s]=U.useState(""),[l,h]=U.useState(""),[f,_]=U.useState(!1),[y,b]=U.useState(!1),[A,C]=U.useState(!1),k=ml(),D=cs(),W=new URLSearchParams(D.search).get("oobCode");U.useEffect(()=>{(async()=>{if(!W){h("Enlace de restablecimiento inválido");return}try{b(!0),await Y2(wi,W),C(!0)}catch{h("El enlace de restablecimiento no es válido o ha expirado")}finally{b(!1)}})()},[W]);const K=async te=>{if(te.preventDefault(),i!==t){h("Las contraseñas no coinciden");return}if(i.length<6){h("La contraseña debe tener al menos 6 caracteres");return}try{b(!0),await Q2(wi,W,i),_(!0),setTimeout(()=>{k("/login")},3e3)}catch(se){h("Error al restablecer la contraseña: "+se.message)}finally{b(!1)}};return y?w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:w.jsx("div",{className:"text-center",children:"Cargando..."})}):w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:w.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[w.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Restablecer Contraseña"}),l&&w.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:l}),f?w.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:"Contraseña restablecida con éxito. Serás redirigido al inicio de sesión."}):A?w.jsxs("form",{onSubmit:K,children:[w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{className:"block text-gray-700 mb-2",htmlFor:"new-password",children:"Nueva contraseña"}),w.jsx("input",{id:"new-password",type:"password",value:i,onChange:te=>e(te.target.value),className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("label",{className:"block text-gray-700 mb-2",htmlFor:"confirm-password",children:"Confirmar contraseña"}),w.jsx("input",{id:"confirm-password",type:"password",value:t,onChange:te=>s(te.target.value),className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),w.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-700",disabled:y,children:"Cambiar Contraseña"})]}):w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"mb-4",children:"El enlace no es válido o ha expirado."}),w.jsx("button",{onClick:()=>k("/login"),className:"text-blue-500 hover:text-blue-700",children:"Volver al inicio de sesión"})]})]})})};function _x(i,e){const t=U.useRef(e);U.useEffect(function(){e!==t.current&&i.attributionControl!=null&&(t.current!=null&&i.attributionControl.removeAttribution(t.current),e!=null&&i.attributionControl.addAttribution(e)),t.current=e},[i,e])}const FD=1;function GD(i){return Object.freeze({__version:FD,map:i})}function yx(i,e){return Object.freeze({...i,...e})}const P_=U.createContext(null);function wf(){const i=U.use(P_);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function vx(i){function e(t,s){const{instance:l,context:h}=i(t).current;U.useImperativeHandle(s,()=>l);const{children:f}=t;return f==null?null:Sd.createElement(P_,{value:h},f)}return U.forwardRef(e)}function ZD(i){function e(t,s){const[l,h]=U.useState(!1),{instance:f}=i(t,h).current;U.useImperativeHandle(s,()=>f),U.useEffect(function(){l&&f.update()},[f,l,t.children]);const _=f._contentNode;return _?SA.createPortal(t.children,_):null}return U.forwardRef(e)}function KD(i){function e(t,s){const{instance:l}=i(t).current;return U.useImperativeHandle(s,()=>l),null}return U.forwardRef(e)}function k_(i,e){const t=U.useRef(void 0);U.useEffect(function(){return e!=null&&i.instance.on(e),t.current=e,function(){t.current!=null&&i.instance.off(t.current),t.current=null}},[i,e])}function Tf(i,e){const t=i.pane??e.pane;return t?{...i,pane:t}:i}function $D(i,e){return function(s,l){const h=wf(),f=i(Tf(s,h),h);return _x(h.map,s.attribution),k_(f.current,s.eventHandlers),e(f.current,h,s,l),f}}var Rc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var QD=Rc.exports,nE;function WD(){return nE||(nE=1,function(i,e){(function(t,s){s(e)})(QD,function(t){var s="1.9.4";function l(a){var u,m,v,T;for(m=1,v=arguments.length;m<v;m++){T=arguments[m];for(u in T)a[u]=T[u]}return a}var h=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function f(a,u){var m=Array.prototype.slice;if(a.bind)return a.bind.apply(a,m.call(arguments,1));var v=m.call(arguments,2);return function(){return a.apply(u,v.length?v.concat(m.call(arguments)):arguments)}}var _=0;function y(a){return"_leaflet_id"in a||(a._leaflet_id=++_),a._leaflet_id}function b(a,u,m){var v,T,R,q;return q=function(){v=!1,T&&(R.apply(m,T),T=!1)},R=function(){v?T=arguments:(a.apply(m,arguments),setTimeout(q,u),v=!0)},R}function A(a,u,m){var v=u[1],T=u[0],R=v-T;return a===v&&m?a:((a-T)%R+R)%R+T}function C(){return!1}function k(a,u){if(u===!1)return a;var m=Math.pow(10,u===void 0?6:u);return Math.round(a*m)/m}function D(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function G(a){return D(a).split(/\s+/)}function W(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?h(a.options):{});for(var m in u)a.options[m]=u[m];return a.options}function K(a,u,m){var v=[];for(var T in a)v.push(encodeURIComponent(m?T.toUpperCase():T)+"="+encodeURIComponent(a[T]));return(!u||u.indexOf("?")===-1?"?":"&")+v.join("&")}var te=/\{ *([\w_ -]+) *\}/g;function se(a,u){return a.replace(te,function(m,v){var T=u[v];if(T===void 0)throw new Error("No value provided for variable "+m);return typeof T=="function"&&(T=T(u)),T})}var Z=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function ue(a,u){for(var m=0;m<a.length;m++)if(a[m]===u)return m;return-1}var _e="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Se(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var V=0;function P(a){var u=+new Date,m=Math.max(0,16-(u-V));return V=u+m,window.setTimeout(a,m)}var I=window.requestAnimationFrame||Se("RequestAnimationFrame")||P,z=window.cancelAnimationFrame||Se("CancelAnimationFrame")||Se("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function M(a,u,m){if(m&&I===P)a.call(u);else return I.call(window,f(a,u))}function F(a){a&&z.call(window,a)}var j={__proto__:null,extend:l,create:h,bind:f,get lastId(){return _},stamp:y,throttle:b,wrapNum:A,falseFn:C,formatNum:k,trim:D,splitWords:G,setOptions:W,getParamString:K,template:se,isArray:Z,indexOf:ue,emptyImageUrl:_e,requestFn:I,cancelFn:z,requestAnimFrame:M,cancelAnimFrame:F};function Oe(){}Oe.extend=function(a){var u=function(){W(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=u.__super__=this.prototype,v=h(m);v.constructor=u,u.prototype=v;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(u[T]=this[T]);return a.statics&&l(u,a.statics),a.includes&&(Me(a.includes),l.apply(null,[v].concat(a.includes))),l(v,a),delete v.statics,delete v.includes,v.options&&(v.options=m.options?h(m.options):{},l(v.options,a.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,q=v._initHooks.length;R<q;R++)v._initHooks[R].call(this)}},u},Oe.include=function(a){var u=this.prototype.options;return l(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},Oe.mergeOptions=function(a){return l(this.prototype.options,a),this},Oe.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),m=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Me(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=Z(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var me={on:function(a,u,m){if(typeof a=="object")for(var v in a)this._on(v,a[v],u);else{a=G(a);for(var T=0,R=a.length;T<R;T++)this._on(a[T],u,m)}return this},off:function(a,u,m){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var v in a)this._off(v,a[v],u);else{a=G(a);for(var T=arguments.length===1,R=0,q=a.length;R<q;R++)T?this._off(a[R]):this._off(a[R],u,m)}return this},_on:function(a,u,m,v){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,m)===!1){m===this&&(m=void 0);var T={fn:u,ctx:m};v&&(T.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(T)}},_off:function(a,u,m){var v,T,R;if(this._events&&(v=this._events[a],!!v)){if(arguments.length===1){if(this._firingCount)for(T=0,R=v.length;T<R;T++)v[T].fn=C;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var q=this._listens(a,u,m);if(q!==!1){var Y=v[q];this._firingCount&&(Y.fn=C,this._events[a]=v=v.slice()),v.splice(q,1)}}},fire:function(a,u,m){if(!this.listens(a,m))return this;var v=l({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var T=this._events[a];if(T){this._firingCount=this._firingCount+1||1;for(var R=0,q=T.length;R<q;R++){var Y=T[R],ie=Y.fn;Y.once&&this.off(a,ie,Y.ctx),ie.call(Y.ctx||this,v)}this._firingCount--}}return m&&this._propagateEvent(v),this},listens:function(a,u,m,v){typeof a!="string"&&console.warn('"string" type argument expected');var T=u;typeof u!="function"&&(v=!!u,T=void 0,m=void 0);var R=this._events&&this._events[a];if(R&&R.length&&this._listens(a,T,m)!==!1)return!0;if(v){for(var q in this._eventParents)if(this._eventParents[q].listens(a,u,m,v))return!0}return!1},_listens:function(a,u,m){if(!this._events)return!1;var v=this._events[a]||[];if(!u)return!!v.length;m===this&&(m=void 0);for(var T=0,R=v.length;T<R;T++)if(v[T].fn===u&&v[T].ctx===m)return T;return!1},once:function(a,u,m){if(typeof a=="object")for(var v in a)this._on(v,a[v],u,!0);else{a=G(a);for(var T=0,R=a.length;T<R;T++)this._on(a[T],u,m,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[y(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[y(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,l({layer:a.target,propagatedFrom:a.target},a),!0)}};me.addEventListener=me.on,me.removeEventListener=me.clearAllEventListeners=me.off,me.addOneTimeEventListener=me.once,me.fireEvent=me.fire,me.hasEventListeners=me.listens;var Ee=Oe.extend(me);function fe(a,u,m){this.x=m?Math.round(a):a,this.y=m?Math.round(u):u}var Ye=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};fe.prototype={clone:function(){return new fe(this.x,this.y)},add:function(a){return this.clone()._add(B(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(B(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new fe(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new fe(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ye(this.x),this.y=Ye(this.y),this},distanceTo:function(a){a=B(a);var u=a.x-this.x,m=a.y-this.y;return Math.sqrt(u*u+m*m)},equals:function(a){return a=B(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=B(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function B(a,u,m){return a instanceof fe?a:Z(a)?new fe(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new fe(a.x,a.y):new fe(a,u,m)}function le(a,u){if(a)for(var m=u?[a,u]:a,v=0,T=m.length;v<T;v++)this.extend(m[v])}le.prototype={extend:function(a){var u,m;if(!a)return this;if(a instanceof fe||typeof a[0]=="number"||"x"in a)u=m=B(a);else if(a=we(a),u=a.min,m=a.max,!u||!m)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=m.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(a){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,m;return typeof a[0]=="number"||a instanceof fe?a=B(a):a=we(a),a instanceof le?(u=a.min,m=a.max):u=m=a,u.x>=this.min.x&&m.x<=this.max.x&&u.y>=this.min.y&&m.y<=this.max.y},intersects:function(a){a=we(a);var u=this.min,m=this.max,v=a.min,T=a.max,R=T.x>=u.x&&v.x<=m.x,q=T.y>=u.y&&v.y<=m.y;return R&&q},overlaps:function(a){a=we(a);var u=this.min,m=this.max,v=a.min,T=a.max,R=T.x>u.x&&v.x<m.x,q=T.y>u.y&&v.y<m.y;return R&&q},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,m=this.max,v=Math.abs(u.x-m.x)*a,T=Math.abs(u.y-m.y)*a;return we(B(u.x-v,u.y-T),B(m.x+v,m.y+T))},equals:function(a){return a?(a=we(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function we(a,u){return!a||a instanceof le?a:new le(a,u)}function ve(a,u){if(a)for(var m=u?[a,u]:a,v=0,T=m.length;v<T;v++)this.extend(m[v])}ve.prototype={extend:function(a){var u=this._southWest,m=this._northEast,v,T;if(a instanceof Ae)v=a,T=a;else if(a instanceof ve){if(v=a._southWest,T=a._northEast,!v||!T)return this}else return a?this.extend(Te(a)||ye(a)):this;return!u&&!m?(this._southWest=new Ae(v.lat,v.lng),this._northEast=new Ae(T.lat,T.lng)):(u.lat=Math.min(v.lat,u.lat),u.lng=Math.min(v.lng,u.lng),m.lat=Math.max(T.lat,m.lat),m.lng=Math.max(T.lng,m.lng)),this},pad:function(a){var u=this._southWest,m=this._northEast,v=Math.abs(u.lat-m.lat)*a,T=Math.abs(u.lng-m.lng)*a;return new ve(new Ae(u.lat-v,u.lng-T),new Ae(m.lat+v,m.lng+T))},getCenter:function(){return new Ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Ae||"lat"in a?a=Te(a):a=ye(a);var u=this._southWest,m=this._northEast,v,T;return a instanceof ve?(v=a.getSouthWest(),T=a.getNorthEast()):v=T=a,v.lat>=u.lat&&T.lat<=m.lat&&v.lng>=u.lng&&T.lng<=m.lng},intersects:function(a){a=ye(a);var u=this._southWest,m=this._northEast,v=a.getSouthWest(),T=a.getNorthEast(),R=T.lat>=u.lat&&v.lat<=m.lat,q=T.lng>=u.lng&&v.lng<=m.lng;return R&&q},overlaps:function(a){a=ye(a);var u=this._southWest,m=this._northEast,v=a.getSouthWest(),T=a.getNorthEast(),R=T.lat>u.lat&&v.lat<m.lat,q=T.lng>u.lng&&v.lng<m.lng;return R&&q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=ye(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(a,u){return a instanceof ve?a:new ve(a,u)}function Ae(a,u,m){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,m!==void 0&&(this.alt=+m)}Ae.prototype={equals:function(a,u){if(!a)return!1;a=Te(a);var m=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return m<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+k(this.lat,a)+", "+k(this.lng,a)+")"},distanceTo:function(a){return Ke.distance(this,Te(a))},wrap:function(){return Ke.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,m=u/Math.cos(Math.PI/180*this.lat);return ye([this.lat-u,this.lng-m],[this.lat+u,this.lng+m])},clone:function(){return new Ae(this.lat,this.lng,this.alt)}};function Te(a,u,m){return a instanceof Ae?a:Z(a)&&typeof a[0]!="object"?a.length===3?new Ae(a[0],a[1],a[2]):a.length===2?new Ae(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Ae(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new Ae(a,u,m)}var gt={latLngToPoint:function(a,u){var m=this.projection.project(a),v=this.scale(u);return this.transformation._transform(m,v)},pointToLatLng:function(a,u){var m=this.scale(u),v=this.transformation.untransform(a,m);return this.projection.unproject(v)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,m=this.scale(a),v=this.transformation.transform(u.min,m),T=this.transformation.transform(u.max,m);return new le(v,T)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?A(a.lng,this.wrapLng,!0):a.lng,m=this.wrapLat?A(a.lat,this.wrapLat,!0):a.lat,v=a.alt;return new Ae(m,u,v)},wrapLatLngBounds:function(a){var u=a.getCenter(),m=this.wrapLatLng(u),v=u.lat-m.lat,T=u.lng-m.lng;if(v===0&&T===0)return a;var R=a.getSouthWest(),q=a.getNorthEast(),Y=new Ae(R.lat-v,R.lng-T),ie=new Ae(q.lat-v,q.lng-T);return new ve(Y,ie)}},Ke=l({},gt,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var m=Math.PI/180,v=a.lat*m,T=u.lat*m,R=Math.sin((u.lat-a.lat)*m/2),q=Math.sin((u.lng-a.lng)*m/2),Y=R*R+Math.cos(v)*Math.cos(T)*q*q,ie=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return this.R*ie}}),Nt=6378137,ct={R:Nt,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,m=this.MAX_LATITUDE,v=Math.max(Math.min(m,a.lat),-m),T=Math.sin(v*u);return new fe(this.R*a.lng*u,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(a){var u=180/Math.PI;return new Ae((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:function(){var a=Nt*Math.PI;return new le([-a,-a],[a,a])}()};function un(a,u,m,v){if(Z(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=m,this._d=v}un.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new fe((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function Yn(a,u,m,v){return new un(a,u,m,v)}var Mn=l({},Ke,{code:"EPSG:3857",projection:ct,transformation:function(){var a=.5/(Math.PI*ct.R);return Yn(a,.5,-a,.5)}()}),kr=l({},Mn,{code:"EPSG:900913"});function ur(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function qi(a,u){var m="",v,T,R,q,Y,ie;for(v=0,R=a.length;v<R;v++){for(Y=a[v],T=0,q=Y.length;T<q;T++)ie=Y[T],m+=(T?"L":"M")+ie.x+" "+ie.y;m+=u?Ie.svg?"z":"x":""}return m||"M0 0"}var fs=document.documentElement.style,cr="ActiveXObject"in window,sa=cr&&!document.addEventListener,Or="msLaunchUri"in navigator&&!("documentMode"in document),Dr=Xn("webkit"),yl=Xn("android"),aa=Xn("android 2")||Xn("android 3"),Vn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vl=yl&&Xn("Google")&&Vn<537&&!("AudioNode"in window),Lt=!!window.opera,Qt=!Or&&Xn("chrome"),Fi=Xn("gecko")&&!Dr&&!Lt&&!cr,bl=!Qt&&Xn("safari"),oa=Xn("phantom"),El="OTransition"in fs,ms=navigator.platform.indexOf("Win")===0,hr=cr&&"transition"in fs,nn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!aa,la="MozPerspective"in fs,Gi=!window.L_DISABLE_3D&&(hr||nn||la)&&!El&&!oa,Wt=typeof orientation<"u"||Xn("mobile"),Eo=Wt&&Dr,wl=Wt&&nn,wo=!window.PointerEvent&&window.MSPointerEvent,xi=!!(window.PointerEvent||wo),dr="ontouchstart"in window||!!window.TouchEvent,Si=!window.L_NO_TOUCH&&(dr||xi),hi=Wt&&Lt,Lr=Wt&&Fi,ua=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,To=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",C,u),window.removeEventListener("testPassiveEventSupport",C,u)}catch{}return a}(),Mr=function(){return!!document.createElement("canvas").getContext}(),Vr=!!(document.createElementNS&&ur("svg").createSVGRect),Mt=!!Vr&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Tl=!Vr&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),jr=navigator.platform.indexOf("Mac")===0,zr=navigator.platform.indexOf("Linux")===0;function Xn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ie={ie:cr,ielt9:sa,edge:Or,webkit:Dr,android:yl,android23:aa,androidStock:vl,opera:Lt,chrome:Qt,gecko:Fi,safari:bl,phantom:oa,opera12:El,win:ms,ie3d:hr,webkit3d:nn,gecko3d:la,any3d:Gi,mobile:Wt,mobileWebkit:Eo,mobileWebkit3d:wl,msPointer:wo,pointer:xi,touch:Si,touchNative:dr,mobileOpera:hi,mobileGecko:Lr,retina:ua,passiveEvents:To,canvas:Mr,svg:Vr,vml:Tl,inlineSvg:Mt,mac:jr,linux:zr},fr=Ie.msPointer?"MSPointerDown":"pointerdown",Ai=Ie.msPointer?"MSPointerMove":"pointermove",Yt=Ie.msPointer?"MSPointerUp":"pointerup",Ut=Ie.msPointer?"MSPointerCancel":"pointercancel",Ri={touchstart:fr,touchmove:Ai,touchend:Yt,touchcancel:Ut},Ur={touchstart:Pt,touchmove:Pi,touchend:Pi,touchcancel:Pi},Ci={},Ii=!1;function xo(a,u,m){return u==="touchstart"&&Hr(),Ur[u]?(m=Ur[u].bind(this,m),a.addEventListener(Ri[u],m,!1),m):(console.warn("wrong event specified:",u),C)}function Br(a,u,m){if(!Ri[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(Ri[u],m,!1)}function ps(a){Ci[a.pointerId]=a}function Ni(a){Ci[a.pointerId]&&(Ci[a.pointerId]=a)}function Zi(a){delete Ci[a.pointerId]}function Hr(){Ii||(document.addEventListener(fr,ps,!0),document.addEventListener(Ai,Ni,!0),document.addEventListener(Yt,Zi,!0),document.addEventListener(Ut,Zi,!0),Ii=!0)}function Pi(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var m in Ci)u.touches.push(Ci[m]);u.changedTouches=[u],a(u)}}function Pt(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&vt(u),Pi(a,u)}function So(a){var u={},m,v;for(v in a)m=a[v],u[v]=m&&m.bind?m.bind(a):m;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var ca=200;function Jn(a,u){a.addEventListener("dblclick",u);var m=0,v;function T(R){if(R.detail!==1){v=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var q=pa(R);if(!(q.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!q.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var Y=Date.now();Y-m<=ca?(v++,v===2&&u(So(R))):v=1,m=Y}}}return a.addEventListener("click",T),{dblclick:u,simDblclick:T}}function jn(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var An=Ki(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gs=Ki(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ha=gs==="webkitTransition"||gs==="OTransition"?gs+"End":"transitionend";function da(a){return typeof a=="string"?document.getElementById(a):a}function qr(a,u){var m=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!m||m==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(a,null);m=v?v[u]:null}return m==="auto"?null:m}function $e(a,u,m){var v=document.createElement(a);return v.className=u||"",m&&m.appendChild(v),v}function dt(a){var u=a.parentNode;u&&u.removeChild(a)}function Rn(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Bt(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function mr(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function Ao(a,u){if(a.classList!==void 0)return a.classList.contains(u);var m=di(a);return m.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(m)}function Be(a,u){if(a.classList!==void 0)for(var m=G(u),v=0,T=m.length;v<T;v++)a.classList.add(m[v]);else if(!Ao(a,u)){var R=di(a);Fr(a,(R?R+" ":"")+u)}}function wt(a,u){a.classList!==void 0?a.classList.remove(u):Fr(a,D((" "+di(a)+" ").replace(" "+u+" "," ")))}function Fr(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function di(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function st(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&Gr(a,u)}function Gr(a,u){var m=!1,v="DXImageTransform.Microsoft.Alpha";try{m=a.filters.item(v)}catch{if(u===1)return}u=Math.round(u*100),m?(m.Enabled=u!==100,m.Opacity=u):a.style.filter+=" progid:"+v+"(opacity="+u+")"}function Ki(a){for(var u=document.documentElement.style,m=0;m<a.length;m++)if(a[m]in u)return a[m];return!1}function fi(a,u,m){var v=u||new fe(0,0);a.style[An]=(Ie.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(m?" scale("+m+")":"")}function De(a,u){a._leaflet_pos=u,Ie.any3d?fi(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function ei(a){return a._leaflet_pos||new fe(0,0)}var mi,_n,Ro;if("onselectstart"in document)mi=function(){Ve(window,"selectstart",vt)},_n=function(){pt(window,"selectstart",vt)};else{var pr=Ki(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);mi=function(){if(pr){var a=document.documentElement.style;Ro=a[pr],a[pr]="none"}},_n=function(){pr&&(document.documentElement.style[pr]=Ro,Ro=void 0)}}function fa(){Ve(window,"dragstart",vt)}function _s(){pt(window,"dragstart",vt)}var ma,Co;function pi(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Cn(),ma=a,Co=a.style.outlineStyle,a.style.outlineStyle="none",Ve(window,"keydown",Cn))}function Cn(){ma&&(ma.style.outlineStyle=Co,ma=void 0,Co=void 0,pt(window,"keydown",Cn))}function ys(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function ki(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var gr={__proto__:null,TRANSFORM:An,TRANSITION:gs,TRANSITION_END:ha,get:da,getStyle:qr,create:$e,remove:dt,empty:Rn,toFront:Bt,toBack:mr,hasClass:Ao,addClass:Be,removeClass:wt,setClass:Fr,getClass:di,setOpacity:st,testProp:Ki,setTransform:fi,setPosition:De,getPosition:ei,get disableTextSelection(){return mi},get enableTextSelection(){return _n},disableImageDrag:fa,enableImageDrag:_s,preventOutline:pi,restoreOutline:Cn,getSizedParentNode:ys,getScale:ki};function Ve(a,u,m,v){if(u&&typeof u=="object")for(var T in u)_r(a,T,u[T],m);else{u=G(u);for(var R=0,q=u.length;R<q;R++)_r(a,u[R],m,v)}return this}var zn="_leaflet_events";function pt(a,u,m,v){if(arguments.length===1)Zr(a),delete a[zn];else if(u&&typeof u=="object")for(var T in u)gi(a,T,u[T],m);else if(u=G(u),arguments.length===2)Zr(a,function(Y){return ue(u,Y)!==-1});else for(var R=0,q=u.length;R<q;R++)gi(a,u[R],m,v);return this}function Zr(a,u){for(var m in a[zn]){var v=m.split(/\d/)[0];(!u||u(v))&&gi(a,v,null,null,m)}}var Un={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _r(a,u,m,v){var T=u+y(m)+(v?"_"+y(v):"");if(a[zn]&&a[zn][T])return this;var R=function(Y){return m.call(v||a,Y||window.event)},q=R;!Ie.touchNative&&Ie.pointer&&u.indexOf("touch")===0?R=xo(a,u,R):Ie.touch&&u==="dblclick"?R=Jn(a,R):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Un[u]||u,R,Ie.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(R=function(Y){Y=Y||window.event,vr(a,Y)&&q(Y)},a.addEventListener(Un[u],R,!1)):a.addEventListener(u,q,!1):a.attachEvent("on"+u,R),a[zn]=a[zn]||{},a[zn][T]=R}function gi(a,u,m,v,T){T=T||u+y(m)+(v?"_"+y(v):"");var R=a[zn]&&a[zn][T];if(!R)return this;!Ie.touchNative&&Ie.pointer&&u.indexOf("touch")===0?Br(a,u,R):Ie.touch&&u==="dblclick"?jn(a,R):"removeEventListener"in a?a.removeEventListener(Un[u]||u,R,!1):a.detachEvent("on"+u,R),a[zn][T]=null}function Bn(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Oi(a){return _r(a,"wheel",Bn),this}function yr(a){return Ve(a,"mousedown touchstart dblclick contextmenu",Bn),a._leaflet_disable_click=!0,this}function vt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function yn(a){return vt(a),Bn(a),this}function pa(a){if(a.composedPath)return a.composedPath();for(var u=[],m=a.target;m;)u.push(m),m=m.parentNode;return u}function Xt(a,u){if(!u)return new fe(a.clientX,a.clientY);var m=ki(u),v=m.boundingClientRect;return new fe((a.clientX-v.left)/m.x-u.clientLeft,(a.clientY-v.top)/m.y-u.clientTop)}var ft=Ie.linux&&Ie.chrome?window.devicePixelRatio:Ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function vs(a){return Ie.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/ft:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function vr(a,u){var m=u.relatedTarget;if(!m)return!0;try{for(;m&&m!==a;)m=m.parentNode}catch{return!1}return m!==a}var xl={__proto__:null,on:Ve,off:pt,stopPropagation:Bn,disableScrollPropagation:Oi,disableClickPropagation:yr,preventDefault:vt,stop:yn,getPropagationPath:pa,getMousePosition:Xt,getWheelDelta:vs,isExternalTarget:vr,addListener:Ve,removeListener:pt},bs=Ee.extend({run:function(a,u,m,v){this.stop(),this._el=a,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=ei(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,m=this._duration*1e3;u<m?this._runFrame(this._easeOut(u/m),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var m=this._startPos.add(this._offset.multiplyBy(a));u&&m._round(),De(this._el,m),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Qe=Ee.extend({options:{crs:Mn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=W(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Te(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gs&&Ie.any3d&&!Ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ve(this._proxy,ha,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,m){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(Te(a),u,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=l({animate:m.animate},m.zoom),m.pan=l({animate:m.animate,duration:m.duration},m.pan));var v=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,m.zoom):this._tryAnimatedPan(a,m.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,m.pan&&m.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,m){var v=this.getZoomScale(u),T=this.getSize().divideBy(2),R=a instanceof fe?a:this.latLngToContainerPoint(a),q=R.subtract(T).multiplyBy(1-1/v),Y=this.containerPointToLatLng(T.add(q));return this.setView(Y,u,{zoom:m})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():ye(a);var m=B(u.paddingTopLeft||u.padding||[0,0]),v=B(u.paddingBottomRight||u.padding||[0,0]),T=this.getBoundsZoom(a,!1,m.add(v));if(T=typeof u.maxZoom=="number"?Math.min(u.maxZoom,T):T,T===1/0)return{center:a.getCenter(),zoom:T};var R=v.subtract(m).divideBy(2),q=this.project(a.getSouthWest(),T),Y=this.project(a.getNorthEast(),T),ie=this.unproject(q.add(Y).divideBy(2).add(R),T);return{center:ie,zoom:T}},fitBounds:function(a,u){if(a=ye(a),!a.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(a,u);return this.setView(m.center,m.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=B(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Be(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,m,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,m){if(m=m||{},m.animate===!1||!Ie.any3d)return this.setView(a,u,m);this._stop();var v=this.project(this.getCenter()),T=this.project(a),R=this.getSize(),q=this._zoom;a=Te(a),u=u===void 0?q:u;var Y=Math.max(R.x,R.y),ie=Y*this.getZoomScale(q,u),ce=T.distanceTo(v)||1,xe=1.42,je=xe*xe;function Fe(At){var ks=At?-1:1,qo=At?ie:Y,Ll=ie*ie-Y*Y+ks*je*je*ce*ce,fh=2*qo*je*ce,Ml=Ll/fh,Wr=Math.sqrt(Ml*Ml+1)-Ml,mh=Wr<1e-9?-18:Math.log(Wr);return mh}function Jt(At){return(Math.exp(At)-Math.exp(-At))/2}function kt(At){return(Math.exp(At)+Math.exp(-At))/2}function En(At){return Jt(At)/kt(At)}var In=Fe(0);function Qr(At){return Y*(kt(In)/kt(In+xe*At))}function ch(At){return Y*(kt(In)*En(In+xe*At)-Jt(In))/je}function Dl(At){return 1-Math.pow(1-At,1.5)}var hh=Date.now(),Pa=(Fe(1)-In)/xe,dh=m.duration?1e3*m.duration:1e3*Pa*.8;function Ps(){var At=(Date.now()-hh)/dh,ks=Dl(At)*Pa;At<=1?(this._flyToFrame=M(Ps,this),this._move(this.unproject(v.add(T.subtract(v).multiplyBy(ch(ks)/ce)),q),this.getScaleZoom(Y/Qr(ks),q),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Ps.call(this),this},flyToBounds:function(a,u){var m=this._getBoundsCenterZoom(a,u);return this.flyTo(m.center,m.zoom,u)},setMaxBounds:function(a){return a=ye(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var m=this.getCenter(),v=this._limitCenter(m,this._zoom,ye(a));return m.equals(v)||this.panTo(v,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var m=B(u.paddingTopLeft||u.padding||[0,0]),v=B(u.paddingBottomRight||u.padding||[0,0]),T=this.project(this.getCenter()),R=this.project(a),q=this.getPixelBounds(),Y=we([q.min.add(m),q.max.subtract(v)]),ie=Y.getSize();if(!Y.contains(R)){this._enforcingBounds=!0;var ce=R.subtract(Y.getCenter()),xe=Y.extend(R).getSize().subtract(ie);T.x+=ce.x<0?-xe.x:xe.x,T.y+=ce.y<0?-xe.y:xe.y,this.panTo(this.unproject(T),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=l({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),v=u.divideBy(2).round(),T=m.divideBy(2).round(),R=v.subtract(T);return!R.x&&!R.y?this:(a.animate&&a.pan?this.panBy(R):(a.pan&&this._rawPanBy(R),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=l({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=f(this._handleGeolocationResponse,this),m=f(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,m,a):navigator.geolocation.getCurrentPosition(u,m,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,m=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,m=a.coords.longitude,v=new Ae(u,m),T=v.toBounds(a.coords.accuracy*2),R=this._locateOptions;if(R.setView){var q=this.getBoundsZoom(T);this.setView(v,R.maxZoom?Math.min(q,R.maxZoom):q)}var Y={latlng:v,bounds:T,timestamp:a.timestamp};for(var ie in a.coords)typeof a.coords[ie]=="number"&&(Y[ie]=a.coords[ie]);this.fire("locationfound",Y)}},addHandler:function(a,u){if(!u)return this;var m=this[a]=new u(this);return this._handlers.push(m),this.options[a]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)dt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var m="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),v=$e("div",m,u||this._mapPane);return a&&(this._panes[a]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),m=this.unproject(a.getTopRight());return new ve(u,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,m){a=ye(a),m=B(m||[0,0]);var v=this.getZoom()||0,T=this.getMinZoom(),R=this.getMaxZoom(),q=a.getNorthWest(),Y=a.getSouthEast(),ie=this.getSize().subtract(m),ce=we(this.project(Y,v),this.project(q,v)).getSize(),xe=Ie.any3d?this.options.zoomSnap:1,je=ie.x/ce.x,Fe=ie.y/ce.y,Jt=u?Math.max(je,Fe):Math.min(je,Fe);return v=this.getScaleZoom(Jt,v),xe&&(v=Math.round(v/(xe/100))*(xe/100),v=u?Math.ceil(v/xe)*xe:Math.floor(v/xe)*xe),Math.max(T,Math.min(R,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new fe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var m=this._getTopLeftPoint(a,u);return new le(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var m=this.options.crs;return u=u===void 0?this._zoom:u,m.scale(a)/m.scale(u)},getScaleZoom:function(a,u){var m=this.options.crs;u=u===void 0?this._zoom:u;var v=m.zoom(a*m.scale(u));return isNaN(v)?1/0:v},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Te(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(B(a),u)},layerPointToLatLng:function(a){var u=B(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(Te(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Te(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ye(a))},distance:function(a,u){return this.options.crs.distance(Te(a),Te(u))},containerPointToLayerPoint:function(a){return B(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return B(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(B(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Te(a)))},mouseEventToContainerPoint:function(a){return Xt(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=da(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ve(u,"scroll",this._onScroll,this),this._containerId=y(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ie.any3d,Be(a,"leaflet-container"+(Ie.touch?" leaflet-touch":"")+(Ie.retina?" leaflet-retina":"")+(Ie.ielt9?" leaflet-oldie":"")+(Ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=qr(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),De(this._mapPane,new fe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Be(a.markerPane,"leaflet-zoom-hide"),Be(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,m){De(this._mapPane,new fe(0,0));var v=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var T=this._zoom!==u;this._moveStart(T,m)._move(a,u)._moveEnd(T),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,m,v){u===void 0&&(u=this._zoom);var T=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),v?m&&m.pinch&&this.fire("zoom",m):((T||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){De(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[y(this._container)]=this;var u=a?pt:Ve;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ie.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var m=[],v,T=u==="mouseout"||u==="mouseover",R=a.target||a.srcElement,q=!1;R;){if(v=this._targets[y(R)],v&&(u==="click"||u==="preclick")&&this._draggableMoved(v)){q=!0;break}if(v&&v.listens(u,!0)&&(T&&!vr(R,a)||(m.push(v),T))||R===this._container)break;R=R.parentNode}return!m.length&&!q&&!T&&this.listens(u,!0)&&(m=[this]),m},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var m=a.type;m==="mousedown"&&pi(u),this._fireDOMEvent(a,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,m){if(a.type==="click"){var v=l({},a);v.type="preclick",this._fireDOMEvent(v,v.type,m)}var T=this._findEventTargets(a,u);if(m){for(var R=[],q=0;q<m.length;q++)m[q].listens(u,!0)&&R.push(m[q]);T=R.concat(T)}if(T.length){u==="contextmenu"&&vt(a);var Y=T[0],ie={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ce=Y.getLatLng&&(!Y._radius||Y._radius<=10);ie.containerPoint=ce?this.latLngToContainerPoint(Y.getLatLng()):this.mouseEventToContainerPoint(a),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=ce?Y.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(q=0;q<T.length;q++)if(T[q].fire(u,ie,!0),ie.originalEvent._stopped||T[q].options.bubblingMouseEvents===!1&&ue(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return ei(this._mapPane)||new fe(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var m=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var m=this.getSize()._divideBy(2);return this.project(a,u)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,m){var v=this._getNewPixelOrigin(m,u);return this.project(a,u)._subtract(v)},_latLngBoundsToNewLayerBounds:function(a,u,m){var v=this._getNewPixelOrigin(m,u);return we([this.project(a.getSouthWest(),u)._subtract(v),this.project(a.getNorthWest(),u)._subtract(v),this.project(a.getSouthEast(),u)._subtract(v),this.project(a.getNorthEast(),u)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,m){if(!m)return a;var v=this.project(a,u),T=this.getSize().divideBy(2),R=new le(v.subtract(T),v.add(T)),q=this._getBoundsOffset(R,m,u);return Math.abs(q.x)<=1&&Math.abs(q.y)<=1?a:this.unproject(v.add(q),u)},_limitOffset:function(a,u){if(!u)return a;var m=this.getPixelBounds(),v=new le(m.min.add(a),m.max.add(a));return a.add(this._getBoundsOffset(v,u))},_getBoundsOffset:function(a,u,m){var v=we(this.project(u.getNorthEast(),m),this.project(u.getSouthWest(),m)),T=v.min.subtract(a.min),R=v.max.subtract(a.max),q=this._rebound(T.x,-R.x),Y=this._rebound(T.y,-R.y);return new fe(q,Y)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),m=this.getMaxZoom(),v=Ie.any3d?this.options.zoomSnap:1;return v&&(a=Math.round(a/v)*v),Math.max(u,Math.min(m,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var m=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,u),!0)},_createAnimProxy:function(){var a=this._proxy=$e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var m=An,v=this._proxy.style[m];fi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),v===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();fi(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(u),T=this._getCenterOffset(a)._divideBy(1-1/v);return m.animate!==!0&&!this.getSize().contains(T)?!1:(M(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,m,v){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,Be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $i(a,u){return new Qe(a,u)}var cn=Oe.extend({options:{position:"topright"},initialize:function(a){W(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),m=this.getPosition(),v=a._controlCorners[m];return Be(u,"leaflet-control"),m.indexOf("bottom")!==-1?v.insertBefore(u,v.firstChild):v.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),vn=function(a){return new cn(a)};Qe.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",m=this._controlContainer=$e("div",u+"control-container",this._container);function v(T,R){var q=u+T+" "+u+R;a[T+R]=$e("div",q,m)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)dt(this._controlCorners[a]);dt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Io=cn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,m,v){return m<v?-1:v<m?1:0}},initialize:function(a,u,m){W(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in a)this._addLayer(a[v],v);for(v in u)this._addLayer(u[v],v,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return cn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(y(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=$e("div",a),m=this.options.collapsed;u.setAttribute("aria-haspopup",!0),yr(u),Oi(u);var v=this._section=$e("section",a+"-list");m&&(this._map.on("click",this.collapse,this),Ve(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=$e("a",a+"-toggle",u);T.href="#",T.title="Layers",T.setAttribute("role","button"),Ve(T,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){vt(R),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=$e("div",a+"-base",v),this._separator=$e("div",a+"-separator",v),this._overlaysList=$e("div",a+"-overlays",v),u.appendChild(v)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&y(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,m){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:m}),this.options.sortLayers&&this._layers.sort(f(function(v,T){return this.options.sortFunction(v.layer,T.layer,v.name,T.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rn(this._baseLayersList),Rn(this._overlaysList),this._layerControlInputs=[];var a,u,m,v,T=0;for(m=0;m<this._layers.length;m++)v=this._layers[m],this._addItem(v),u=u||v.overlay,a=a||!v.overlay,T+=v.overlay?0:1;return this.options.hideSingleBase&&(a=a&&T>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(y(a.target)),m=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;m&&this._map.fire(m,u)},_createRadioElement:function(a,u){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=m,v.firstChild},_addItem:function(a){var u=document.createElement("label"),m=this._map.hasLayer(a.layer),v;a.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=m):v=this._createRadioElement("leaflet-base-layers_"+y(this),m),this._layerControlInputs.push(v),v.layerId=y(a.layer),Ve(v,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+a.name;var R=document.createElement("span");u.appendChild(R),R.appendChild(v),R.appendChild(T);var q=a.overlay?this._overlaysList:this._baseLayersList;return q.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,m,v=[],T=[];this._handlingClick=!0;for(var R=a.length-1;R>=0;R--)u=a[R],m=this._getLayer(u.layerId).layer,u.checked?v.push(m):u.checked||T.push(m);for(R=0;R<T.length;R++)this._map.hasLayer(T[R])&&this._map.removeLayer(T[R]);for(R=0;R<v.length;R++)this._map.hasLayer(v[R])||this._map.addLayer(v[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,m,v=this._map.getZoom(),T=a.length-1;T>=0;T--)u=a[T],m=this._getLayer(u.layerId).layer,u.disabled=m.options.minZoom!==void 0&&v<m.options.minZoom||m.options.maxZoom!==void 0&&v>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ve(a,"click",vt),this.expand();var u=this;setTimeout(function(){pt(a,"click",vt),u._preventClick=!1})}}),Nu=function(a,u,m){return new Io(a,u,m)},br=cn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",m=$e("div",u+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,u+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,u+"-out",m,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,m,v,T){var R=$e("a",m,v);return R.innerHTML=a,R.href="#",R.title=u,R.setAttribute("role","button"),R.setAttribute("aria-label",u),yr(R),Ve(R,"click",yn),Ve(R,"click",T,this),Ve(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";wt(this._zoomInButton,u),wt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Be(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Be(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qe.mergeOptions({zoomControl:!0}),Qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new br,this.addControl(this.zoomControl))});var ga=function(a){return new br(a)},_a=cn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",m=$e("div",u),v=this.options;return this._addScales(v,u+"-line",m),a.on(v.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),m},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,m){a.metric&&(this._mScale=$e("div",u,m)),a.imperial&&(this._iScale=$e("div",u,m))},_update:function(){var a=this._map,u=a.getSize().y/2,m=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(m)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),m=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,m,u/a)},_updateImperial:function(a){var u=a*3.2808399,m,v,T;u>5280?(m=u/5280,v=this._getRoundNum(m),this._updateScale(this._iScale,v+" mi",v/m)):(T=this._getRoundNum(u),this._updateScale(this._iScale,T+" ft",T/u))},_updateScale:function(a,u,m){a.style.width=Math.round(this.options.maxWidth*m)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),m=a/u;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,u*m}}),ya=function(a){return new _a(a)},Sl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Kr=cn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ie.inlineSvg?Sl+" ":"")+"Leaflet</a>"},initialize:function(a){W(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=$e("div","leaflet-control-attribution"),yr(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var m=[];this.options.prefix&&m.push(this.options.prefix),a.length&&m.push(a.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Qe.mergeOptions({attributionControl:!0}),Qe.addInitHook(function(){this.options.attributionControl&&new Kr().addTo(this)});var Pu=function(a){return new Kr(a)};cn.Layers=Io,cn.Zoom=br,cn.Scale=_a,cn.Attribution=Kr,vn.layers=Nu,vn.zoom=ga,vn.scale=ya,vn.attribution=Pu;var Hn=Oe.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Hn.addTo=function(a,u){return a.addHandler(u,this),this};var Es={Events:me},No=Ie.touch?"touchstart mousedown":"mousedown",Di=Ee.extend({options:{clickTolerance:3},initialize:function(a,u,m,v){W(this,v),this._element=a,this._dragStartTarget=u||a,this._preventOutline=m},enable:function(){this._enabled||(Ve(this._dragStartTarget,No,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Di._dragging===this&&this.finishDrag(!0),pt(this._dragStartTarget,No,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Ao(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Di._dragging===this&&this.finishDrag();return}if(!(Di._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Di._dragging=this,this._preventOutline&&pi(this._element),fa(),mi(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,m=ys(this._element);this._startPoint=new fe(u.clientX,u.clientY),this._startPos=ei(this._element),this._parentScale=ki(m);var v=a.type==="mousedown";Ve(document,v?"mousemove":"touchmove",this._onMove,this),Ve(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,m=new fe(u.clientX,u.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,vt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Be(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),De(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){wt(document.body,"leaflet-dragging"),this._lastTarget&&(wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),pt(document,"mousemove touchmove",this._onMove,this),pt(document,"mouseup touchend touchcancel",this._onUp,this),_s(),_n();var u=this._moved&&this._moving;this._moving=!1,Di._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function va(a,u,m){var v,T=[1,4,2,8],R,q,Y,ie,ce,xe,je,Fe;for(R=0,xe=a.length;R<xe;R++)a[R]._code=Qi(a[R],u);for(Y=0;Y<4;Y++){for(je=T[Y],v=[],R=0,xe=a.length,q=xe-1;R<xe;q=R++)ie=a[R],ce=a[q],ie._code&je?ce._code&je||(Fe=rn(ce,ie,je,u,m),Fe._code=Qi(Fe,u),v.push(Fe)):(ce._code&je&&(Fe=rn(ce,ie,je,u,m),Fe._code=Qi(Fe,u),v.push(Fe)),v.push(ie));a=v}return a}function $r(a,u){var m,v,T,R,q,Y,ie,ce,xe;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var je=Te([0,0]),Fe=ye(a),Jt=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());Jt<1700&&(je=ba(a));var kt=a.length,En=[];for(m=0;m<kt;m++){var In=Te(a[m]);En.push(u.project(Te([In.lat-je.lat,In.lng-je.lng])))}for(Y=ie=ce=0,m=0,v=kt-1;m<kt;v=m++)T=En[m],R=En[v],q=T.y*R.x-R.y*T.x,ie+=(T.x+R.x)*q,ce+=(T.y+R.y)*q,Y+=q*3;Y===0?xe=En[0]:xe=[ie/Y,ce/Y];var Qr=u.unproject(B(xe));return Te([Qr.lat+je.lat,Qr.lng+je.lng])}function ba(a){for(var u=0,m=0,v=0,T=0;T<a.length;T++){var R=Te(a[T]);u+=R.lat,m+=R.lng,v++}return Te([u/v,m/v])}var Ea={__proto__:null,clipPolygon:va,polygonCenter:$r,centroid:ba};function Po(a,u){if(!u||!a.length)return a.slice();var m=u*u;return a=Rl(a,m),a=Al(a,m),a}function wa(a,u,m){return Math.sqrt(qn(a,u,m,!0))}function Er(a,u,m){return qn(a,u,m)}function Al(a,u){var m=a.length,v=typeof Uint8Array<"u"?Uint8Array:Array,T=new v(m);T[0]=T[m-1]=1,Ta(a,T,u,0,m-1);var R,q=[];for(R=0;R<m;R++)T[R]&&q.push(a[R]);return q}function Ta(a,u,m,v,T){var R=0,q,Y,ie;for(Y=v+1;Y<=T-1;Y++)ie=qn(a[Y],a[v],a[T],!0),ie>R&&(q=Y,R=ie);R>m&&(u[q]=1,Ta(a,u,m,v,q),Ta(a,u,m,q,T))}function Rl(a,u){for(var m=[a[0]],v=1,T=0,R=a.length;v<R;v++)Cl(a[v],a[T])>u&&(m.push(a[v]),T=v);return T<R-1&&m.push(a[R-1]),m}var ko;function ws(a,u,m,v,T){var R=v?ko:Qi(a,m),q=Qi(u,m),Y,ie,ce;for(ko=q;;){if(!(R|q))return[a,u];if(R&q)return!1;Y=R||q,ie=rn(a,u,Y,m,T),ce=Qi(ie,m),Y===R?(a=ie,R=ce):(u=ie,q=ce)}}function rn(a,u,m,v,T){var R=u.x-a.x,q=u.y-a.y,Y=v.min,ie=v.max,ce,xe;return m&8?(ce=a.x+R*(ie.y-a.y)/q,xe=ie.y):m&4?(ce=a.x+R*(Y.y-a.y)/q,xe=Y.y):m&2?(ce=ie.x,xe=a.y+q*(ie.x-a.x)/R):m&1&&(ce=Y.x,xe=a.y+q*(Y.x-a.x)/R),new fe(ce,xe,T)}function Qi(a,u){var m=0;return a.x<u.min.x?m|=1:a.x>u.max.x&&(m|=2),a.y<u.min.y?m|=4:a.y>u.max.y&&(m|=8),m}function Cl(a,u){var m=u.x-a.x,v=u.y-a.y;return m*m+v*v}function qn(a,u,m,v){var T=u.x,R=u.y,q=m.x-T,Y=m.y-R,ie=q*q+Y*Y,ce;return ie>0&&(ce=((a.x-T)*q+(a.y-R)*Y)/ie,ce>1?(T=m.x,R=m.y):ce>0&&(T+=q*ce,R+=Y*ce)),q=a.x-T,Y=a.y-R,v?q*q+Y*Y:new fe(T,R)}function d(a){return!Z(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function E(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(a)}function x(a,u){var m,v,T,R,q,Y,ie,ce;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var xe=Te([0,0]),je=ye(a),Fe=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());Fe<1700&&(xe=ba(a));var Jt=a.length,kt=[];for(m=0;m<Jt;m++){var En=Te(a[m]);kt.push(u.project(Te([En.lat-xe.lat,En.lng-xe.lng])))}for(m=0,v=0;m<Jt-1;m++)v+=kt[m].distanceTo(kt[m+1])/2;if(v===0)ce=kt[0];else for(m=0,R=0;m<Jt-1;m++)if(q=kt[m],Y=kt[m+1],T=q.distanceTo(Y),R+=T,R>v){ie=(R-v)/T,ce=[Y.x-ie*(Y.x-q.x),Y.y-ie*(Y.y-q.y)];break}var In=u.unproject(B(ce));return Te([In.lat+xe.lat,In.lng+xe.lng])}var O={__proto__:null,simplify:Po,pointToSegmentDistance:wa,closestPointOnSegment:Er,clipSegment:ws,_getEdgeIntersection:rn,_getBitCode:Qi,_sqClosestPointOnSegment:qn,isFlat:d,_flat:E,polylineCenter:x},J={project:function(a){return new fe(a.lng,a.lat)},unproject:function(a){return new Ae(a.y,a.x)},bounds:new le([-180,-90],[180,90])},re={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,m=this.R,v=a.lat*u,T=this.R_MINOR/m,R=Math.sqrt(1-T*T),q=R*Math.sin(v),Y=Math.tan(Math.PI/4-v/2)/Math.pow((1-q)/(1+q),R/2);return v=-m*Math.log(Math.max(Y,1e-10)),new fe(a.lng*u*m,v)},unproject:function(a){for(var u=180/Math.PI,m=this.R,v=this.R_MINOR/m,T=Math.sqrt(1-v*v),R=Math.exp(-a.y/m),q=Math.PI/2-2*Math.atan(R),Y=0,ie=.1,ce;Y<15&&Math.abs(ie)>1e-7;Y++)ce=T*Math.sin(q),ce=Math.pow((1-ce)/(1+ce),T/2),ie=Math.PI/2-2*Math.atan(R*ce)-q,q+=ie;return new Ae(q*u,a.x*u/m)}},be={__proto__:null,LonLat:J,Mercator:re,SphericalMercator:ct},tt=l({},Ke,{code:"EPSG:3395",projection:re,transformation:function(){var a=.5/(Math.PI*re.R);return Yn(a,.5,-a,.5)}()}),Ht=l({},Ke,{code:"EPSG:4326",projection:J,transformation:Yn(1/180,1,-1/180,.5)}),nt=l({},gt,{projection:J,transformation:Yn(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var m=u.lng-a.lng,v=u.lat-a.lat;return Math.sqrt(m*m+v*v)},infinite:!0});gt.Earth=Ke,gt.EPSG3395=tt,gt.EPSG3857=Mn,gt.EPSG900913=kr,gt.EPSG4326=Ht,gt.Simple=nt;var _t=Ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[y(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[y(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var m=this.getEvents();u.on(m,this),this.once("remove",function(){u.off(m,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Qe.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=y(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=y(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return y(a)in this._layers},eachLayer:function(a,u){for(var m in this._layers)a.call(u,this._layers[m]);return this},_addLayers:function(a){a=a?Z(a)?a:[a]:[];for(var u=0,m=a.length;u<m;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[y(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=y(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,m=this._getZoomSpan();for(var v in this._zoomBoundLayers){var T=this._zoomBoundLayers[v].options;a=T.minZoom===void 0?a:Math.min(a,T.minZoom),u=T.maxZoom===void 0?u:Math.max(u,T.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var St=_t.extend({initialize:function(a,u){W(this,u),this._layers={};var m,v;if(a)for(m=0,v=a.length;m<v;m++)this.addLayer(a[m])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),m,v;for(m in this._layers)v=this._layers[m],v[a]&&v[a].apply(v,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var m in this._layers)a.call(u,this._layers[m]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return y(a)}}),wr=function(a,u){return new St(a,u)},Tt=St.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),St.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),St.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ve;for(var u in this._layers){var m=this._layers[u];a.extend(m.getBounds?m.getBounds():m.getLatLng())}return a}}),Wi=function(a,u){return new Tt(a,u)},Yi=Oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){W(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var m=this._getIconUrl(a);if(!m){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(m,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(v,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(a,u){var m=this.options,v=m[u+"Size"];typeof v=="number"&&(v=[v,v]);var T=B(v),R=B(u==="shadow"&&m.shadowAnchor||m.iconAnchor||T&&T.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(m.className||""),R&&(a.style.marginLeft=-R.x+"px",a.style.marginTop=-R.y+"px"),T&&(a.style.width=T.x+"px",a.style.height=T.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return Ie.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Il(a){return new Yi(a)}var xa=Yi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof xa.imagePath!="string"&&(xa.imagePath=this._detectIconPath()),(this.options.imagePath||xa.imagePath)+Yi.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(m,v,T){var R=v.exec(m);return R&&R[T]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=$e("div","leaflet-default-icon-path",document.body),u=qr(a,"background-image")||qr(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),ku=Hn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Di(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Be(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,m=u._map,v=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,R=ei(u._icon),q=m.getPixelBounds(),Y=m.getPixelOrigin(),ie=we(q.min._subtract(Y).add(T),q.max._subtract(Y).subtract(T));if(!ie.contains(R)){var ce=B((Math.max(ie.max.x,R.x)-ie.max.x)/(q.max.x-ie.max.x)-(Math.min(ie.min.x,R.x)-ie.min.x)/(q.min.x-ie.min.x),(Math.max(ie.max.y,R.y)-ie.max.y)/(q.max.y-ie.max.y)-(Math.min(ie.min.y,R.y)-ie.min.y)/(q.min.y-ie.min.y)).multiplyBy(v);m.panBy(ce,{animate:!1}),this._draggable._newPos._add(ce),this._draggable._startPos._add(ce),De(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=M(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,m=u._shadow,v=ei(u._icon),T=u._map.layerPointToLatLng(v);m&&De(m,v),u._latlng=T,a.latlng=T,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Sa=_t.extend({options:{icon:new xa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){W(this,u),this._latlng=Te(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=Te(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=a.icon.createIcon(this._icon),v=!1;m!==this._icon&&(this._icon&&this._removeIcon(),v=!0,a.title&&(m.title=a.title),m.tagName==="IMG"&&(m.alt=a.alt||"")),Be(m,u),a.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(m,"focus",this._panOnFocus,this);var T=a.icon.createShadow(this._shadow),R=!1;T!==this._shadow&&(this._removeShadow(),R=!0),T&&(Be(T,u),T.alt=""),this._shadow=T,a.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&R&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(this._icon,"focus",this._panOnFocus,this),dt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&De(this._icon,a),this._shadow&&De(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ku)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ku(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&st(this._icon,a),this._shadow&&st(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,m=u.iconSize?B(u.iconSize):B(0,0),v=u.iconAnchor?B(u.iconAnchor):B(0,0);a.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:m.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ou(a,u){return new Sa(a,u)}var Tr=_t.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return W(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Oo=Tr.extend({options:{fill:!0,radius:10},initialize:function(a,u){W(this,u),this._latlng=Te(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=Te(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return Tr.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,m=this._clickTolerance(),v=[a+m,u+m];this._pxBounds=new le(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function rh(a,u){return new Oo(a,u)}var Du=Oo.extend({initialize:function(a,u,m){if(typeof u=="number"&&(u=l({},m,{radius:u})),W(this,u),this._latlng=Te(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Tr.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,m=this._map,v=m.options.crs;if(v.distance===Ke.distance){var T=Math.PI/180,R=this._mRadius/Ke.R/T,q=m.project([u+R,a]),Y=m.project([u-R,a]),ie=q.add(Y).divideBy(2),ce=m.unproject(ie).lat,xe=Math.acos((Math.cos(R*T)-Math.sin(u*T)*Math.sin(ce*T))/(Math.cos(u*T)*Math.cos(ce*T)))/T;(isNaN(xe)||xe===0)&&(xe=R/Math.cos(Math.PI/180*u)),this._point=ie.subtract(m.getPixelOrigin()),this._radius=isNaN(xe)?0:ie.x-m.project([ce,a-xe]).x,this._radiusY=ie.y-q.y}else{var je=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(je).x}this._updateBounds()}});function Rf(a,u,m){return new Du(a,u,m)}var xr=Tr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){W(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,m=null,v=qn,T,R,q=0,Y=this._parts.length;q<Y;q++)for(var ie=this._parts[q],ce=1,xe=ie.length;ce<xe;ce++){T=ie[ce-1],R=ie[ce];var je=v(a,T,R,!0);je<u&&(u=je,m=v(a,T,R))}return m&&(m.distance=Math.sqrt(u)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=Te(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ve,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],m=d(a),v=0,T=a.length;v<T;v++)m?(u[v]=Te(a[v]),this._bounds.extend(u[v])):u[v]=this._convertLatLngs(a[v]);return u},_project:function(){var a=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new fe(a,a);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,m){var v=a[0]instanceof Ae,T=a.length,R,q;if(v){for(q=[],R=0;R<T;R++)q[R]=this._map.latLngToLayerPoint(a[R]),m.extend(q[R]);u.push(q)}else for(R=0;R<T;R++)this._projectLatlngs(a[R],u,m)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,m,v,T,R,q,Y,ie;for(m=0,T=0,R=this._rings.length;m<R;m++)for(ie=this._rings[m],v=0,q=ie.length;v<q-1;v++)Y=ws(ie[v],ie[v+1],a,v,!0),Y&&(u[T]=u[T]||[],u[T].push(Y[0]),(Y[1]!==ie[v+1]||v===q-2)&&(u[T].push(Y[1]),T++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,m=0,v=a.length;m<v;m++)a[m]=Po(a[m],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var m,v,T,R,q,Y,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(m=0,R=this._parts.length;m<R;m++)for(Y=this._parts[m],v=0,q=Y.length,T=q-1;v<q;T=v++)if(!(!u&&v===0)&&wa(a,Y[T],Y[v])<=ie)return!0;return!1}});function Cf(a,u){return new xr(a,u)}xr._flat=E;var Aa=xr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $r(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=xr.prototype._convertLatLngs.call(this,a),m=u.length;return m>=2&&u[0]instanceof Ae&&u[0].equals(u[m-1])&&u.pop(),u},_setLatLngs:function(a){xr.prototype._setLatLngs.call(this,a),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,m=new fe(u,u);if(a=new le(a.min.subtract(m),a.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,T=this._rings.length,R;v<T;v++)R=va(this._rings[v],a,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,m,v,T,R,q,Y,ie,ce;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(R=0,ie=this._parts.length;R<ie;R++)for(m=this._parts[R],q=0,ce=m.length,Y=ce-1;q<ce;Y=q++)v=m[q],T=m[Y],v.y>a.y!=T.y>a.y&&a.x<(T.x-v.x)*(a.y-v.y)/(T.y-v.y)+v.x&&(u=!u);return u||xr.prototype._containsPoint.call(this,a,!0)}});function ti(a,u){return new Aa(a,u)}var ni=Tt.extend({initialize:function(a,u){W(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=Z(a)?a:a.features,m,v,T;if(u){for(m=0,v=u.length;m<v;m++)T=u[m],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var R=this.options;if(R.filter&&!R.filter(a))return this;var q=Do(a,R);return q?(q.feature=Sr(a),q.defaultOptions=q.options,this.resetStyle(q),R.onEachFeature&&R.onEachFeature(a,q),this.addLayer(q)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=l({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function Do(a,u){var m=a.type==="Feature"?a.geometry:a,v=m?m.coordinates:null,T=[],R=u&&u.pointToLayer,q=u&&u.coordsToLatLng||Nl,Y,ie,ce,xe;if(!v&&!m)return null;switch(m.type){case"Point":return Y=q(v),Lu(R,a,Y,u);case"MultiPoint":for(ce=0,xe=v.length;ce<xe;ce++)Y=q(v[ce]),T.push(Lu(R,a,Y,u));return new Tt(T);case"LineString":case"MultiLineString":return ie=Lo(v,m.type==="LineString"?0:1,q),new xr(ie,u);case"Polygon":case"MultiPolygon":return ie=Lo(v,m.type==="Polygon"?1:2,q),new Aa(ie,u);case"GeometryCollection":for(ce=0,xe=m.geometries.length;ce<xe;ce++){var je=Do({geometry:m.geometries[ce],type:"Feature",properties:a.properties},u);je&&T.push(je)}return new Tt(T);case"FeatureCollection":for(ce=0,xe=m.features.length;ce<xe;ce++){var Fe=Do(m.features[ce],u);Fe&&T.push(Fe)}return new Tt(T);default:throw new Error("Invalid GeoJSON object.")}}function Lu(a,u,m,v){return a?a(u,m):new Sa(m,v&&v.markersInheritOptions&&v)}function Nl(a){return new Ae(a[1],a[0],a[2])}function Lo(a,u,m){for(var v=[],T=0,R=a.length,q;T<R;T++)q=u?Lo(a[T],u-1,m):(m||Nl)(a[T]),v.push(q);return v}function Mo(a,u){return a=Te(a),a.alt!==void 0?[k(a.lng,u),k(a.lat,u),k(a.alt,u)]:[k(a.lng,u),k(a.lat,u)]}function Pl(a,u,m,v){for(var T=[],R=0,q=a.length;R<q;R++)T.push(u?Pl(a[R],d(a[R])?0:u-1,m,v):Mo(a[R],v));return!u&&m&&T.length>0&&T.push(T[0].slice()),T}function Ra(a,u){return a.feature?l({},a.feature,{geometry:u}):Sr(u)}function Sr(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Vo={toGeoJSON:function(a){return Ra(this,{type:"Point",coordinates:Mo(this.getLatLng(),a)})}};Sa.include(Vo),Du.include(Vo),Oo.include(Vo),xr.include({toGeoJSON:function(a){var u=!d(this._latlngs),m=Pl(this._latlngs,u?1:0,!1,a);return Ra(this,{type:(u?"Multi":"")+"LineString",coordinates:m})}}),Aa.include({toGeoJSON:function(a){var u=!d(this._latlngs),m=u&&!d(this._latlngs[0]),v=Pl(this._latlngs,m?2:u?1:0,!0,a);return u||(v=[v]),Ra(this,{type:(m?"Multi":"")+"Polygon",coordinates:v})}}),St.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(m){u.push(m.toGeoJSON(a).geometry.coordinates)}),Ra(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var m=u==="GeometryCollection",v=[];return this.eachLayer(function(T){if(T.toGeoJSON){var R=T.toGeoJSON(a);if(m)v.push(R.geometry);else{var q=Sr(R);q.type==="FeatureCollection"?v.push.apply(v,q.features):v.push(q)}}}),m?Ra(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function Ca(a,u){return new ni(a,u)}var Mu=Ca,jo=_t.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,m){this._url=a,this._bounds=ye(u),W(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Bt(this._image),this},bringToBack:function(){return this._map&&mr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ye(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:$e("img");if(Be(u,"leaflet-image-layer"),this._zoomAnimated&&Be(u,"leaflet-zoom-animated"),this.options.className&&Be(u,this.options.className),u.onselectstart=C,u.onmousemove=C,u.onload=f(this.fire,this,"load"),u.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;fi(this._image,m,u)},_reset:function(){var a=this._image,u=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=u.getSize();De(a,u.min),a.style.width=m.x+"px",a.style.height=m.y+"px"},_updateOpacity:function(){st(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Ts=function(a,u,m){return new jo(a,u,m)},xs=jo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:$e("video");if(Be(u,"leaflet-image-layer"),this._zoomAnimated&&Be(u,"leaflet-zoom-animated"),this.options.className&&Be(u,this.options.className),u.onselectstart=C,u.onmousemove=C,u.onloadeddata=f(this.fire,this,"load"),a){for(var m=u.getElementsByTagName("source"),v=[],T=0;T<m.length;T++)v.push(m[T].src);this._url=m.length>0?v:[u.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var q=$e("source");q.src=this._url[R],u.appendChild(q)}}});function Vu(a,u,m){return new xs(a,u,m)}var ju=jo.extend({_initImage:function(){var a=this._image=this._url;Be(a,"leaflet-image-layer"),this._zoomAnimated&&Be(a,"leaflet-zoom-animated"),this.options.className&&Be(a,this.options.className),a.onselectstart=C,a.onmousemove=C}});function Ss(a,u,m){return new ju(a,u,m)}var Li=_t.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof Ae||Z(a))?(this._latlng=Te(a),W(this,u)):(W(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&st(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&st(this._container,1),this.bringToFront(),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(st(this._container,0),this._removeTimeout=setTimeout(f(dt,void 0,this._container),200)):dt(this._container),this.options.interactive&&(wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Te(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bt(this._container),this},bringToBack:function(){return this._map&&mr(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof Tt){u=null;var m=this._source._layers;for(var v in m)if(m[v]._map){u=m[v];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=B(this.options.offset),m=this._getAnchor();this._zoomAnimated?De(this._container,a.add(m)):u=u.add(a).add(m);var v=this._containerBottom=-u.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=v+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Qe.include({_initOverlay:function(a,u,m,v){var T=u;return T instanceof a||(T=new a(v).setContent(u)),m&&T.setLatLng(m),T}}),_t.include({_initOverlay:function(a,u,m,v){var T=m;return T instanceof a?(W(T,v),T._source=this):(T=u&&!v?u:new a(v,this),T.setContent(m)),T}});var zo=Li.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Li.prototype.openOn.call(this,a)},onAdd:function(a){Li.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Tr||this._source.on("preclick",Bn))},onRemove:function(a){Li.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Tr||this._source.off("preclick",Bn))},getEvents:function(){var a=Li.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=$e("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=$e("div",a+"-content-wrapper",u);if(this._contentNode=$e("div",a+"-content",m),yr(u),Oi(this._contentNode),Ve(u,"contextmenu",Bn),this._tipContainer=$e("div",a+"-tip-container",u),this._tip=$e("div",a+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=$e("a",a+"-close-button",u);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Ve(v,"click",function(T){vt(T),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var m=a.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),u.width=m+1+"px",u.whiteSpace="",u.height="";var v=a.offsetHeight,T=this.options.maxHeight,R="leaflet-popup-scrolled";T&&v>T?(u.height=T+"px",Be(a,R)):wt(a,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),m=this._getAnchor();De(this._container,u.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(qr(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+u,v=this._containerWidth,T=new fe(this._containerLeft,-m-this._containerBottom);T._add(ei(this._container));var R=a.layerPointToContainerPoint(T),q=B(this.options.autoPanPadding),Y=B(this.options.autoPanPaddingTopLeft||q),ie=B(this.options.autoPanPaddingBottomRight||q),ce=a.getSize(),xe=0,je=0;R.x+v+ie.x>ce.x&&(xe=R.x+v-ce.x+ie.x),R.x-xe-Y.x<0&&(xe=R.x-Y.x),R.y+m+ie.y>ce.y&&(je=R.y+m-ce.y+ie.y),R.y-je-Y.y<0&&(je=R.y-Y.y),(xe||je)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([xe,je]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),sh=function(a,u){return new zo(a,u)};Qe.mergeOptions({closePopupOnClick:!0}),Qe.include({openPopup:function(a,u,m){return this._initOverlay(zo,a,u,m).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),_t.include({bindPopup:function(a,u){return this._popup=this._initOverlay(zo,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Tt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){yn(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof Tr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var kl=Li.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Li.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Li.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Li.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$e("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,m,v=this._map,T=this._container,R=v.latLngToContainerPoint(v.getCenter()),q=v.layerPointToContainerPoint(a),Y=this.options.direction,ie=T.offsetWidth,ce=T.offsetHeight,xe=B(this.options.offset),je=this._getAnchor();Y==="top"?(u=ie/2,m=ce):Y==="bottom"?(u=ie/2,m=0):Y==="center"?(u=ie/2,m=ce/2):Y==="right"?(u=0,m=ce/2):Y==="left"?(u=ie,m=ce/2):q.x<R.x?(Y="right",u=0,m=ce/2):(Y="left",u=ie+(xe.x+je.x)*2,m=ce/2),a=a.subtract(B(u,m,!0)).add(xe).add(je),wt(T,"leaflet-tooltip-right"),wt(T,"leaflet-tooltip-left"),wt(T,"leaflet-tooltip-top"),wt(T,"leaflet-tooltip-bottom"),Be(T,"leaflet-tooltip-"+Y),De(T,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&st(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),If=function(a,u){return new kl(a,u)};Qe.include({openTooltip:function(a,u,m){return this._initOverlay(kl,a,u,m).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),_t.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kl,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[u](m),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Tt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(Ve(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ve(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,m,v;this._tooltip.options.sticky&&a.originalEvent&&(m=this._map.mouseEventToContainerPoint(a.originalEvent),v=this._map.containerPointToLayerPoint(m),u=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(u)}});var ah=Yi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Rn(u),u.appendChild(m.html)):u.innerHTML=m.html!==!1?m.html:"",m.bgPos){var v=B(m.bgPos);u.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function oh(a){return new ah(a)}Yi.Default=xa;var Ia=_t.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){W(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),dt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof fe?a:new fe(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,m=-a(-1/0,1/0),v=0,T=u.length,R;v<T;v++)R=u[v].style.zIndex,u[v]!==this._container&&R&&(m=a(m,+R));isFinite(m)&&(this.options.zIndex=m+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie.ielt9){st(this._container,this.options.opacity);var a=+new Date,u=!1,m=!1;for(var v in this._tiles){var T=this._tiles[v];if(!(!T.current||!T.loaded)){var R=Math.min(1,(a-T.loaded)/200);st(T.el,R),R<1?u=!0:(T.active?m=!0:this._onOpaqueTile(T),T.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),u&&(F(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=$e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===a?(this._levels[m].el.style.zIndex=u-Math.abs(a-m),this._onUpdateLevel(m)):(dt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var v=this._levels[a],T=this._map;return v||(v=this._levels[a]={},v.el=$e("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=u,v.origin=T.project(T.unproject(T.getPixelOrigin()),a).round(),v.zoom=a,this._setZoomTransform(v,T.getCenter(),T.getZoom()),C(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var a,u,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var v=u.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)dt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,m,v){var T=Math.floor(a/2),R=Math.floor(u/2),q=m-1,Y=new fe(+T,+R);Y.z=+q;var ie=this._tileCoordsToKey(Y),ce=this._tiles[ie];return ce&&ce.active?(ce.retain=!0,!0):(ce&&ce.loaded&&(ce.retain=!0),q>v?this._retainParent(T,R,q,v):!1)},_retainChildren:function(a,u,m,v){for(var T=2*a;T<2*a+2;T++)for(var R=2*u;R<2*u+2;R++){var q=new fe(T,R);q.z=m+1;var Y=this._tileCoordsToKey(q),ie=this._tiles[Y];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);m+1<v&&this._retainChildren(T,R,m+1,v)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,m,v){var T=Math.round(u);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var R=this.options.updateWhenZooming&&T!==this._tileZoom;(!v||R)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(a),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var m in this._levels)this._setZoomTransform(this._levels[m],a,u)},_setZoomTransform:function(a,u,m){var v=this._map.getZoomScale(m,a.zoom),T=a.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(u,m)).round();Ie.any3d?fi(a.el,T,v):De(a.el,T)},_resetGrid:function(){var a=this._map,u=a.options.crs,m=this._tileSize=this.getTileSize(),v=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],v).x/m.x),Math.ceil(a.project([0,u.wrapLng[1]],v).x/m.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],v).y/m.x),Math.ceil(a.project([u.wrapLat[1],0],v).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,m=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),v=u.getZoomScale(m,this._tileZoom),T=u.project(a,this._tileZoom).floor(),R=u.getSize().divideBy(v*2);return new le(T.subtract(R),T.add(R))},_update:function(a){var u=this._map;if(u){var m=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(a),T=this._pxBoundsToTileRange(v),R=T.getCenter(),q=[],Y=this.options.keepBuffer,ie=new le(T.getBottomLeft().subtract([Y,-Y]),T.getTopRight().add([Y,-Y]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ce in this._tiles){var xe=this._tiles[ce].coords;(xe.z!==this._tileZoom||!ie.contains(new fe(xe.x,xe.y)))&&(this._tiles[ce].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(a,m);return}for(var je=T.min.y;je<=T.max.y;je++)for(var Fe=T.min.x;Fe<=T.max.x;Fe++){var Jt=new fe(Fe,je);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var kt=this._tiles[this._tileCoordsToKey(Jt)];kt?kt.current=!0:q.push(Jt)}}if(q.sort(function(In,Qr){return In.distanceTo(R)-Qr.distanceTo(R)}),q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var En=document.createDocumentFragment();for(Fe=0;Fe<q.length;Fe++)this._addTile(q[Fe],En);this._level.el.appendChild(En)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var m=this._globalTileRange;if(!u.wrapLng&&(a.x<m.min.x||a.x>m.max.x)||!u.wrapLat&&(a.y<m.min.y||a.y>m.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(a);return ye(this.options.bounds).overlaps(v)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,m=this.getTileSize(),v=a.scaleBy(m),T=v.add(m),R=u.unproject(v,a.z),q=u.unproject(T,a.z);return[R,q]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),m=new ve(u[0],u[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),m=new fe(+u[0],+u[1]);return m.z=+u[2],m},_removeTile:function(a){var u=this._tiles[a];u&&(dt(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Be(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=C,a.onmousemove=C,Ie.ielt9&&this.options.opacity<1&&st(a,this.options.opacity)},_addTile:function(a,u){var m=this._getTilePos(a),v=this._tileCoordsToKey(a),T=this.createTile(this._wrapCoords(a),f(this._tileReady,this,a));this._initTile(T),this.createTile.length<2&&M(f(this._tileReady,this,a,null,T)),De(T,m),this._tiles[v]={el:T,coords:a,current:!0},u.appendChild(T),this.fire("tileloadstart",{tile:T,coords:a})},_tileReady:function(a,u,m){u&&this.fire("tileerror",{error:u,tile:m,coords:a});var v=this._tileCoordsToKey(a);m=this._tiles[v],m&&(m.loaded=+new Date,this._map._fadeAnimated?(st(m.el,0),F(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),u||(Be(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new fe(this._wrapX?A(a.x,this._wrapX):a.x,this._wrapY?A(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new le(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function lh(a){return new Ia(a)}var bn=Ia.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=W(this,u),u.detectRetina&&Ie.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var m=document.createElement("img");return Ve(m,"load",f(this._tileOnLoad,this,u,m)),Ve(m,"error",f(this._tileOnError,this,u,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(a),m},getTileUrl:function(a){var u={r:Ie.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=m),u["-y"]=m}return se(this._url,l(u,this.options))},_tileOnLoad:function(a,u){Ie.ielt9?setTimeout(f(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,m){var v=this.options.errorTileUrl;v&&u.getAttribute("src")!==v&&(u.src=v),a(m,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,m=this.options.zoomReverse,v=this.options.zoomOffset;return m&&(a=u-a),a+v},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=C,u.onerror=C,!u.complete)){u.src=_e;var m=this._tiles[a].coords;dt(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:m})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",_e),Ia.prototype._removeTile.call(this,a)},_tileReady:function(a,u,m){if(!(!this._map||m&&m.getAttribute("src")===_e))return Ia.prototype._tileReady.call(this,a,u,m)}});function ii(a,u){return new bn(a,u)}var As=bn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var m=l({},this.defaultWmsParams);for(var v in u)v in this.options||(m[v]=u[v]);u=W(this,u);var T=u.detectRetina&&Ie.retina?2:1,R=this.getTileSize();m.width=R.x*T,m.height=R.y*T,this.wmsParams=m},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,bn.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),m=this._crs,v=we(m.project(u[0]),m.project(u[1])),T=v.min,R=v.max,q=(this._wmsVersion>=1.3&&this._crs===Ht?[T.y,T.x,R.y,R.x]:[T.x,T.y,R.x,R.y]).join(","),Y=bn.prototype.getTileUrl.call(this,a);return Y+K(this.wmsParams,Y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+q},setParams:function(a,u){return l(this.wmsParams,a),u||this.redraw(),this}});function zu(a,u){return new As(a,u)}bn.WMS=As,ii.wms=zu;var _i=_t.extend({options:{padding:.1},initialize:function(a){W(this,a),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var m=this._map.getZoomScale(u,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,u),R=v.multiplyBy(-m).add(T).subtract(this._map._getNewPixelOrigin(a,u));Ie.any3d?fi(this._container,R,m):De(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),m=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new le(m,m.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Uo=_i.extend({options:{tolerance:0},getEvents:function(){var a=_i.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ve(a,"mousemove",this._onMouseMove,this),Ve(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ve(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,dt(this._container),pt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var a=this._bounds,u=this._container,m=a.getSize(),v=Ie.retina?2:1;De(u,a.min),u.width=v*m.x,u.height=v*m.y,u.style.width=m.x+"px",u.style.height=m.y+"px",Ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){_i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[y(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,m=u.next,v=u.prev;m?m.prev=v:this._drawLast=v,v?v.next=m:this._drawFirst=m,delete a._order,delete this._layers[y(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),m=[],v,T;for(T=0;T<u.length;T++){if(v=Number(u[T]),isNaN(v))return;m.push(v)}a.options._dashArray=m}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var m=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)a=v.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var m,v,T,R,q=a._parts,Y=q.length,ie=this._ctx;if(Y){for(ie.beginPath(),m=0;m<Y;m++){for(v=0,T=q[m].length;v<T;v++)R=q[m][v],ie[v?"lineTo":"moveTo"](R.x,R.y);u&&ie.closePath()}this._fillStroke(ie,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,m=this._ctx,v=Math.max(Math.round(a._radius),1),T=(Math.max(Math.round(a._radiusY),1)||v)/v;T!==1&&(m.save(),m.scale(1,T)),m.beginPath(),m.arc(u.x,u.y/T,v,0,Math.PI*2,!1),T!==1&&m.restore(),this._fillStroke(m,a)}},_fillStroke:function(a,u){var m=u.options;m.fill&&(a.globalAlpha=m.fillOpacity,a.fillStyle=m.fillColor||m.color,a.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=m.opacity,a.lineWidth=m.weight,a.strokeStyle=m.color,a.lineCap=m.lineCap,a.lineJoin=m.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),m,v,T=this._drawFirst;T;T=T.next)m=T.layer,m.options.interactive&&m._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(m))&&(v=m);this._fireEvent(v?[v]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(wt(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var m,v,T=this._drawFirst;T;T=T.next)m=T.layer,m.options.interactive&&m._containsPoint(u)&&(v=m);v!==this._hoveredLayer&&(this._handleMouseOut(a),v&&(Be(this._container,"leaflet-interactive"),this._fireEvent([v],a,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,m){this._map._fireDOMEvent(u,m||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var m=u.next,v=u.prev;if(m)m.prev=v;else return;v?v.next=m:m&&(this._drawFirst=m),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var m=u.next,v=u.prev;if(v)v.next=m;else return;m?m.prev=v:v&&(this._drawLast=v),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function Ol(a){return Ie.canvas?new Uo(a):null}var yi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),uh={_initContainer:function(){this._container=$e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_i.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=yi("shape");Be(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=yi("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[y(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;dt(u),a.removeInteractiveTarget(u),delete this._layers[y(a)]},_updateStyle:function(a){var u=a._stroke,m=a._fill,v=a.options,T=a._container;T.stroked=!!v.stroke,T.filled=!!v.fill,v.stroke?(u||(u=a._stroke=yi("stroke")),T.appendChild(u),u.weight=v.weight+"px",u.color=v.color,u.opacity=v.opacity,v.dashArray?u.dashStyle=Z(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=v.lineCap.replace("butt","flat"),u.joinstyle=v.lineJoin):u&&(T.removeChild(u),a._stroke=null),v.fill?(m||(m=a._fill=yi("fill")),T.appendChild(m),m.color=v.fillColor||v.color,m.opacity=v.fillOpacity):m&&(T.removeChild(m),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),m=Math.round(a._radius),v=Math.round(a._radiusY||m);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+m+","+v+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Bt(a._container)},_bringToBack:function(a){mr(a._container)}},Rs=Ie.vml?yi:ur,Xi=_i.extend({_initContainer:function(){this._container=Rs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Rs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dt(this._container),pt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var a=this._bounds,u=a.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,m.setAttribute("width",u.x),m.setAttribute("height",u.y)),De(m,a.min),m.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=Rs("path");a.options.className&&Be(u,a.options.className),a.options.interactive&&Be(u,"leaflet-interactive"),this._updateStyle(a),this._layers[y(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){dt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[y(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,m=a.options;u&&(m.stroke?(u.setAttribute("stroke",m.color),u.setAttribute("stroke-opacity",m.opacity),u.setAttribute("stroke-width",m.weight),u.setAttribute("stroke-linecap",m.lineCap),u.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?u.setAttribute("stroke-dasharray",m.dashArray):u.removeAttribute("stroke-dasharray"),m.dashOffset?u.setAttribute("stroke-dashoffset",m.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),m.fill?(u.setAttribute("fill",m.fillColor||m.color),u.setAttribute("fill-opacity",m.fillOpacity),u.setAttribute("fill-rule",m.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,qi(a._parts,u))},_updateCircle:function(a){var u=a._point,m=Math.max(Math.round(a._radius),1),v=Math.max(Math.round(a._radiusY),1)||m,T="a"+m+","+v+" 0 1,0 ",R=a._empty()?"M0 0":"M"+(u.x-m)+","+u.y+T+m*2+",0 "+T+-m*2+",0 ";this._setPath(a,R)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Bt(a._path)},_bringToBack:function(a){mr(a._path)}});Ie.vml&&Xi.include(uh);function Uu(a){return Ie.svg||Ie.vml?new Xi(a):null}Qe.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&Ol(a)||Uu(a)}});var ri=Aa.extend({initialize:function(a,u){Aa.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=ye(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Na(a,u){return new ri(a,u)}Xi.create=Rs,Xi.pointsToPath=qi,ni.geometryToLayer=Do,ni.coordsToLatLng=Nl,ni.coordsToLatLngs=Lo,ni.latLngToCoords=Mo,ni.latLngsToCoords=Pl,ni.getFeature=Ra,ni.asFeature=Sr,Qe.mergeOptions({boxZoom:!0});var Cs=Hn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),mi(),fa(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ve(document,{contextmenu:yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=$e("div","leaflet-zoom-box",this._container),Be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new le(this._point,this._startPoint),m=u.getSize();De(this._box,u.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(dt(this._box),wt(this._container,"leaflet-crosshair")),_n(),_s(),pt(document,{contextmenu:yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var u=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qe.addInitHook("addHandler","boxZoom",Cs),Qe.mergeOptions({doubleClickZoom:!0});var Bo=Hn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,m=u.getZoom(),v=u.options.zoomDelta,T=a.originalEvent.shiftKey?m-v:m+v;u.options.doubleClickZoom==="center"?u.setZoom(T):u.setZoomAround(a.containerPoint,T)}});Qe.addInitHook("addHandler","doubleClickZoom",Bo),Qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ho=Hn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Di(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){wt(this._map._container,"leaflet-grab"),wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ye(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),m=this._initialWorldOffset,v=this._draggable._newPos.x,T=(v-u+m)%a+u-m,R=(v+u+m)%a-u-m,q=Math.abs(T+m)<Math.abs(R+m)?T:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=q},_onDragEnd:function(a){var u=this._map,m=u.options,v=!m.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),v)u.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,q=m.easeLinearity,Y=T.multiplyBy(q/R),ie=Y.distanceTo([0,0]),ce=Math.min(m.inertiaMaxSpeed,ie),xe=Y.multiplyBy(ce/ie),je=ce/(m.inertiaDeceleration*q),Fe=xe.multiplyBy(-je/2).round();!Fe.x&&!Fe.y?u.fire("moveend"):(Fe=u._limitOffset(Fe,u.options.maxBounds),M(function(){u.panBy(Fe,{duration:je,easeLinearity:q,noMoveStart:!0,animate:!0})}))}}});Qe.addInitHook("addHandler","dragging",Ho),Qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var si=Hn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ve(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,m=a.scrollTop||u.scrollTop,v=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(v,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},m=this.keyCodes,v,T;for(v=0,T=m.left.length;v<T;v++)u[m.left[v]]=[-1*a,0];for(v=0,T=m.right.length;v<T;v++)u[m.right[v]]=[a,0];for(v=0,T=m.down.length;v<T;v++)u[m.down[v]]=[0,a];for(v=0,T=m.up.length;v<T;v++)u[m.up[v]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},m=this.keyCodes,v,T;for(v=0,T=m.zoomIn.length;v<T;v++)u[m.zoomIn[v]]=a;for(v=0,T=m.zoomOut.length;v<T;v++)u[m.zoomOut[v]]=-a},_addHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,m=this._map,v;if(u in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(v=this._panKeys[u],a.shiftKey&&(v=B(v).multiplyBy(3)),m.options.maxBounds&&(v=m._limitOffset(B(v),m.options.maxBounds)),m.options.worldCopyJump){var T=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(v)));m.panTo(T)}else m.panBy(v)}else if(u in this._zoomKeys)m.setZoom(m.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;yn(a)}}});Qe.addInitHook("addHandler","keyboard",si),Qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ai=Hn.extend({addHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=vs(a),m=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var v=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),v),yn(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),m=this._map.options.zoomSnap||0;a._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,R=m?Math.ceil(T/m)*m:T,q=a._limitZoom(u+(this._delta>0?R:-R))-u;this._delta=0,this._startTime=null,q&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+q):a.setZoomAround(this._lastMousePos,u+q))}});Qe.addInitHook("addHandler","scrollWheelZoom",ai);var Is=600;Qe.mergeOptions({tapHold:Ie.touchNative&&Ie.safari&&Ie.mobile,tapTolerance:15});var Ji=Hn.extend({addHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new fe(u.clientX,u.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(Ve(document,"touchend",vt),Ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Is),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){pt(document,"touchend",vt),pt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new fe(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var m=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});m._simulated=!0,u.target.dispatchEvent(m)}});Qe.addInitHook("addHandler","tapHold",Ji),Qe.mergeOptions({touchZoom:Ie.touch,bounceAtZoomLimits:!0});var er=Hn.extend({addHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){wt(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var m=u.mouseEventToContainerPoint(a.touches[0]),v=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(m.add(v)._divideBy(2))),this._startDist=m.distanceTo(v),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),vt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,m=u.mouseEventToContainerPoint(a.touches[0]),v=u.mouseEventToContainerPoint(a.touches[1]),T=m.distanceTo(v)/this._startDist;if(this._zoom=u.getScaleZoom(T,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&T<1||this._zoom>u.getMaxZoom()&&T>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var R=m._add(v)._divideBy(2)._subtract(this._centerPoint);if(T===1&&R.x===0&&R.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var q=f(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(q,this,!0),vt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qe.addInitHook("addHandler","touchZoom",er),Qe.BoxZoom=Cs,Qe.DoubleClickZoom=Bo,Qe.Drag=Ho,Qe.Keyboard=si,Qe.ScrollWheelZoom=ai,Qe.TapHold=Ji,Qe.TouchZoom=er,t.Bounds=le,t.Browser=Ie,t.CRS=gt,t.Canvas=Uo,t.Circle=Du,t.CircleMarker=Oo,t.Class=Oe,t.Control=cn,t.DivIcon=ah,t.DivOverlay=Li,t.DomEvent=xl,t.DomUtil=gr,t.Draggable=Di,t.Evented=Ee,t.FeatureGroup=Tt,t.GeoJSON=ni,t.GridLayer=Ia,t.Handler=Hn,t.Icon=Yi,t.ImageOverlay=jo,t.LatLng=Ae,t.LatLngBounds=ve,t.Layer=_t,t.LayerGroup=St,t.LineUtil=O,t.Map=Qe,t.Marker=Sa,t.Mixin=Es,t.Path=Tr,t.Point=fe,t.PolyUtil=Ea,t.Polygon=Aa,t.Polyline=xr,t.Popup=zo,t.PosAnimation=bs,t.Projection=be,t.Rectangle=ri,t.Renderer=_i,t.SVG=Xi,t.SVGOverlay=ju,t.TileLayer=bn,t.Tooltip=kl,t.Transformation=un,t.Util=j,t.VideoOverlay=xs,t.bind=f,t.bounds=we,t.canvas=Ol,t.circle=Rf,t.circleMarker=rh,t.control=vn,t.divIcon=oh,t.extend=l,t.featureGroup=Wi,t.geoJSON=Ca,t.geoJson=Mu,t.gridLayer=lh,t.icon=Il,t.imageOverlay=Ts,t.latLng=Te,t.latLngBounds=ye,t.layerGroup=wr,t.map=$i,t.marker=Ou,t.point=B,t.polygon=ti,t.polyline=Cf,t.popup=sh,t.rectangle=Na,t.setOptions=W,t.stamp=y,t.svg=Uu,t.svgOverlay=Ss,t.tileLayer=ii,t.tooltip=If,t.transformation=Yn,t.version=s,t.videoOverlay=Vu;var Ns=window.L;t.noConflict=function(){return window.L=Ns,this},window.L=t})}(Rc,Rc.exports)),Rc.exports}var Iu=WD();const xf=gg(Iu);function Sf(i,e,t){return Object.freeze({instance:i,context:e,container:t})}function Af(i,e){return e==null?function(s,l){const h=U.useRef(void 0);return h.current||(h.current=i(s,l)),h}:function(s,l){const h=U.useRef(void 0);h.current||(h.current=i(s,l));const f=U.useRef(s),{instance:_}=h.current;return U.useEffect(function(){f.current!==s&&(e(_,s,f.current),f.current=s)},[_,s,e]),h}}function bx(i,e){U.useEffect(function(){return(e.layerContainer??e.map).addLayer(i.instance),function(){var h;(h=e.layerContainer)==null||h.removeLayer(i.instance),e.map.removeLayer(i.instance)}},[e,i])}function Ex(i){return function(t){const s=wf(),l=i(Tf(t,s),s);return _x(s.map,t.attribution),k_(l.current,t.eventHandlers),bx(l.current,s),l}}function YD(i,e){const t=U.useRef(void 0);U.useEffect(function(){if(e.pathOptions!==t.current){const l=e.pathOptions??{};i.instance.setStyle(l),t.current=l}},[i,e])}function XD(i){return function(t){const s=wf(),l=i(Tf(t,s),s);return k_(l.current,t.eventHandlers),bx(l.current,s),YD(l.current,t),l}}function JD(i,e){const t=Af(i,e),s=Ex(t);return vx(s)}function eL(i,e){const t=Af(i),s=$D(t,e);return ZD(s)}function tL(i,e){const t=Af(i,e),s=XD(t);return vx(s)}function nL(i,e){const t=Af(i,e),s=Ex(t);return KD(s)}function iL(i,e,t){const{opacity:s,zIndex:l}=e;s!=null&&s!==t.opacity&&i.setOpacity(s),l!=null&&l!==t.zIndex&&i.setZIndex(l)}function wx(){return wf().map}function rL({bounds:i,boundsOptions:e,center:t,children:s,className:l,id:h,placeholder:f,style:_,whenReady:y,zoom:b,...A},C){const[k]=U.useState({className:l,id:h,style:_}),[D,G]=U.useState(null),W=U.useRef(void 0);U.useImperativeHandle(C,()=>(D==null?void 0:D.map)??null,[D]);const K=U.useCallback(se=>{if(se!==null&&!W.current){const Z=new Iu.Map(se,A);W.current=Z,t!=null&&b!=null?Z.setView(t,b):i!=null&&Z.fitBounds(i,e),y!=null&&Z.whenReady(y),G(GD(Z))}},[]);U.useEffect(()=>()=>{D==null||D.map.remove()},[D]);const te=D?Sd.createElement(P_,{value:D},s):f??null;return Sd.createElement("div",{...k,ref:K},te)}const Tx=U.forwardRef(rL),mg=JD(function({position:e,...t},s){const l=new Iu.Marker(e,t);return Sf(l,yx(s,{overlayContainer:l}))},function(e,t,s){t.position!==s.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==s.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==s.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==s.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),sL=tL(function({positions:e,...t},s){const l=new Iu.Polyline(e,t);return Sf(l,yx(s,{overlayContainer:l}))},function(e,t,s){t.positions!==s.positions&&e.setLatLngs(t.positions)}),pg=eL(function(e,t){const s=new Iu.Popup(e,t.overlayContainer);return Sf(s,t)},function(e,t,{position:s},l){U.useEffect(function(){const{instance:f}=e;function _(b){b.popup===f&&(f.update(),l(!0))}function y(b){b.popup===f&&l(!1)}return t.map.on({popupopen:_,popupclose:y}),t.overlayContainer==null?(s!=null&&f.setLatLng(s),f.openOn(t.map)):t.overlayContainer.bindPopup(f),function(){var A;t.map.off({popupopen:_,popupclose:y}),(A=t.overlayContainer)==null||A.unbindPopup(),t.map.removeLayer(f)}},[e,t,l,s])}),xx=nL(function({url:e,...t},s){const l=new Iu.TileLayer(e,Tf(t,s));return Sf(l,s)},function(e,t,s){iL(e,t,s);const{url:l}=t;l!=null&&l!==s.url&&e.setUrl(l)}),aL=[{id:"poi1",nombre:"Parque del Café",tipo:"Parque Temático",descripcion:"Parque temático con atracciones mecánicas y espectáculos culturales sobre la tradición cafetera.",coordenadas:[4.5363,-75.7705]},{id:"poi2",nombre:"Parque de la Vida",tipo:"Parque Urbano",descripcion:"El parque urbano más grande de Armenia, con lagos, senderos y zonas verdes.",coordenadas:[4.57195,-75.58691]},{id:"poi3",nombre:"Plaza de Bolívar de Armenia",tipo:"Plaza Principal",descripcion:"Corazón histórico y cultural de la ciudad, rodeado de arquitectura colonial y cafés.",coordenadas:[4.53247,-75.67247]},{id:"poi4",nombre:"Jardín Botánico del Quindío y Mariposario",tipo:"Jardín Botánico",descripcion:"Espacio natural con colección de plantas endémicas y un famoso mariposario. Ubicado en Calarcá, cerca de Armenia.",coordenadas:[4.5,-75.64]},{id:"poi5",nombre:"Museo del Oro Quimbaya",tipo:"Museo",descripcion:"Exhibe una importante colección arqueológica de la cultura Quimbaya, incluyendo piezas de oro.",coordenadas:[4.571417,-75.650278]},{id:"poi6",nombre:"Catedral La Inmaculada Concepción",tipo:"Religioso",descripcion:"Principal iglesia católica de Armenia, ubicada en la Plaza de Bolívar.",coordenadas:[4.5328,-75.6725]}],Sx="/icons/parada-Icon.png";var Pp={exports:{}},kp,iE;function oL(){if(iE)return kp;iE=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kp=i,kp}var Op,rE;function lL(){if(rE)return Op;rE=1;var i=oL();function e(){}function t(){}return t.resetWarningCache=e,Op=function(){function s(f,_,y,b,A,C){if(C!==i){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}s.isRequired=s;function l(){return s}var h={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:l,element:s,elementType:s,instanceOf:l,node:s,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:t,resetWarningCache:e};return h.PropTypes=h,h},Op}var sE;function uL(){return sE||(sE=1,Pp.exports=lL()()),Pp.exports}var cL=uL();const Kn=gg(cL),hL=new xf.Icon({iconUrl:Sx,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),Ax=({paraderos:i})=>{const e=wx();return U.useEffect(()=>{if(i&&i.length>0){const t=xf.latLngBounds(i.map(s=>s.position));e.fitBounds(t,{padding:[50,50]})}},[i,e]),null};Ax.propTypes={paraderos:Kn.arrayOf(Kn.shape({position:Kn.arrayOf(Kn.number).isRequired})).isRequired};const dL=()=>{const[i,e]=U.useState([]),[t,s]=U.useState(!0),l=[4.53389,-75.68111],h=[[4.3379,-75.87],[4.6459,-75.551]];return U.useEffect(()=>{s(!0);const f=yo(Zt,"paraderos"),_=Fc(f,y=>{const b=y.docs.map(A=>{const C=A.data();return{id:A.id,nombre:C.nombre,position:[C.ubicacion.latitude,C.ubicacion.longitude],descripcion:C.descripcion||"",rutas:["Consultar panel de administración"]}});e(b),s(!1)},y=>{console.error("Error al obtener paraderos: ",y),s(!1)});return()=>_()},[]),w.jsxs("div",{className:"relative h-full",children:[w.jsxs("div",{className:"absolute top-2 left-2 z-10 bg-white p-2 rounded-md shadow-md",children:[w.jsx(fn,{to:"/dashboard",className:"px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 mr-2",children:"Volver al Inicio"}),w.jsx(fn,{to:"/map",className:"px-3 py-1 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Ver Mapa Completo"})]}),w.jsxs(Tx,{center:l,zoom:12,style:{height:"100%",width:"100%"},maxBounds:h,minZoom:10,children:[w.jsx(xx,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"}),w.jsx(Ax,{paraderos:i}),t?w.jsx("div",{className:"loading-indicator",children:"Cargando paraderos..."}):i.map(f=>w.jsx(mg,{position:f.position,icon:hL,children:w.jsx(pg,{maxWidth:"250",minWidth:"200",children:w.jsxs("div",{className:"paradero-popup text-sm",children:[w.jsx("h3",{className:"font-bold text-base mb-1",children:f.nombre}),f.descripcion&&w.jsx("p",{className:"text-gray-600 text-xs mb-1",children:f.descripcion}),w.jsxs("div",{className:"mt-1",children:[w.jsx("h4",{className:"font-semibold text-xs",children:"Rutas:"}),w.jsx("p",{className:"text-xs text-gray-700",children:f.rutas.join(", ")})]})]})})},f.id)),aL.map(f=>w.jsx(mg,{position:f.coordenadas,children:w.jsx(pg,{maxWidth:"200",children:w.jsxs("div",{className:"text-sm",children:[w.jsx("b",{children:f.nombre}),w.jsx("br",{}),w.jsx("i",{className:"text-xs",children:f.tipo}),w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:f.descripcion})]})})},f.id))]})]})},fL=[{id:1,name:"Ruta 1",from:"Punto A",to:"Punto B",duration:"20 minutos",status:"En tiempo"},{id:2,name:"Ruta 2",from:"Punto C",to:"Punto D",duration:"15 minutos",status:"Retraso de 5 minutos"}],mL=()=>w.jsxs("div",{className:"dashboard-container pt-16",children:[" ",w.jsx("h1",{className:"text-2xl font-bold text-center mb-6 text-gray-700",children:"Explora las rutas y paraderos de Armenia"}),w.jsx("section",{className:"map-section mb-8",children:w.jsx("div",{className:"h-[400px] md:h-[500px] w-full shadow-lg rounded-lg overflow-hidden",children:w.jsx(dL,{})})}),w.jsxs("section",{className:"routes-section mb-8",children:[w.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-600",children:"Rutas en Tiempo Real (Información General)"}),w.jsx("ul",{className:"space-y-2",children:fL.map(i=>w.jsxs("li",{className:"p-3 border rounded-lg bg-white shadow-sm",children:[w.jsx("div",{className:"font-semibold text-blue-600",children:i.name}),w.jsxs("div",{className:"text-sm text-gray-600",children:[w.jsxs("span",{children:["De: ",i.from]})," ",w.jsx("span",{className:"mx-1",children:"→"})," ",w.jsxs("span",{children:["A: ",i.to]})]}),w.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[w.jsxs("span",{children:["Duración: ",i.duration]}),w.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${i.status.includes("Retraso")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:i.status})]})]},i.id))})]}),w.jsx(N_,{})]}),pL=new xf.Icon({iconUrl:Sx,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),Rx=({paraderos:i})=>{const e=wx();return U.useEffect(()=>{if(i&&i.length>0){const t=xf.latLngBounds(i.map(s=>s.position));e.fitBounds(t,{padding:[50,50]})}},[i,e]),null};Rx.propTypes={paraderos:Kn.arrayOf(Kn.shape({id:Kn.oneOfType([Kn.string,Kn.number]),nombre:Kn.string,position:Kn.arrayOf(Kn.number),descripcion:Kn.string,rutas:Kn.array,idRutas:Kn.array}))};const gL=()=>{const[i,e]=U.useState([]),[t,s]=U.useState([]),[l,h]=U.useState(null),[f,_]=U.useState(""),[y,b]=U.useState(!0),A=U.useMemo(()=>[4.53389,-75.68111],[]),C=[[4.3379,-75.87],[4.6459,-75.551]];U.useEffect(()=>{b(!0);const Z=yo(Zt,"paraderos"),ue=Fc(Z,_e=>{const Se=_e.docs.map(V=>({id:V.id,nombre:V.data().nombre,position:[V.data().ubicacion.latitude,V.data().ubicacion.longitude],descripcion:V.data().descripcion||"",rutas:[],idRutas:[]}));e(Se),b(!1)},_e=>{console.error("Error al obtener paraderos: ",_e),b(!1)});return()=>ue()},[]),U.useEffect(()=>{const Z=yo(Zt,"rutas"),ue=Fc(Z,_e=>{const Se=_e.docs.map(V=>({id:V.id,name:V.data().nombre,from:V.data().origen,to:V.data().destino,duration:V.data().duracionEstimada||"No especificada",status:V.data().estado==="Activa"?"En tiempo":V.data().estado==="Inactiva"?"Fuera de servicio":"Retraso por mantenimiento",paraderos:V.data().paraderos||[]}));s(Se)},_e=>{console.error("Error al obtener rutas: ",_e)});return()=>ue()},[]);const[k,D]=U.useState([]);U.useEffect(()=>{if(i.length>0&&t.length>0){const Z=i.map(ue=>{const _e=[],Se=[];return t.forEach(V=>{V.paraderos.includes(ue.id)&&(_e.push(V.name),Se.push(V.id))}),{...ue,rutas:_e.length?_e:["No hay rutas asignadas"],idRutas:Se}});D(Z)}},[i,t]);const G=U.useMemo(()=>t.map(Z=>{const ue=k.filter(_e=>_e.idRutas&&_e.idRutas.includes(Z.id));return{...Z,paraderos:ue.map(_e=>({id:_e.id,nombre:_e.nombre,position:_e.position})),path:ue.length>=2?[ue[0].position,ue[ue.length-1].position]:ue.length===1?[ue[0].position,A]:[]}}),[k,t,A]),W=U.useMemo(()=>[...G].sort((Z,ue)=>{const _e=parseInt(Z.name.replace(/\D/g,""),10)||0,Se=parseInt(ue.name.replace(/\D/g,""),10)||0;return _e-Se}),[G]),K=Z=>{h(Z)},te=Z=>{_(Z.target.value)},se=U.useMemo(()=>{let Z=k;return l&&(Z=Z.filter(ue=>ue.idRutas&&ue.idRutas.includes(l.id))),f&&(Z=Z.filter(ue=>ue.nombre.toLowerCase().includes(f.toLowerCase()))),Z},[k,l,f]);return w.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-64px)] pt-16 md:pt-0 relative",children:[w.jsxs("div",{className:"w-full md:w-1/3 lg:w-1/4 bg-white shadow-md overflow-y-auto p-4",children:[w.jsx("div",{className:"mb-4",children:w.jsx("input",{type:"text",placeholder:"Buscar paradero por nombre...",value:f,onChange:te,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),w.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Rutas Disponibles"}),y?w.jsx("p",{className:"text-gray-500",children:"Cargando rutas..."}):w.jsx("ul",{className:"space-y-3",children:W.map(Z=>w.jsxs("li",{className:`p-3 border rounded-lg hover:bg-gray-100 cursor-pointer transition-colors ${(l==null?void 0:l.id)===Z.id?"bg-blue-100 border-blue-500":""}`,onClick:()=>K(Z),children:[w.jsx("div",{className:"font-semibold text-blue-700",children:Z.name}),w.jsxs("div",{className:"text-sm text-gray-600",children:[w.jsxs("span",{children:["De: ",Z.from]})," → ",w.jsxs("span",{children:["A: ",Z.to]})]}),w.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[w.jsxs("span",{children:["Duración: ",Z.duration]}),w.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${Z.status.includes("Retraso")||Z.status.includes("Fuera")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:Z.status})]})]},Z.id))})]}),w.jsx("div",{className:"w-full md:w-2/3 lg:w-3/4",children:w.jsxs(Tx,{center:A,zoom:13,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},maxBounds:C,children:[w.jsx(xx,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'}),se.map(Z=>w.jsx(mg,{position:Z.position,icon:pL,children:w.jsxs(pg,{children:[w.jsx("strong",{children:Z.nombre}),w.jsx("br",{}),Z.descripcion,w.jsx("br",{}),"Rutas: ",Z.rutas.join(", ")]})},Z.id)),l&&l.path.length===2&&w.jsx(sL,{positions:l.path,color:"blue"}),w.jsx(Rx,{paraderos:se})]})}),w.jsx(N_,{})]})},_L=()=>{const i=[{id:1,message:"Tu ruta está en camino.",date:"2023-10-01"},{id:2,message:"Retraso en la ruta 2.",date:"2023-10-02"}];return w.jsxs("div",{className:"notifications-container",children:[w.jsx("h2",{children:"Notificaciones"}),w.jsx("ul",{children:i.map(e=>w.jsxs("li",{children:[w.jsx("strong",{children:e.date}),": ",e.message]},e.id))})]})},Cx=()=>{var _e,Se,V,P,I;const[i,e]=U.useState(null),[t,s]=U.useState(null),[l,h]=U.useState(!1),[f,_]=U.useState(!0),[y,b]=U.useState(!1),[A,C]=U.useState(!1),k=U.useRef(null),[D,G]=U.useState("/icons/default-avatar.png"),[W,K]=U.useState(!1);U.useEffect(()=>{const z=async()=>{_(!0);const F=wi.currentUser;if(F){const j=ui(Zt,"users",F.uid);try{const Oe=await bf(j);let Me;if(Oe.exists()){const me=Oe.data(),Ee=me.preferences||{routeType:"Económica",notifications:!0};Me={...me,profileImage:me.profileImage||"/icons/default-avatar.png",preferences:Ee}}else Me={name:F.displayName||"",email:F.email||"",profileImage:"/icons/default-avatar.png",preferences:{routeType:"Económica",notifications:!0}},console.log("No se encontraron datos del usuario en Firestore, usando datos por defecto.");e(Me),s(Me),G(Me.profileImage||"/icons/default-avatar.png")}catch(Oe){console.error("Error al obtener datos del usuario:",Oe);const Me={name:F.displayName||"Usuario Ejemplo",email:F.email||"usuario@example.com",profileImage:"/icons/default-avatar.png",preferences:{routeType:"Económica",notifications:!0}};e(Me),s(Me),G(Me.profileImage)}}else console.log("Usuario no autenticado al cargar perfil.");_(!1)},M=wi.onAuthStateChanged(F=>{F?z():(_(!1),e(null),s(null),G("/icons/default-avatar.png"))});return()=>M()},[]),U.useEffect(()=>{!l&&i?G(i.profileImage||"/icons/default-avatar.png"):l&&t&&G(t.profileImage||"/icons/default-avatar.png")},[i,t,l]);const te=z=>{const{name:M,value:F,type:j,checked:Oe}=z.target;s(Me=>{if(!Me)return null;if(j==="checkbox")return{...Me,preferences:{...Me.preferences,notifications:Oe}};if(M.includes(".")){const[me,Ee]=M.split(".");return{...Me,[me]:{...Me[me]||{},[Ee]:F}}}else return{...Me,[M]:F}})},se=async z=>{const M=z.target.files[0];if(!M)return;if(!M.type.startsWith("image/")){alert("Solo puedes subir archivos de imagen (jpg, png, etc).");return}const F=wi.currentUser;if(!F){alert("Usuario no autenticado.");return}b(!0),K(!1);const j=`${F.uid}_${Date.now()}_${M.name}`,Oe=gx(),Me=MD(Oe,`profileImages/${F.uid}/${j}`);try{console.log("Paso 0: Iniciando subida de imagen..."),await DD(Me,M);const me=await LD(Me);console.log("Paso 1: Imagen subida y URL obtenida:",me),s(Ee=>({...Ee,profileImage:me})),console.log("Paso 2: tempProfile actualizado con nueva imagen."),K(!0)}catch(me){console.error("Error al subir imagen o obtener URL:",me),alert("Error al subir la imagen. Inténtalo nuevamente.")}finally{b(!1),console.log("Paso 3: setIsUploading(false) ejecutado.")}},Z=()=>{k.current.click()},ue=async z=>{if(z.preventDefault(),A||y||!t)return;C(!0),console.log("Paso 3.5: Iniciando handleSubmit");const M=wi.currentUser;if(M){const F=ui(Zt,"users",M.uid);try{const j={name:t.name,email:t.email,preferences:t.preferences};console.log("Paso 4: Preparando datos para Firestore:",j),W&&t.profileImage&&(!i||t.profileImage!==i.profileImage)?(j.profileImage=t.profileImage,console.log("Paso 5: Se incluirá nueva profileImage en Firestore:",t.profileImage)):console.log("Paso 5b: No se actualizará profileImage en Firestore. newImageSuccessfullyUploaded:",W,"tempProfile.profileImage:",t.profileImage),await sl(F,j),console.log("Paso 6: Datos actualizados en Firestore."),e(Oe=>({...Oe,...j})),h(!1),K(!1),alert("Perfil actualizado correctamente")}catch(j){console.error("Error al actualizar el perfil en Firestore:",j),alert("Hubo un error al actualizar el perfil.")}finally{C(!1),console.log("Paso 7: setIsSaving(false) ejecutado.")}}};return f||!i?w.jsxs("div",{className:"flex justify-center items-center p-5 min-h-[200px]",children:[w.jsx(gp,{className:"h-8 w-8 animate-spin text-blue-500"}),w.jsx("span",{className:"ml-2 text-gray-700",children:"Cargando perfil..."})]}):w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full mx-auto my-8",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Mi Perfil"}),!l&&w.jsxs("button",{onClick:()=>{s({...i}),h(!0),K(!1)},className:"flex items-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium transition-colors duration-150",children:[w.jsx(cR,{size:16,className:"mr-1"}),w.jsx("span",{children:"Editar"})]})]}),w.jsx("div",{className:"flex flex-col items-center mb-6",children:w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-gray-300 dark:border-gray-600 shadow-md",children:w.jsx("img",{src:D,alt:"Foto de perfil",className:"w-full h-full object-cover",onError:()=>{G("/icons/default-avatar.png"),W&&K(!1)}})}),l&&w.jsx("button",{onClick:Z,disabled:y,className:"absolute -bottom-1 -right-1 bg-blue-500 text-white p-2 rounded-full hover:bg-blue-600 shadow-md transition-colors duration-150 disabled:opacity-50",title:"Cambiar foto",children:y?w.jsx(gp,{className:"h-4 w-4 animate-spin"}):w.jsx(DA,{size:16})}),w.jsx("input",{type:"file",ref:k,onChange:se,accept:"image/*",className:"hidden"})]})}),l?w.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre:"}),w.jsx("input",{type:"text",id:"name",name:"name",value:(t==null?void 0:t.name)||"",onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Correo electrónico:"}),w.jsx("input",{type:"email",id:"email",name:"email",value:(t==null?void 0:t.email)||"",onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),w.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Cambiar esto no actualiza tu email de inicio de sesión."})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"routeType",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo de ruta preferida:"}),w.jsxs("select",{id:"routeType",name:"preferences.routeType",value:((_e=t==null?void 0:t.preferences)==null?void 0:_e.routeType)||"Económica",onChange:te,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[w.jsx("option",{value:"Rápida",children:"Rápida"}),w.jsx("option",{value:"Económica",children:"Económica"}),w.jsx("option",{value:"Sostenible",children:"Sostenible"})]})]}),w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{type:"checkbox",id:"notifications",name:"preferences.notifications",checked:((Se=t==null?void 0:t.preferences)==null?void 0:Se.notifications)||!1,onChange:te,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:focus:ring-offset-gray-800"}),w.jsx("label",{htmlFor:"notifications",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Recibir notificaciones"})]}),w.jsxs("div",{className:"flex space-x-3 pt-4",children:[w.jsxs("button",{type:"submit",disabled:A||y,className:"w-full flex justify-center items-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-150 disabled:opacity-50",children:[A?w.jsx(gp,{className:"h-5 w-5 animate-spin mr-2"}):null,A?"Guardando...":"Guardar Cambios"]}),w.jsx("button",{type:"button",onClick:()=>h(!1),disabled:A||y,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-500 rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-150",children:"Cancelar"})]})]}):w.jsxs("div",{className:"space-y-3 text-sm",children:[w.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[w.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nombre:"}),w.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(i==null?void 0:i.name)||"No especificado"})]}),w.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[w.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Correo:"}),w.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(i==null?void 0:i.email)||"No especificado"})]}),w.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[w.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Tipo de ruta preferida:"}),w.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((V=i==null?void 0:i.preferences)==null?void 0:V.routeType)||"No especificado"})]}),w.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[w.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Notificaciones:"}),w.jsx("p",{className:`font-medium ${(P=i==null?void 0:i.preferences)!=null&&P.notifications?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:(I=i==null?void 0:i.preferences)!=null&&I.notifications?"Activadas":"Desactivadas"})]})]})]})},yL=()=>w.jsxs("div",{className:"not-found",children:[w.jsx("img",{src:"/images/404.png",alt:"Página No Encontrada",className:"not-found-image"}),w.jsx("h1",{children:"404 - Página No Encontrada"}),w.jsx("p",{children:"Lo sentimos, la página que estás buscando no existe."}),w.jsx(fn,{to:"/",className:"home-button",children:"Volver al Inicio"})]});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function vL(i,e,t,s){function l(h){return h instanceof t?h:new t(function(f){f(h)})}return new(t||(t=Promise))(function(h,f){function _(A){try{b(s.next(A))}catch(C){f(C)}}function y(A){try{b(s.throw(A))}catch(C){f(C)}}function b(A){A.done?h(A.value):l(A.value).then(_,y)}b((s=s.apply(i,[])).next())})}function bL(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,f;return f={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function _(b){return function(A){return y([b,A])}}function y(b){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,l&&(h=b[0]&2?l.return:b[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,b[1])).done)return h;switch(l=0,h&&(b=[b[0]&2,h.value]),b[0]){case 0:case 1:h=b;break;case 4:return t.label++,{value:b[1],done:!1};case 5:t.label++,l=b[1],b=[0];continue;case 7:b=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(b[0]===6||b[0]===2)){t=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){t.label=b[1];break}if(b[0]===6&&t.label<h[1]){t.label=h[1],h=b;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(b);break}h[2]&&t.ops.pop(),t.trys.pop();continue}b=e.call(i,t)}catch(A){b=[6,A],l=0}finally{s=h=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ou=function(){return ou=Object.assign||function(e){for(var t,s=1,l=arguments.length;s<l;s++){t=arguments[s];for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&(e[h]=t[h])}return e},ou.apply(this,arguments)},Ix=function(i){return{loading:i==null,value:i}},EL=function(){return function(i,e){switch(e.type){case"error":return ou(ou({},i),{error:e.error,loading:!1,value:void 0});case"reset":return Ix(e.defaultValue);case"value":return ou(ou({},i),{error:void 0,loading:!1,value:e.value});default:return i}}},wL=function(i){var e=i?i():void 0,t=U.useReducer(EL(),Ix(e)),s=t[0],l=t[1],h=U.useCallback(function(){var y=i?i():void 0;l({type:"reset",defaultValue:y})},[i]),f=U.useCallback(function(y){l({type:"error",error:y})},[]),_=U.useCallback(function(y){l({type:"value",value:y})},[]);return U.useMemo(function(){return{error:s.error,loading:s.loading,reset:h,setError:f,setValue:_,value:s.value}},[s.error,s.loading,h,f,_,s.value])},O_=function(i,e){var t=wL(function(){return i.currentUser}),s=t.error,l=t.loading,h=t.setError,f=t.setValue,_=t.value;return U.useEffect(function(){var y=rI(i,function(b){return vL(void 0,void 0,void 0,function(){var A;return bL(this,function(C){switch(C.label){case 0:return[3,4];case 1:return C.trys.push([1,3,,4]),[4,e.onUserChanged(b)];case 2:return C.sent(),[3,4];case 3:return A=C.sent(),h(A),[3,4];case 4:return f(b),[2]}})})},h);return function(){y()}},[i]),[_,l,s]};const TL=()=>{const i=ml(),[e,t]=U.useState(!1),[s,l]=U.useState(!1),[h]=O_(wi),[f,_]=U.useState(!1);U.useEffect(()=>{(async()=>{if(h)try{const k=ui(Zt,"users",h.uid),D=await bf(k);D.exists()&&D.data().rol==="administrador"?_(!0):_(!1)}catch(k){console.error("Error al verificar rol de administrador:",k),_(!1)}else _(!1)})()},[h]);const y=()=>{i("/login")},b=()=>{t(!e)},A=()=>{l(!s)};return w.jsxs("nav",{className:"bg-white shadow-md px-4 py-2 fixed w-full top-0 left-0 z-50",children:[w.jsxs("div",{className:"container mx-auto",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs(fn,{to:"/dashboard",className:"flex items-center space-x-2",children:[w.jsx("img",{src:"/icons/parada-Icon.png",alt:"ADMU Logo",className:"h-8 w-8"}),w.jsx("span",{className:"font-bold text-lg text-gray-500",children:"ADMU"})]}),w.jsx("div",{className:"md:hidden",children:w.jsx("button",{onClick:A,className:"p-2 text-gray-500 focus:outline-none",children:s?w.jsx(Hp,{size:24}):w.jsx(eR,{size:24})})}),w.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[w.jsxs(fn,{to:"/dashboard",className:"flex items-center space-x-1 text-gray-700 hover:text-blue-600 transition-colors",children:[w.jsx(T0,{size:20}),w.jsx("span",{children:"Inicio"})]}),w.jsxs(fn,{to:"/map",className:"flex items-center space-x-1 text-gray-700 hover:text-blue-600 transition-colors",children:[w.jsx(x0,{size:20}),w.jsx("span",{children:"Mapa"})]}),w.jsxs(fn,{to:"/notifications",className:"flex items-center space-x-1 text-gray-700 hover:text-blue-600 transition-colors",children:[w.jsx(w0,{size:20}),w.jsx("span",{children:"Notificaciones"})]}),f&&w.jsxs(fn,{to:"/admin/usuarios",className:"flex items-center space-x-1 text-gray-700 hover:text-blue-600 transition-colors",children:[w.jsx(S0,{size:20}),w.jsx("span",{children:"Panel Admin"})]}),w.jsxs("button",{onClick:b,className:"flex items-center space-x-1 text-gray-700 hover:text-blue-600 transition-colors bg-transparent",children:[w.jsx(Bp,{size:20}),w.jsx("span",{children:"Perfil"})]}),w.jsxs("button",{onClick:y,className:"flex items-center space-x-1 text-white bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg transition-colors",children:[w.jsx(zp,{size:20}),w.jsx("span",{children:"Salir"})]})]})]}),s&&w.jsxs("div",{className:"md:hidden mt-4 pb-4 space-y-3",children:[w.jsxs(fn,{to:"/dashboard",className:"flex items-center space-x-2 py-2 text-gray-700 hover:text-blue-600",children:[w.jsx(T0,{size:20}),w.jsx("span",{children:"Inicio"})]}),w.jsxs(fn,{to:"/map",className:"flex items-center space-x-2 py-2 text-gray-700 hover:text-blue-600",children:[w.jsx(x0,{size:20}),w.jsx("span",{children:"Mapa"})]}),w.jsxs(fn,{to:"/notifications",className:"flex items-center space-x-2 py-2 text-gray-700 hover:text-blue-600",children:[w.jsx(w0,{size:20}),w.jsx("span",{children:"Notificaciones"})]}),f&&w.jsxs(fn,{to:"/admin/usuarios",className:"flex items-center space-x-2 py-2 text-gray-700 hover:text-blue-600",children:[w.jsx(S0,{size:20}),w.jsx("span",{children:"Panel Admin"})]}),w.jsxs("button",{onClick:b,className:"flex items-center space-x-2 py-2 text-gray-700 hover:text-blue-600 w-full text-left bg-transparent",children:[w.jsx(Bp,{size:20}),w.jsx("span",{children:"Perfil"})]}),w.jsxs("button",{onClick:y,className:"flex items-center space-x-2 text-white bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg w-full",children:[w.jsx(zp,{size:20}),w.jsx("span",{children:"Salir"})]})]})]}),e&&w.jsx("div",{className:"absolute right-4 md:right-8 top-16 bg-white shadow-lg rounded-lg p-4 w-64 z-50",children:w.jsx(Cx,{})})]})},xL=()=>w.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w.jsx(TL,{}),w.jsx("main",{className:"container mx-auto px-4 py-8",children:w.jsx(gE,{})})]}),SL=({children:i})=>{const[e,t]=O_(wi);return t?w.jsx("div",{className:"loading-container flex justify-center items-center min-h-screen",children:"Cargando..."}):e?i:w.jsx(lu,{to:"/login",replace:!0})},Nx=({children:i})=>{const[e,t]=O_(wi),[s,l]=U.useState(!1),[h,f]=U.useState(!0);return U.useEffect(()=>{t?f(!0):(async()=>{if(e)try{const y=ui(Zt,"users",e.uid),b=await bf(y);b.exists()&&b.data().rol==="administrador"?l(!0):l(!1)}catch(y){console.error("Error fetching user role:",y),l(!1)}f(!1)})()},[e,t]),t||h?w.jsx("div",{className:"loading-container flex justify-center items-center min-h-screen text-gray-700 dark:text-gray-300",children:"Cargando acceso..."}):e?s?i:w.jsx(lu,{to:"/dashboard",replace:!0}):w.jsx(lu,{to:"/login",replace:!0})};Nx.propTypes={children:Kn.node.isRequired};const AL=()=>{const i=cs(),e=ml(),t=async()=>{try{await sI(wi),e("/login")}catch(l){console.error("Error al cerrar sesión:",l)}},s=[{to:"/admin/rutas",text:"Gestión de Rutas",icon:rR},{to:"/admin/paraderos",text:"Gestión de Paraderos",icon:Zs},{to:"/admin/usuarios",text:"Gestión de Usuarios",icon:RE}];return w.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[w.jsxs("aside",{className:"w-64 bg-white dark:bg-gray-800 shadow-md flex-shrink-0",children:[w.jsx("div",{className:"p-6",children:w.jsx(fn,{to:"/admin",className:"flex items-center space-x-3 text-2xl font-semibold text-gray-800 dark:text-white",children:w.jsx("span",{children:"ADMU Admin"})})}),w.jsxs("nav",{className:"mt-6 px-3",children:[w.jsxs(fn,{to:"/dashboard",className:`flex items-center space-x-3 px-3 py-2.5 mb-4 rounded-md text-sm font-medium
                      bg-green-500 text-white hover:bg-green-600 transition-colors`,children:[w.jsx(wE,{className:"h-5 w-5"}),w.jsx("span",{children:"Volver al Sitio Web"})]}),s.map(l=>{const h=l.icon,f=i.pathname===l.to||(l.exact?i.pathname===l.to:i.pathname.startsWith(l.to)&&l.to!=="/admin");return w.jsxs(fn,{to:l.to,className:`flex items-center space-x-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors
                            ${f?"bg-blue-500 text-white dark:bg-blue-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[w.jsx(h,{className:"h-5 w-5"}),w.jsx("span",{children:l.text})]},l.text)})]}),w.jsx("div",{className:"mt-auto p-3",children:w.jsxs("button",{onClick:t,className:`flex items-center space-x-3 px-3 py-2.5 rounded-md text-sm font-medium w-full
                           text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 
                           hover:text-gray-900 dark:hover:text-white transition-colors`,children:[w.jsx(zp,{className:"h-5 w-5"}),w.jsx("span",{children:"Cerrar Sesión"})]})})]}),w.jsxs("main",{className:"flex-1 p-6 md:p-10 overflow-y-auto",children:[w.jsx(gE,{})," "]})]})},RL=()=>{const[i,e]=U.useState([]),[t,s]=U.useState(""),[l,h]=U.useState(""),[f,_]=U.useState(""),[y,b]=U.useState(""),[A,C]=U.useState("Activa"),[k,D]=U.useState(null),[G,W]=U.useState(!0),[K,te]=U.useState(!1),se=yo(Zt,"rutas"),Z=Sd.useCallback(async()=>{W(!0);try{const P=await T_(se);e(P.docs.map(I=>({...I.data(),id:I.id})))}catch(P){console.error("Error al obtener rutas: ",P),alert("Error al cargar las rutas.")}W(!1)},[se]);U.useEffect(()=>{Z()},[Z]);const ue=()=>{s(""),h(""),_(""),b(""),C("Activa"),D(null),te(!1)},_e=async P=>{if(P.preventDefault(),!t||!l||!f){alert("Por favor, completa los campos obligatorios: Nombre, Origen y Destino.");return}W(!0);try{if(k){const I=ui(Zt,"rutas",k.id);await sl(I,{nombre:t,origen:l,destino:f,duracionEstimada:y,estado:A}),alert("Ruta actualizada exitosamente")}else await YT(se,{nombre:t,origen:l,destino:f,duracionEstimada:y,estado:A,paraderos:[]}),alert("Ruta creada exitosamente");ue(),Z()}catch(I){console.error("Error al guardar ruta: ",I),alert("Error al guardar la ruta.")}W(!1)},Se=async P=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta ruta?")){W(!0);try{const I=ui(Zt,"rutas",P);await WT(I),Z(),alert("Ruta eliminada exitosamente")}catch(I){console.error("Error al eliminar ruta: ",I),alert("Error al eliminar la ruta.")}W(!1)}},V=P=>{D(P),s(P.nombre),h(P.origen),_(P.destino),b(P.duracionEstimada||""),C(P.estado||"Activa"),te(!0)};return w.jsxs("div",{className:"container mx-auto px-4 py-8 bg-white dark:bg-gray-800 shadow-xl rounded-lg",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-3xl font-semibold text-gray-800 dark:text-white",children:"Gestión de Rutas"}),w.jsxs("button",{onClick:()=>{te(!0),D(null),s(""),h(""),_(""),b(""),C("Activa")},className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md flex items-center transition-colors duration-150",children:[w.jsx(TE,{size:20,className:"mr-2"})," Crear Nueva Ruta"]})]}),K&&w.jsxs("form",{onSubmit:_e,className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white mb-4",children:k?"Editar Ruta":"Crear Nueva Ruta"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"nombreRuta",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Ruta"}),w.jsx("input",{type:"text",id:"nombreRuta",value:t,onChange:P=>s(P.target.value),placeholder:"Ej: Ruta 101",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"origen",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Origen"}),w.jsx("input",{type:"text",id:"origen",value:l,onChange:P=>h(P.target.value),placeholder:"Ej: Terminal Norte",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"destino",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Destino"}),w.jsx("input",{type:"text",id:"destino",value:f,onChange:P=>_(P.target.value),placeholder:"Ej: Centro Comercial",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"duracionEstimada",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duración Estimada"}),w.jsx("input",{type:"text",id:"duracionEstimada",value:y,onChange:P=>b(P.target.value),placeholder:"Ej: 30 minutos",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"estadoRuta",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),w.jsxs("select",{id:"estadoRuta",value:A,onChange:P=>C(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white",children:[w.jsx("option",{value:"Activa",children:"Activa"}),w.jsx("option",{value:"Inactiva",children:"Inactiva"}),w.jsx("option",{value:"Mantenimiento",children:"Mantenimiento"})]})]})]}),w.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[w.jsx("button",{type:"button",onClick:ue,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 rounded-md shadow-sm transition-colors duration-150",children:"Cancelar"}),w.jsx("button",{type:"submit",disabled:G,className:"px-4 py-2 text-sm font-medium text-white bg-green-500 hover:bg-green-600 rounded-md shadow-sm flex items-center transition-colors duration-150 disabled:opacity-50",children:G?"Guardando...":k?"Actualizar Ruta":"Crear Ruta"})]})]}),w.jsxs("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white p-4 border-b dark:border-gray-700",children:"Listado de Rutas"}),G&&i.length===0?w.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"Cargando rutas..."}):!G&&i.length===0?w.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"No hay rutas registradas."}):w.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[w.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Origen"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Destino"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Duración"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),w.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map(P=>w.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:P.nombre}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:P.origen}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:P.destino}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:P.duracionEstimada}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:w.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                                      ${P.estado==="Activa"?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":P.estado==="Inactiva"?"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100"}`,children:P.estado})}),w.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[w.jsx("button",{onClick:()=>V(P),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-150",title:"Editar",children:w.jsx(xE,{size:18})}),w.jsx("button",{onClick:()=>Se(P.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors duration-150",title:"Eliminar",children:w.jsx(AE,{size:18})})]})]},P.id))})]})]})]})},CL=()=>{const[i,e]=U.useState([]),[t,s]=U.useState(""),[l,h]=U.useState(""),[f,_]=U.useState(""),[y,b]=U.useState(""),[A,C]=U.useState(null),[k,D]=U.useState(!0),[G,W]=U.useState(!1),[K,te]=U.useState([]),[se,Z]=U.useState([]),ue=yo(Zt,"paraderos"),_e=yo(Zt,"rutas");U.useEffect(()=>{D(!0);const M=Fc(ue,F=>{try{e(F.docs.map(j=>({...j.data(),id:j.id})))}catch(j){console.error("Error al obtener paraderos: ",j),alert("Error al cargar los paraderos.")}D(!1)});return()=>M()},[ue]),U.useEffect(()=>{(async()=>{try{const F=await T_(_e);te(F.docs.map(j=>({...j.data(),id:j.id})))}catch(F){console.error("Error al obtener rutas: ",F)}})()},[_e]);const Se=()=>{s(""),h(""),_(""),b(""),Z([]),C(null),W(!1)},V=async M=>{if(M.preventDefault(),!t||l===""||f===""){alert("Por favor, completa Nombre, Latitud y Longitud.");return}const F=parseFloat(l),j=parseFloat(f);if(isNaN(F)||isNaN(j)){alert("Latitud y Longitud deben ser números válidos.");return}D(!0);try{if(A){const Oe=ui(Zt,"paraderos",A.id);await sl(Oe,{nombre:t,ubicacion:new qc(F,j),descripcion:y,rutas:se});for(const Me of se){const me=ui(Zt,"rutas",Me),Ee=K.find(fe=>fe.id===Me);if(Ee){const fe=Ee.paraderos||[];fe.includes(A.id)||await sl(me,{paraderos:[...fe,A.id]})}}alert("Paradero actualizado exitosamente")}else{const Oe=await YT(ue,{nombre:t,ubicacion:new qc(F,j),descripcion:y,rutas:se});for(const Me of se){const me=ui(Zt,"rutas",Me),Ee=K.find(fe=>fe.id===Me);if(Ee){const fe=Ee.paraderos||[];await sl(me,{paraderos:[...fe,Oe.id]})}}alert("Paradero creado exitosamente")}Se()}catch(Oe){console.error("Error al guardar paradero: ",Oe),alert("Error al guardar el paradero.")}D(!1)},P=async M=>{if(window.confirm("¿Estás seguro de que deseas eliminar este paradero? Considera si está asignado a alguna ruta.")){D(!0);try{const F=ui(Zt,"paraderos",M);await WT(F);for(const j of K)if(j.paraderos&&j.paraderos.includes(M)){const Oe=ui(Zt,"rutas",j.id);await sl(Oe,{paraderos:j.paraderos.filter(Me=>Me!==M)})}alert("Paradero eliminado exitosamente")}catch(F){console.error("Error al eliminar paradero: ",F),alert("Error al eliminar el paradero.")}D(!1)}},I=M=>{C(M),s(M.nombre),M.ubicacion&&typeof M.ubicacion.latitude=="number"&&typeof M.ubicacion.longitude=="number"?(h(M.ubicacion.latitude.toString()),_(M.ubicacion.longitude.toString())):(h(""),_("")),b(M.descripcion||""),Z(M.rutas||[]),W(!0)},z=M=>{Z(F=>F.includes(M)?F.filter(j=>j!==M):[...F,M])};return w.jsxs("div",{className:"container mx-auto px-4 py-8 bg-white dark:bg-gray-800 shadow-xl rounded-lg",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-3xl font-semibold text-gray-800 dark:text-white",children:"Gestión de Paraderos"}),w.jsxs("button",{onClick:()=>{W(!0),C(null),s(""),h(""),_(""),b(""),Z([])},className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md flex items-center transition-colors duration-150",children:[w.jsx(TE,{size:20,className:"mr-2"})," Crear Nuevo Paradero"]})]}),G&&w.jsxs("form",{onSubmit:V,className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white mb-4",children:A?"Editar Paradero":"Crear Nuevo Paradero"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"nombreParadero",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Paradero"}),w.jsx("input",{type:"text",id:"nombreParadero",value:t,onChange:M=>s(M.target.value),placeholder:"Ej: Parada Principal",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"latitud",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Latitud"}),w.jsx("input",{type:"number",id:"latitud",step:"any",value:l,onChange:M=>h(M.target.value),placeholder:"Ej: 4.60971",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"longitud",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Longitud"}),w.jsx("input",{type:"number",id:"longitud",step:"any",value:f,onChange:M=>_(M.target.value),placeholder:"Ej: -74.08175",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripción (Opcional)"}),w.jsx("textarea",{id:"descripcion",value:y,onChange:M=>b(M.target.value),placeholder:"Ej: Frente al centro comercial, cerca de la entrada principal.",rows:"3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rutas asociadas"}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:K.map(M=>w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{type:"checkbox",id:`ruta-${M.id}`,checked:se.includes(M.id),onChange:()=>z(M.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),w.jsx("label",{htmlFor:`ruta-${M.id}`,className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:M.nombre})]},M.id))})]})]}),w.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[w.jsx("button",{type:"button",onClick:Se,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 rounded-md shadow-sm transition-colors duration-150",children:"Cancelar"}),w.jsx("button",{type:"submit",disabled:k,className:"px-4 py-2 text-sm font-medium text-white bg-green-500 hover:bg-green-600 rounded-md shadow-sm flex items-center transition-colors duration-150 disabled:opacity-50",children:k?"Guardando...":A?"Actualizar Paradero":"Crear Paradero"})]})]}),w.jsxs("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white p-4 border-b dark:border-gray-700",children:"Listado de Paraderos"}),k&&i.length===0?w.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"Cargando paraderos..."}):!k&&i.length===0?w.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"No hay paraderos registrados."}):w.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[w.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Latitud"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Longitud"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descripción"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rutas"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),w.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map(M=>{var F,j;return w.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:M.nombre}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(F=M.ubicacion)==null?void 0:F.latitude.toFixed(5)}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(j=M.ubicacion)==null?void 0:j.longitude.toFixed(5)}),w.jsx("td",{className:"px-6 py-4 whitespace-normal text-sm text-gray-500 dark:text-gray-300 max-w-xs break-words",children:M.descripcion}),w.jsx("td",{className:"px-6 py-4 whitespace-normal text-sm text-gray-500 dark:text-gray-300",children:M.rutas&&M.rutas.length>0?K.filter(Oe=>M.rutas.includes(Oe.id)).map(Oe=>Oe.nombre).join(", "):"Sin rutas asignadas"}),w.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[w.jsx("button",{onClick:()=>I(M),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-150",title:"Editar",children:w.jsx(xE,{size:18})}),w.jsx("button",{onClick:()=>P(M.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors duration-150",title:"Eliminar",children:w.jsx(AE,{size:18})})]})]},M.id)})})]})]})]})},IL=()=>{const[i,e]=U.useState([]),[t,s]=U.useState(!0),[l,h]=U.useState(null),[f,_]=U.useState(null);U.useEffect(()=>{const A=wi.onAuthStateChanged(async C=>{if(C){h(C);const k=ui(Zt,"users",C.uid),D=await bf(k);D.exists()?_(D.data().rol):_(null)}else h(null),_(null)});return()=>A()},[]);const y=async()=>{s(!0);try{const A=yo(Zt,"users"),C=await T_(A);e(C.docs.map(k=>({...k.data(),id:k.id,uid:k.id})))}catch(A){console.error("Error al obtener usuarios: ",A),alert("Error al cargar la lista de usuarios.")}s(!1)};U.useEffect(()=>{y()},[]);const b=async(A,C)=>{if(f!=="administrador"){alert("No tienes permisos para cambiar roles.");return}if(!A||!C){alert("Información incompleta para cambiar el rol.");return}if(l&&l.uid===A&&C!=="administrador"){const k=i.filter(D=>D.rol==="administrador");if(k.length===1&&k[0].id===A){alert("No puedes quitarte el rol de administrador si eres el único."),y();return}}if(window.confirm(`¿Estás seguro de cambiar el rol del usuario a ${C}?`)){s(!0);const k=ui(Zt,"users",A);try{await sl(k,{rol:C}),e(i.map(D=>D.id===A?{...D,rol:C}:D)),alert("Rol de usuario actualizado exitosamente.")}catch(D){console.error("Error al actualizar rol: ",D),alert("Error al actualizar el rol del usuario.")}s(!1)}};return w.jsxs("div",{className:"container mx-auto px-4 py-8 bg-white dark:bg-gray-800 shadow-xl rounded-lg",children:[w.jsx("div",{className:"flex justify-between items-center mb-6",children:w.jsx("h2",{className:"text-3xl font-semibold text-gray-800 dark:text-white",children:"Gestión de Usuarios"})}),f!=="administrador"&&!t&&w.jsxs("div",{className:"p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300",role:"alert",children:[w.jsx("span",{className:"font-medium",children:"Acceso Restringido:"})," Solo los administradores pueden modificar roles."]}),w.jsxs("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white p-4 border-b dark:border-gray-700",children:"Listado de Usuarios Registrados"}),t?w.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"Cargando usuarios..."}):i.length===0?w.jsx("p",{className:"p-4 text-gray-500 dark:text-gray-400",children:"No hay usuarios registrados en la colección 'users'."}):w.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[w.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rol Actual"}),f==="administrador"&&w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cambiar Rol A"})]})}),w.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map(A=>w.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:A.email}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:A.nombre||"No especificado"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:w.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                                      ${A.rol==="administrador"?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100"}`,children:[A.rol==="administrador"?w.jsx(SE,{size:14,className:"mr-1"}):w.jsx(RE,{size:14,className:"mr-1"}),A.rol||"No asignado"]})}),f==="administrador"&&w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w.jsxs("select",{value:A.rol||"usuario",onChange:C=>b(A.id,C.target.value),disabled:t||l&&l.uid===A.id&&A.rol==="administrador"&&i.filter(C=>C.rol==="administrador").length<=1,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-white disabled:opacity-70",children:[w.jsx("option",{value:"usuario",children:"Usuario"}),w.jsx("option",{value:"administrador",children:"Administrador"})]})})]},A.id))})]})]}),w.jsx("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-500 rounded-md",children:w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"flex-shrink-0"}),w.jsx("div",{className:"ml-3",children:w.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-200",children:[w.jsx("strong",{children:"Instrucciones para el Administrador Principal:"}),' Para asegurar el control de roles, el primer usuario administrador debe ser configurado manualmente en Firestore. Asegúrate de que tu documento de usuario en la colección `users` (con tu UID como ID del documento) tenga un campo `rol` con el valor `"administrador"`. Una vez configurado, podrás gestionar los roles de otros usuarios desde esta interfaz.']})})]})})]})};function NL(){return w.jsx(pA,{children:w.jsxs(GS,{children:[w.jsx(kn,{path:"/login",element:w.jsx(BD,{})}),w.jsx(kn,{path:"/register",element:w.jsx(HD,{})}),w.jsx(kn,{path:"/reset-password",element:w.jsx(qD,{})}),w.jsxs(kn,{element:w.jsx(SL,{children:w.jsx(xL,{})}),children:[w.jsx(kn,{index:!0,element:w.jsx(lu,{to:"/dashboard",replace:!0})})," ",w.jsx(kn,{path:"dashboard",element:w.jsx(mL,{})}),w.jsx(kn,{path:"map",element:w.jsx(gL,{})}),w.jsx(kn,{path:"notifications",element:w.jsx(_L,{})}),w.jsx(kn,{path:"profile",element:w.jsx(Cx,{})})]}),w.jsxs(kn,{path:"/admin",element:w.jsx(Nx,{children:w.jsx(AL,{})}),children:[w.jsx(kn,{index:!0,element:w.jsx(lu,{to:"rutas",replace:!0})})," ",w.jsx(kn,{path:"rutas",element:w.jsx(RL,{})}),w.jsx(kn,{path:"paraderos",element:w.jsx(CL,{})}),w.jsx(kn,{path:"usuarios",element:w.jsx(IL,{})})]}),w.jsx(kn,{path:"/",element:w.jsx(lu,{to:"/login",replace:!0})})," ",w.jsx(kn,{path:"*",element:w.jsx(yL,{})})]})})}J1.createRoot(document.getElementById("root")).render(w.jsx(NL,{}));
